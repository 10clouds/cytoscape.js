/*!
 * This file is part of cytoscape.js snapshot-1394047958698.
 * 
 * Cytoscape.js is free software: you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as published by the Free
 * Software Foundation, either version 3 of the License, or (at your option) any
 * later version.
 * 
 * Cytoscape.js is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more
 * details.
 * 
 * You should have received a copy of the GNU Lesser General Public License along with
 * cytoscape.js. If not, see <http://www.gnu.org/licenses/>.
 */
var cytoscape;!function(e){"use strict";var t=cytoscape=function(){return cytoscape.init.apply(cytoscape,arguments)};t.init=function(e){return void 0===e&&(e={}),t.is.plainObject(e)?new t.Core(e):t.is.string(e)?t.extension.apply(t.extension,arguments):void 0},t.fn={},"undefined"!=typeof exports&&(exports=module.exports=cytoscape),"undefined"!=typeof define&&define("cytoscape",function(){return cytoscape}),e&&(e.cytoscape=cytoscape)}("undefined"==typeof window?null:window),function(e,t){"use strict";e.is={string:function(e){return null!=e&&"string"==typeof e},fn:function(e){return null!=e&&"function"==typeof e},array:function(e){return null!=e&&e instanceof Array},plainObject:function(t){return null!=t&&typeof t==typeof{}&&!e.is.array(t)&&t.constructor===Object},number:function(e){return null!=e&&"number"==typeof e&&!isNaN(e)},integer:function(t){return e.is.number(t)&&Math.floor(t)===t},color:function(e){return null!=e&&"string"==typeof e&&""!==$.Color(e).toString()},bool:function(e){return null!=e&&typeof e==typeof!0},elementOrCollection:function(t){return e.is.element(t)||e.is.collection(t)},element:function(t){return t instanceof e.Element&&t._private.single},collection:function(t){return t instanceof e.Collection&&!t._private.single},core:function(t){return t instanceof e.Core},style:function(t){return t instanceof e.Style},stylesheet:function(t){return t instanceof e.Stylesheet},event:function(t){return t instanceof e.Event},emptyString:function(t){return t?e.is.string(t)&&(""===t||t.match(/^\s+$/))?!0:!1:!0},nonemptyString:function(t){return t&&e.is.string(t)&&""!==t&&!t.match(/^\s+$/)?!0:!1},domElement:function(e){return"undefined"==typeof HTMLElement?!1:e instanceof HTMLElement},touch:function(){return t&&("ontouchstart"in t||t.DocumentTouch&&document instanceof DocumentTouch)}}}(cytoscape,"undefined"==typeof window?null:window),function(e){"use strict";e.util={extend:function(){var t,r,i,a,n,o,s=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[1]||{},l=2),"object"==typeof s||e.is.fn(s)||(s={}),c===l&&(s=this,--l);c>l;l++)if(null!=(t=arguments[l]))for(r in t)i=s[r],a=t[r],s!==a&&(u&&a&&(e.is.plainObject(a)||(n=e.is.array(a)))?(n?(n=!1,o=i&&e.is.array(i)?i:[]):o=i&&e.is.plainObject(i)?i:{},s[r]=e.util.extend(u,o,a)):void 0!==a&&(s[r]=a));return s},throttle:function(t,r,i){var a=!0,n=!0;return i===!1?a=!1:e.is.plainObject(i)&&(a="leading"in i?i.leading:a,n="trailing"in i?i.trailing:n),i=i||{},i.leading=a,i.maxWait=r,i.trailing=n,e.util.debounce(t,r,i)},debounce:function(t,r,i){var a,n,o,s,l,c,u,p=0,d=!1,h=!0;if(r=Math.max(0,r)||0,i===!0){var v=!0;h=!1}else e.is.plainObject(i)&&(v=i.leading,d="maxWait"in i&&(Math.max(r,i.maxWait)||0),h="trailing"in i?i.trailing:h);var g=function(){var e=r-(+new Date-s);if(0>=e){n&&clearTimeout(n);var i=u;n=c=u=void 0,i&&(p=+new Date,o=t.apply(l,a),c||n||(a=l=null))}else c=setTimeout(g,e)},f=function(){c&&clearTimeout(c),n=c=u=void 0,(h||d!==r)&&(p=+new Date,o=t.apply(l,a),c||n||(a=l=null))};return function(){if(a=arguments,s=+new Date,l=this,u=h&&(c||!v),d===!1)var e=v&&!c;else{n||v||(p=s);var i=d-(s-p),y=0>=i;y?(n&&(n=clearTimeout(n)),p=s,o=t.apply(l,a)):n||(n=setTimeout(f,i))}return y&&c?c=clearTimeout(c):c||r===d||(c=setTimeout(g,r)),e&&(y=!0,o=t.apply(l,a)),!y||c||n||(a=l=null),o}},error:function(e){if(!console)throw e;if(console.error)console.error(e);else{if(!console.log)throw e;console.log(e)}},clone:function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},copy:function(t){return null==t?t:e.is.array(t)?t.slice():e.is.plainObject(t)?e.util.clone(t):t},mapEmpty:function(e){var t=!0;if(null!=e)for(var r in e){t=!1;break}return t},pushMap:function(t){var r=e.util.getMap(t);null==r?e.util.setMap($.extend({},t,{value:[t.value]})):r.push(t.value)},setMap:function(t){for(var r,i=t.map,a=t.keys,n=a.length,o=0;n>o;o++){var r=a[o];e.is.plainObject(r)&&e.util.error("Tried to set map with object key"),o<a.length-1?(null==i[r]&&(i[r]={}),i=i[r]):i[r]=t.value}},getMap:function(t){for(var r=t.map,i=t.keys,a=i.length,n=0;a>n;n++){var o=i[n];if(e.is.plainObject(o)&&e.util.error("Tried to get map with object key"),r=r[o],null==r)return r}return r},deleteMap:function(t){for(var r=t.map,i=t.keys,a=i.length,n=t.keepChildren,o=0;a>o;o++){var s=i[o];e.is.plainObject(s)&&e.util.error("Tried to delete map with object key");var l=o===t.keys.length-1;if(l)if(n)for(var c in r)n[c]||delete r[c];else delete r[s];else r=r[s]}},capitalize:function(t){return e.is.emptyString(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},camel2dash:function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r],a=i.toLowerCase(),n=i!==a;n?(t.push("-"),t.push(a)):t.push(i)}var o=t.length===e.length;return o?e:t.join("")},dash2camel:function(e){for(var t=[],r=!1,i=0;i<e.length;i++){var a=e[i],n="-"===a;n?r=!0:(t.push(r?a.toUpperCase():a),r=!1)}return t.join("")},trim:function(e){var t,r;for(t=0;t<e.length&&" "===e[t];t++);for(r=e.length-1;r>t&&" "===e[r];r--);return e.substring(t,r+1)},hex2tuple:function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t,r,i,a=4===e.length,n=16;return a?(t=parseInt(e[1]+e[1],n),r=parseInt(e[2]+e[2],n),i=parseInt(e[3]+e[3],n)):(t=parseInt(e[1]+e[2],n),r=parseInt(e[3]+e[4],n),i=parseInt(e[5]+e[6],n)),[t,r,i]}},hsl2tuple:function(t){function r(e,t,r){return 0>r&&(r+=1),r>1&&(r-=1),1/6>r?e+6*(t-e)*r:.5>r?t:2/3>r?e+(t-e)*(2/3-r)*6:e}var i,a,n,o,s,l,c,u,p=(e.util.regex.number,new RegExp("^"+e.util.regex.hsla+"$").exec(t));if(p){if(a=parseInt(p[1]),0>a?a=(360- -1*a%360)%360:a>360&&(a%=360),a/=360,n=parseFloat(p[2]),0>n||n>100)return;if(n/=100,o=parseFloat(p[3]),0>o||o>100)return;if(o/=100,s=p[4],void 0!==s&&(s=parseFloat(s),0>s||s>1))return;if(0===n)l=c=u=Math.round(255*o);else{var d=.5>o?o*(1+n):o+n-o*n,h=2*o-d;l=Math.round(255*r(h,d,a+1/3)),c=Math.round(255*r(h,d,a)),u=Math.round(255*r(h,d,a-1/3))}i=[l,c,u,s]}return i},rgb2tuple:function(t){var r,i=(e.util.regex.number,new RegExp("^"+e.util.regex.rgba+"$").exec(t));if(i){r=[];for(var a=[],n=1;3>=n;n++){var o=i[n];if("%"===o[o.length-1]&&(a[n]=!0),o=parseFloat(o),a[n]&&(o=o/100*255),0>o||o>255)return;r.push(Math.floor(o))}var s=a[1]||a[2]||a[3],l=a[1]&&a[2]&&a[3];if(s&&!l)return;var c=i[4];if(void 0!==c){if(c=parseFloat(c),0>c||c>1)return;r.push(c)}}return r},colorname2tuple:function(t){return e.util.colors[t.toLowerCase()]},color2tuple:function(t){return e.util.colorname2tuple(t)||e.util.hex2tuple(t)||e.util.rgb2tuple(t)||e.util.hsl2tuple(t)},tuple2hex:function(e){function t(e){var t=e.toString(16);return 1===t.length&&(t="0"+t),t}var r=e[0],i=e[1],a=e[2];return"#"+t(r)+t(i)+t(a)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},e.util.regex={},e.util.regex.number="(?:[-]?\\d*\\.\\d+|[-]?\\d+|[-]?\\d*\\.\\d+[eE]\\d+)",e.util.regex.rgba="rgb[a]?\\(("+e.util.regex.number+"[%]?)\\s*,\\s*("+e.util.regex.number+"[%]?)\\s*,\\s*("+e.util.regex.number+"[%]?)(?:\\s*,\\s*("+e.util.regex.number+"))?\\)",e.util.regex.rgbaNoBackRefs="rgb[a]?\\((?:"+e.util.regex.number+"[%]?)\\s*,\\s*(?:"+e.util.regex.number+"[%]?)\\s*,\\s*(?:"+e.util.regex.number+"[%]?)(?:\\s*,\\s*(?:"+e.util.regex.number+"))?\\)",e.util.regex.hsla="hsl[a]?\\(("+e.util.regex.number+")\\s*,\\s*("+e.util.regex.number+"[%])\\s*,\\s*("+e.util.regex.number+"[%])(?:\\s*,\\s*("+e.util.regex.number+"))?\\)",e.util.regex.hslaNoBackRefs="hsl[a]?\\((?:"+e.util.regex.number+")\\s*,\\s*(?:"+e.util.regex.number+"[%])\\s*,\\s*(?:"+e.util.regex.number+"[%])(?:\\s*,\\s*(?:"+e.util.regex.number+"))?\\)",e.util.regex.hex3="\\#[0-9a-fA-F]{3}",e.util.regex.hex6="\\#[0-9a-fA-F]{6}"}(cytoscape),function(e){"use strict";e.math={},e.math.signum=function(e){return e>0?1:0>e?-1:0},e.math.distance=function(e,t){var r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)},e.math.qbezierAt=function(e,t,r,i){return(1-i)*(1-i)*e+2*(1-i)*i*t+i*i*r},e.math.qbezierPtAt=function(t,r,i,a){return{x:e.math.qbezierAt(t.x,r.x,i.x,a),y:e.math.qbezierAt(t.y,r.y,i.y,a)}},e.math.roundRectangleIntersectLine=function(e,t,r,i,a,n,o){var s,l=this.getRoundRectangleRadius(a,n),c=a/2,u=n/2,p=r-c+l-o,d=i-u-o,h=r+c-l+o,v=d;if(s=this.finiteLinesIntersect(e,t,r,i,p,d,h,v,!1),s.length>0)return s;var g=r+c+o,f=i-u+l-o,y=g,m=i+u-l+o;if(s=this.finiteLinesIntersect(e,t,r,i,g,f,y,m,!1),s.length>0)return s;var b=r-c+l-o,x=i+u+o,w=r+c-l+o,_=x;if(s=this.finiteLinesIntersect(e,t,r,i,b,x,w,_,!1),s.length>0)return s;var S=r-c-o,E=i-u+l-o,M=S,P=i+u-l+o;if(s=this.finiteLinesIntersect(e,t,r,i,S,E,M,P,!1),s.length>0)return s;var k,C=r-c+l,D=i-u+l;if(k=this.intersectLineCircle(e,t,r,i,C,D,l+o),k.length>0&&k[0]<=C&&k[1]<=D)return[k[0],k[1]];var N=r+c-l,T=i-u+l;if(k=this.intersectLineCircle(e,t,r,i,N,T,l+o),k.length>0&&k[0]>=N&&k[1]<=T)return[k[0],k[1]];var I=r+c-l,z=i+u-l;if(k=this.intersectLineCircle(e,t,r,i,I,z,l+o),k.length>0&&k[0]>=I&&k[1]>=z)return[k[0],k[1]];var B=r-c+l,R=i+u-l;return k=this.intersectLineCircle(e,t,r,i,B,R,l+o),k.length>0&&k[0]<=B&&k[1]>=R?[k[0],k[1]]:[]},e.math.roundRectangleIntersectBox=function(e,t,r,i,a,n,o,s,l){var c=this.getRoundRectangleRadius(a,n),u=o-a/2-l,p=s-n/2+c-l,d=o+a/2+l,h=s+n/2-c+l,v=o-a/2+c-l,g=s-n/2-l,f=o+a/2-c+l,y=s+n/2+l,m=Math.min(e,r),b=Math.max(e,r),x=Math.min(t,i),w=Math.max(t,i);return u>b?!1:m>d?!1:g>w?!1:x>y?!1:u>=m&&b>=u&&p>=x&&w>=p?!0:d>=m&&b>=d&&p>=x&&w>=p?!0:d>=m&&b>=d&&h>=x&&w>=h?!0:u>=m&&b>=u&&h>=x&&w>=h?!0:m>=u&&d>=m&&x>=p&&h>=x?!0:b>=u&&d>=b&&x>=p&&h>=x?!0:b>=u&&d>=b&&w>=p&&h>=w?!0:m>=u&&d>=m&&w>=p&&h>=w?!0:v>=m&&b>=v&&g>=x&&w>=g?!0:f>=m&&b>=f&&g>=x&&w>=g?!0:f>=m&&b>=f&&y>=x&&w>=y?!0:v>=m&&b>=v&&y>=x&&w>=y?!0:m>=v&&f>=m&&x>=g&&y>=x?!0:b>=v&&f>=b&&x>=g&&y>=x?!0:b>=v&&f>=b&&w>=g&&y>=w?!0:m>=v&&f>=m&&w>=g&&y>=w?!0:this.boxIntersectEllipse(m,x,b,w,l,2*c,2*c,v+l,p+l)?!0:this.boxIntersectEllipse(m,x,b,w,l,2*c,2*c,f-l,p+l)?!0:this.boxIntersectEllipse(m,x,b,w,l,2*c,2*c,f-l,h-l)?!0:this.boxIntersectEllipse(m,x,b,w,l,2*c,2*c,v+l,h-l)?!0:!1},e.math.checkInBoundingCircle=function(e,t,r,i,a,n,o,s){return e=(e-o)/(a+i),t=(t-s)/(n+i),r>=e*e+t*t},e.math.checkInBoundingBox=function(e,t,r,i,a,n,o,s){for(var l=r[0],c=r[1],u=r[0],p=r[1],d=1;d<r.length/2;d++)r[2*d]<l?l=r[2*d]:r[2*d]>u&&(u=r[2*d]),r[2*d+1]<c?c=r[2*d+1]:r[2*d+1]>p&&(p=r[2*d+1]);return e-=o,t-=s,e/=a,t/=n,l>e?!1:e>u?!1:c>t?!1:t>p?!1:!0},e.math.boxInBezierVicinity=function(e,t,r,i,a,n,o,s,l,c,u){var p=.25*a+.5*o+.25*l,d=.25*n+.5*s+.25*c,h=Math.min(e,r)-u,v=Math.min(t,i)-u,g=Math.max(e,r)+u,f=Math.max(t,i)+u;if(a>=h&&g>=a&&n>=v&&f>=n)return 1;if(l>=h&&g>=l&&c>=v&&f>=c)return 1;if(p>=h&&g>=p&&d>=v&&f>=d)return 1;if(o>=h&&g>=o&&s>=v&&f>=s)return 1;var y=Math.min(a,p,l),m=Math.min(n,d,c),b=Math.max(a,p,l),x=Math.max(n,d,c);return y>g||h>b||m>f||v>x?0:1},e.math.checkBezierInBox=function(t,r,i,a,n,o,s,l,c,u){function p(p){var d=e.math.qbezierAt(n,s,c,p),h=e.math.qbezierAt(o,l,u,p);return d>=t&&i>=d&&h>=r&&a>=h}for(var d=0;1>=d;d+=.25)if(!p(d))return!1;return!0},e.math.checkStraightEdgeInBox=function(e,t,r,i,a,n,o,s){return a>=e&&r>=a&&o>=e&&r>=o&&n>=t&&i>=n&&s>=t&&i>=s},e.math.checkStraightEdgeCrossesBox=function(e,t,r,i,a,n,o,s,l){var c,u,p=Math.min(e,r)-l,d=Math.min(t,i)-l,h=Math.max(e,r)+l,v=Math.max(t,i)+l,g=o-a,f=a,y=s-n,m=n;if(Math.abs(g)<1e-4)return a>=p&&h>=a&&Math.min(n,s)<=d&&Math.max(n,s)>=v;var b=(p-f)/g;if(b>0&&1>=b&&(c=y*b+m,c>=d&&v>=c))return!0;var x=(h-f)/g;if(x>0&&1>=x&&(c=y*x+m,c>=d&&v>=c))return!0;var w=(d-m)/y;if(w>0&&1>=w&&(u=g*w+f,u>=p&&h>=u))return!0;var _=(v-m)/y;return _>0&&1>=_&&(u=g*_+f,u>=p&&h>=u)?!0:!1},e.math.checkBezierCrossesBox=function(e,t,r,i,a,n,o,s,l,c,u){var p=Math.min(e,r)-u,d=Math.min(t,i)-u,h=Math.max(e,r)+u,v=Math.max(t,i)+u;if(a>=p&&h>=a&&n>=d&&v>=n)return!0;if(l>=p&&h>=l&&c>=d&&v>=c)return!0;var g=a-2*o+l,f=-2*a+2*o,y=a,m=[];if(Math.abs(g)<1e-4){var b=(p-a)/f,x=(h-a)/f;m.push(b,x)}else{var w,_,S=f*f-4*g*(y-p);if(S>0){var E=Math.sqrt(S);w=(-f+E)/(2*g),_=(-f-E)/(2*g),m.push(w,_)}var M,P,k=f*f-4*g*(y-h);if(k>0){var E=Math.sqrt(k);M=(-f+E)/(2*g),P=(-f-E)/(2*g),m.push(M,P)}}m.sort(function(e,t){return e-t});var C=n-2*s+c,D=-2*n+2*s,N=n,T=[];if(Math.abs(C)<1e-4){var I=(d-n)/D,z=(v-n)/D;T.push(I,z)}else{var B,R,X=D*D-4*C*(N-d);if(X>0){var E=Math.sqrt(X);B=(-D+E)/(2*C),R=(-D-E)/(2*C),T.push(B,R)}var Y,V,L=D*D-4*C*(N-v);if(L>0){var E=Math.sqrt(L);Y=(-D+E)/(2*C),V=(-D-E)/(2*C),T.push(Y,V)}}T.sort(function(e,t){return e-t});for(var A=0;A<m.length;A+=2)for(var O=1;O<T.length;O+=2)if(m[A]<T[O]&&T[O]>=0&&m[A]<=1&&m[A+1]>T[O-1]&&T[O-1]<=1&&m[A+1]>=0)return!0;return!1},e.math.inLineVicinity=function(e,t,r,i,a,n,o){var s=o,l=Math.min(r,a),c=Math.max(r,a),u=Math.min(i,n),p=Math.max(i,n);return e>=l-s&&c+s>=e&&t>=u-s&&p+s>=t},e.math.inBezierVicinity=function(e,t,r,i,a,n,o,s,l){var c={x1:Math.min(r,o,a),x2:Math.max(r,o,a),y1:Math.min(i,s,n),y2:Math.max(i,s,n)};return e<c.x1||e>c.x2||t<c.y1||t>c.y2?!1:!0;var c},e.math.solveCubic=function(e,t,r,i,a){t/=e,r/=e,i/=e;var n,o,s,l,c,u,p,d;return o=(3*r-t*t)/9,s=-(27*i)+t*(9*r-2*t*t),s/=54,n=o*o*o+s*s,a[1]=0,p=t/3,n>0?(c=s+Math.sqrt(n),c=0>c?-Math.pow(-c,1/3):Math.pow(c,1/3),u=s-Math.sqrt(n),u=0>u?-Math.pow(-u,1/3):Math.pow(u,1/3),a[0]=-p+c+u,p+=(c+u)/2,a[4]=a[2]=-p,p=Math.sqrt(3)*(-u+c)/2,a[3]=p,void(a[5]=-p)):(a[5]=a[3]=0,0==n?(d=0>s?-Math.pow(-s,1/3):Math.pow(s,1/3),a[0]=-p+2*d,void(a[4]=a[2]=-(d+p))):(o=-o,l=o*o*o,l=Math.acos(s/Math.sqrt(l)),d=2*Math.sqrt(o),a[0]=-p+d*Math.cos(l/3),a[2]=-p+d*Math.cos((l+2*Math.PI)/3),void(a[4]=-p+d*Math.cos((l+4*Math.PI)/3))))},e.math.sqDistanceToQuadraticBezier=function(e,t,r,i,a,n,o,s){var l=1*r*r-4*r*a+2*r*o+4*a*a-4*a*o+o*o+i*i-4*i*n+2*i*s+4*n*n-4*n*s+s*s,c=9*r*a-3*r*r-3*r*o-6*a*a+3*a*o+9*i*n-3*i*i-3*i*s-6*n*n+3*n*s,u=3*r*r-6*r*a+r*o-r*e+2*a*a+2*a*e-o*e+3*i*i-6*i*n+i*s-i*t+2*n*n+2*n*t-s*t,p=1*r*a-r*r+r*e-a*e+i*n-i*i+i*t-n*t,d=[];this.solveCubic(l,c,u,p,d);for(var h=1e-7,v=[],g=0;6>g;g+=2)Math.abs(d[g+1])<h&&d[g]>=0&&d[g]<=1&&v.push(d[g]);v.push(1),v.push(0);for(var f,y,m,b,x=-1,w=0;w<v.length;w++)y=Math.pow(1-v[w],2)*r+2*(1-v[w])*v[w]*a+v[w]*v[w]*o,m=Math.pow(1-v[w],2)*i+2*(1-v[w])*v[w]*n+v[w]*v[w]*s,b=Math.pow(y-e,2)+Math.pow(m-t,2),x>=0?x>b&&(x=b,f=v[w]):(x=b,f=v[w]);return x},e.math.sqDistanceToFiniteLine=function(e,t,r,i,a,n){var o=[e-r,t-i],s=[a-r,n-i],l=s[0]*s[0]+s[1]*s[1],c=o[0]*o[0]+o[1]*o[1],u=o[0]*s[0]+o[1]*s[1],p=u*u/l;return 0>u?c:p>l?(e-a)*(e-a)+(t-n)*(t-n):c-p},e.math.pointInsidePolygon=function(e,t,r,i,a,n,o,s,l){var c=new Array(r.length),u=Math.asin(s[1]/Math.sqrt(s[0]*s[0]+s[1]*s[1]));s[0]<0?u+=Math.PI/2:u=-u-Math.PI/2;for(var p=Math.cos(-u),d=Math.sin(-u),h=0;h<c.length/2;h++)c[2*h]=n/2*(r[2*h]*p-r[2*h+1]*d),c[2*h+1]=o/2*(r[2*h+1]*p+r[2*h]*d),c[2*h]+=i,c[2*h+1]+=a;var v;if(l>0){var g=this.expandPolygon(c,-l);v=this.joinLines(g)}else v=c;for(var f,y,m,b,x,w=0,_=0,h=0;h<v.length/2;h++)if(f=v[2*h],y=v[2*h+1],h+1<v.length/2?(m=v[2*(h+1)],b=v[2*(h+1)+1]):(m=v[2*(h+1-v.length/2)],b=v[2*(h+1-v.length/2)+1]),f==e&&m==e);else{if(!(f>=e&&e>=m||e>=f&&m>=e))continue;x=(e-f)/(m-f)*(b-y)+y,x>t&&w++,t>x&&_++}return w%2==0?!1:!0},e.math.joinLines=function(e){for(var t,r,i,a,n,o,s,l,c=new Array(e.length/2),u=0;u<e.length/4;u++){t=e[4*u],r=e[4*u+1],i=e[4*u+2],a=e[4*u+3],u<e.length/4-1?(n=e[4*(u+1)],o=e[4*(u+1)+1],s=e[4*(u+1)+2],l=e[4*(u+1)+3]):(n=e[0],o=e[1],s=e[2],l=e[3]);var p=this.finiteLinesIntersect(t,r,i,a,n,o,s,l,!0);c[2*u]=p[0],c[2*u+1]=p[1]}return c},e.math.expandPolygon=function(e,t){for(var r,i,a,n,o=new Array(2*e.length),s=0;s<e.length/2;s++){r=e[2*s],i=e[2*s+1],s<e.length/2-1?(a=e[2*(s+1)],n=e[2*(s+1)+1]):(a=e[0],n=e[1]);var l=n-i,c=-(a-r),u=Math.sqrt(l*l+c*c),p=l/u,d=c/u;o[4*s]=r+p*t,o[4*s+1]=i+d*t,o[4*s+2]=a+p*t,o[4*s+3]=n+d*t}return o},e.math.intersectLineEllipse=function(e,t,r,i,a,n){var o=r-e,s=i-t;o/=a,s/=n;var l=Math.sqrt(o*o+s*s),c=l-1;if(0>c)return[];var u=c/l;return[(r-e)*u+e,(i-t)*u+t]},e.math.dotProduct=function(e,t){if(2!=e.length||2!=t.length)throw"dot product: arguments are not vectors";return e[0]*t[0]+e[1]*t[1]},e.math.intersectLineCircle=function(e,t,r,i,a,n,o){var s=[r-e,i-t],l=[a,n],c=[e-a,t-n],u=s[0]*s[0]+s[1]*s[1],p=2*(c[0]*s[0]+c[1]*s[1]),l=c[0]*c[0]+c[1]*c[1]-o*o,d=p*p-4*u*l;if(0>d)return[];var h=(-p+Math.sqrt(d))/(2*u),v=(-p-Math.sqrt(d))/(2*u),g=Math.min(h,v),f=Math.max(h,v),y=[];if(g>=0&&1>=g&&y.push(g),f>=0&&1>=f&&y.push(f),0==y.length)return[];var m=y[0]*s[0]+e,b=y[0]*s[1]+t;if(y.length>1){if(y[0]==y[1])return[m,b];var x=y[1]*s[0]+e,w=y[1]*s[1]+t;return[m,b,x,w]}return[m,b]},e.math.findCircleNearPoint=function(e,t,r,i,a){var n=i-e,o=a-t,s=Math.sqrt(n*n+o*o),l=n/s,c=o/s;return[e+l*r,t+c*r]},e.math.findMaxSqDistanceToOrigin=function(e){for(var t,r=1e-6,i=0;i<e.length/2;i++)t=e[2*i]*e[2*i]+e[2*i+1]*e[2*i+1],t>r&&(r=t);return r},e.math.finiteLinesIntersect=function(e,t,r,i,a,n,o,s,l){var c=(o-a)*(t-n)-(s-n)*(e-a),u=(r-e)*(t-n)-(i-t)*(e-a),p=(s-n)*(r-e)-(o-a)*(i-t);if(0!=p){var d=c/p,h=u/p;return d>=0&&1>=d&&h>=0&&1>=h?[e+d*(r-e),t+d*(i-t)]:l?[e+d*(r-e),t+d*(i-t)]:[]}return 0==c||0==u?[e,r,o].sort()[1]==o?[o,s]:[e,r,a].sort()[1]==a?[a,n]:[a,o,r].sort()[1]==r?[r,i]:[]:[]},e.math.boxIntersectEllipse=function(e,t,r,i,a,n,o,s,l){if(e>r){var c=e;e=r,r=c}if(t>i){var u=t;t=i,i=u}var p=[s-n/2-a,l],d=[s+n/2+a,l],h=[s,l-o/2-a],v=[s,l+o/2+a];return r<p[0]?!1:e>d[0]?!1:t>v[1]?!1:i<h[1]?!1:e<=d[0]&&d[0]<=r&&t<=d[1]&&d[1]<=i?!0:e<=p[0]&&p[0]<=r&&t<=p[1]&&p[1]<=i?!0:e<=h[0]&&h[0]<=r&&t<=h[1]&&h[1]<=i?!0:e<=v[0]&&v[0]<=r&&t<=v[1]&&v[1]<=i?!0:(e=(e-s)/(n/2+a),r=(r-s)/(n/2+a),t=(t-l)/(o/2+a),i=(i-l)/(o/2+a),1>=e*e+t*t?!0:1>=r*r+t*t?!0:1>=r*r+i*i?!0:1>=e*e+i*i?!0:!1)},e.math.boxIntersectPolygon=function(t,r,i,a,n,o,s,l,c,u,p){if(t>i){var d=t;t=i,i=d}if(r>a){var h=r;r=a,a=h}var v=new Array(n.length),g=Math.asin(u[1]/Math.sqrt(u[0]*u[0]+u[1]*u[1]));u[0]<0?g+=Math.PI/2:g=-g-Math.PI/2;for(var f=Math.cos(-g),y=Math.sin(-g),m=0;m<v.length/2;m++)v[2*m]=o/2*(n[2*m]*f-n[2*m+1]*y),v[2*m+1]=s/2*(n[2*m+1]*f+n[2*m]*y),v[2*m]+=l,v[2*m+1]+=c;for(var b=v[0],x=v[0],w=v[1],_=v[1],m=1;m<v.length/2;m++)v[2*m]>x&&(x=v[2*m]),v[2*m]<b&&(b=v[2*m]),v[2*m+1]>_&&(_=v[2*m+1]),v[2*m+1]<w&&(w=v[2*m+1]);if(b-p>i)return!1;if(t>x+p)return!1;if(w-p>a)return!1;if(r>_+p)return!1;var S;if(p>0){var E=e.math.expandPolygon(v,-p);S=e.math.joinLines(E)}else S=v;for(var m=0;m<v.length/2;m++)if(t<=v[2*m]&&v[2*m]<=i&&r<=v[2*m+1]&&v[2*m+1]<=a)return!0;for(var m=0;m<S.length/2;m++){var M,P,k=S[2*m],C=S[2*m+1];if(m<S.length/2-1?(M=S[2*(m+1)],P=S[2*(m+1)+1]):(M=S[0],P=S[1]),e.math.finiteLinesIntersect(k,C,M,P,t,r,i,r,!1).length>0)return!0;if(e.math.finiteLinesIntersect(k,C,M,P,t,a,i,a,!1).length>0)return!0;if(e.math.finiteLinesIntersect(k,C,M,P,t,r,t,a,!1).length>0)return!0;if(e.math.finiteLinesIntersect(k,C,M,P,i,r,i,a,!1).length>0)return!0}return!1},e.math.polygonIntersectLine=function(t,r,i,a,n,o,s,l){for(var c,u=[],p=new Array(i.length),d=0;d<p.length/2;d++)p[2*d]=i[2*d]*o+a,p[2*d+1]=i[2*d+1]*s+n;var h;if(l>0){var v=e.math.expandPolygon(p,-l);h=e.math.joinLines(v)}else h=p;for(var g,f,y,m,d=0;d<h.length/2;d++)g=h[2*d],f=h[2*d+1],d<h.length/2-1?(y=h[2*(d+1)],m=h[2*(d+1)+1]):(y=h[0],m=h[1]),c=this.finiteLinesIntersect(t,r,a,n,g,f,y,m),0!=c.length&&u.push(c[0],c[1]);return u},e.math.shortenIntersection=function(e,t,r){var i=[e[0]-t[0],e[1]-t[1]],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]),n=(a-r)/a;return 0>n&&(n=1e-5),[t[0]+n*i[0],t[1]+n*i[1]]},e.math.generateUnitNgonPointsFitToSquare=function(t,r){var i=e.math.generateUnitNgonPoints(t,r);return i=e.math.fitPolygonToSquare(i)},e.math.fitPolygonToSquare=function(e){for(var t,r,i=e.length/2,a=1/0,n=1/0,o=-1/0,s=-1/0,l=0;i>l;l++)t=e[2*l],r=e[2*l+1],a=Math.min(a,t),o=Math.max(o,t),n=Math.min(n,r),s=Math.max(s,r);for(var c=2/(o-a),u=2/(s-n),l=0;i>l;l++)t=e[2*l]=e[2*l]*c,r=e[2*l+1]=e[2*l+1]*u,a=Math.min(a,t),o=Math.max(o,t),n=Math.min(n,r),s=Math.max(s,r);if(-1>n)for(var l=0;i>l;l++)r=e[2*l+1]=e[2*l+1]+(-1-n);return e},e.math.generateUnitNgonPoints=function(e,t){var r=1/e*2*Math.PI,i=e%2==0?Math.PI/2+r/2:Math.PI/2;i+=t;for(var a,n,o,s=new Array(2*e),l=0;e>l;l++)a=l*r+i,n=s[2*l]=Math.cos(a),o=s[2*l+1]=Math.sin(-a);return s},e.math.getRoundRectangleRadius=function(e,t){return Math.min(e/2,t/2,10)}}(cytoscape),function(e){"use strict";e.instances=[],e.instanceCounter=0,e.lastInstanceTime,e.registerInstance=function(t,r){var i;e.is.core(t)?i=t:e.is.domElement(t)&&(r=t);var a=e.getRegistrationForInstance(t,r);if(a)return a.cy?e.util.error("Tried to register on a pre-existing registration"):(a.cy=t,a.domElement=r),a;var n,o=+new Date;e.lastInstanceTime&&e.lastInstanceTime!==o?++e.instanceCounter:e.instanceCounter=0,e.lastInstanceTime=o,n=e.instanceCounter;var s="cy-"+o+"-"+n,l={id:s,cy:i,domElement:r,readies:[]};return e.instances.push(l),e.instances[s]=l,l},e.removeRegistrationForInstance=function(t,r){var i;if(e.is.core(t)?i=t:e.is.domElement(t)&&(r=t),e.is.core(i)){var a=i._private.instanceId;delete e.instances[a],e.instances.splice(a,1)}else if(e.is.domElement(r))for(var n=0;n<e.instances.length;n++){var o=e.instances[n];o.domElement===r&&(delete e.instances[o.id],e.instances.splice(n,1),n--)}},e.getRegistrationForInstance=function(t,r){var i;if(e.is.core(t)?t.registered()&&(i=t):e.is.domElement(t)&&(r=t),e.is.core(i)){var a=i._private.instanceId;return e.instances[a]}if(e.is.domElement(r))for(var n=e.instances.length-1;n>=0;n--){var o=e.instances[n];if(o.domElement===r)return o}}}(cytoscape),function(e){"use strict";function t(t,r,i){var a={};switch(a[r]=i,t){case"core":case"collection":e.fn[t](a)}return e.util.setMap({map:n,keys:[t,r],value:i})}function r(t,r){return e.util.getMap({map:n,keys:[t,r]})}function i(t,r,i,a,n){return e.util.setMap({map:o,keys:[t,r,i,a],value:n})}function a(t,r,i,a){return e.util.getMap({map:o,keys:[t,r,i,a]})}var n={};e.extensions=n;var o={};e.modules=o,e.extension=function(){return 2==arguments.length?r.apply(this,arguments):3==arguments.length?t.apply(this,arguments):4==arguments.length?a.apply(this,arguments):5==arguments.length?i.apply(this,arguments):void $.error("Invalid extension access syntax")}}(cytoscape),function(e,t){"use strict";e&&(e.fn.cytoscape=function(r){var i=e(this);if("get"===r){var a=t.getRegistrationForInstance(i[0]);return a.cy}if(!t.is.fn(r)){if(t.is.plainObject(r))return i.each(function(){var t=e.extend({},r,{container:e(this)[0]});cytoscape(t)});for(var n=i[0],o=[],s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];return i.each(function(){var e=t.getRegistrationForInstance(n),i=e.cy,a=r;if(i&&t.is.fn(i[a])){var l=i[a].apply(i,s);o.push(l)}}),1===o.length?o=o[0]:0==o.length&&(o=e(this)),o}var c=r,n=i[0],a=t.getRegistrationForInstance(n);a||(a=t.registerInstance(n)),a&&a.cy&&a.cy.ready()?a.cy.trigger("ready",[],c):a.readies.push(c)},e.cytoscape=cytoscape,null==e.fn.cy&&null==e.cy&&(e.fn.cy=e.fn.cytoscape,e.cy=e.cytoscape))}("undefined"!=typeof jQuery?jQuery:null,cytoscape),function(e){"use strict";function t(){return!1}function r(){return!0}e.Event=function(i,a){return this instanceof e.Event?(i&&i.type?(this.originalEvent=i,this.type=i.type,this.isDefaultPrevented=i.defaultPrevented||i.getPreventDefault&&i.getPreventDefault()?r:t):this.type=i,a&&e.util.extend(this,a),void(this.timeStamp=i&&i.timeStamp||+new Date)):new e.Event(i,a)},e.Event.prototype={preventDefault:function(){this.isDefaultPrevented=r;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=r;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=r,this.stopPropagation()},isDefaultPrevented:t,isPropagationStopped:t,isImmediatePropagationStopped:t}}(cytoscape),function(e){"use strict";e.define={data:function(t){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateMappers:!1,onSet:function(){},canSet:function(){return!0}};return t=e.util.extend({},r,t),function(r,i){var a=t,n=this,o=void 0!==n.length,s=o?n:[n],l=o?n[0]:n;if(e.is.string(r)){if(a.allowGetting&&void 0===i){var c;return l&&(c=l._private[a.field][r]),c}if(a.allowSetting&&void 0!==i){var u=!a.immutableKeys[r];if(u){for(var p=0,d=s.length;d>p;p++)a.canSet(s[p])&&(s[p]._private[a.field][r]=i);a.updateMappers&&n.updateMappers(),a.onSet(n),a.settingTriggersEvent&&n[a.triggerFnName](a.settingEvent)}}}else if(a.allowSetting&&e.is.plainObject(r)){var h,v,g=r;for(h in g){v=g[h];var u=!a.immutableKeys[h];if(u)for(var p=0,d=s.length;d>p;p++)a.canSet(s[p])&&(s[p]._private[a.field][h]=v)}a.updateMappers&&n.updateMappers(),a.onSet(n),a.settingTriggersEvent&&n[a.triggerFnName](a.settingEvent)}else if(a.allowBinding&&e.is.fn(r)){var f=r;n.bind(a.bindingEvent,f)}else if(a.allowGetting&&void 0===r){var c;return l&&(c=l._private[a.field]),c}return n}},batchData:function(t){var r={field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{},updateMappers:!1},i=t=e.util.extend({},r,t);return function(t){var r=this,a=void 0!==r.length,n=a?r:r._private.elements;if(0===n.length)return r;for(var o=a?n[0]._private.cy:r,s=0;s<n.length;s++){var l=n[s],c=l._private.data.id,u=t[c];if(void 0!==u&&null!==u){var p,d,h=u;for(p in h){d=h[p];var v=!i.immutableKeys[p];v&&(l._private[i.field][p]=d)}}}var g=new e.Collection(o,n);return i.updateMappers&&g.updateMappers(),g[i.triggerFnName](i.event),r}},removeData:function(t){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return t=e.util.extend({},r,t),function(r){{var i=t,a=this,n=void 0!==a.length,o=n?a:[a];n?a[0]:a}if(e.is.string(r)){for(var s=r.split(/\s+/),l=s.length,c=0;l>c;c++){var u=s[c];if(!e.is.emptyString(u)){var p=!i.immutableKeys[u];if(p)for(var d=0,h=o.length;h>d;d++)delete o[d]._private[i.field][u]}}i.triggerEvent&&a[i.triggerFnName](i.event)}else if(void 0===r){for(var d=0,h=o.length;h>d;d++){var v=o[d]._private[i.field];for(var u in v){var g=!i.immutableKeys[u];g&&delete v[u]}}i.triggerEvent&&a[i.triggerFnName](i.event)}return a}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,falseCallback:function(){return!1}},on:function(t){var r={unbindSelfOnTrigger:!1,unbindAllBindersOnTrigger:!1};return t=e.util.extend({},r,t),function(r,i,a,n){var o=this,s=void 0!==o.length,l=s?o:[o],c=(s?o[0]:o,e.is.string(r)),u=t;if(e.is.plainObject(i)?(n=a,a=i,i=void 0):(e.is.fn(i)||i===!1)&&(n=i,a=void 0,i=void 0),(e.is.fn(a)||a===!1)&&(n=a,a=void 0),!e.is.fn(n)&&n!==!1&&c)return o;if(c){var p={};p[r]=n,r=p}for(var d in r)if(n=r[d],n===!1&&(n=e.define.event.falseCallback),e.is.fn(n)){d=d.split(/\s+/);for(var h=0;h<d.length;h++){var v=d[h];if(!e.is.emptyString(v)){var g=v.match(e.define.event.regex);if(g)for(var f=g[1],y=g[2]?g[2]:void 0,m={callback:n,data:a,delegated:i?!0:!1,selector:i,type:f,namespace:y,unbindSelfOnTrigger:u.unbindSelfOnTrigger,unbindAllBindersOnTrigger:u.unbindAllBindersOnTrigger,binders:l},b=0;b<l.length;b++)l[b]._private.listeners.push(m)}}}return o}},off:function(t){var r={};return t=e.util.extend({},r,t),function(t,r,i){var a=this,n=void 0!==a.length,o=n?a:[a],s=(n?a[0]:a,e.is.string(t));if(0===arguments.length){for(var l=0;l<o.length;l++)o[l]._private.listeners=[];return a}if((e.is.fn(r)||r===!1)&&(i=r,r=void 0),s){var c={};c[t]=i,t=c}for(var u in t){i=t[u],i===!1&&(i=e.define.event.falseCallback),u=u.split(/\s+/);for(var p=0;p<u.length;p++){var d=u[p];if(!e.is.emptyString(d)){var h=d.match(e.define.event.optionalTypeRegex);if(h)for(var v=h[1]?h[1]:void 0,g=h[2]?h[2]:void 0,l=0;l<o.length;l++)for(var f=o[l]._private.listeners,y=0;y<f.length;y++){var m=f[y],b=!g||g===m.namespace,x=!v||m.type===v,w=!i||i===m.callback,_=b&&x&&w;_&&(f.splice(y,1),y--)}}}}return a}},trigger:function(t){var r={};return t=e.util.extend({},r,t),function(t,r,i){var a=this,n=void 0!==a.length,o=n?a:[a],s=(n?a[0]:a,e.is.string(t)),l=e.is.plainObject(t),c=e.is.event(t),u=this._private.cy||this;if(s){var p=t.split(/\s+/);t=[];for(var d=0;d<p.length;d++){var h=p[d];if(!e.is.emptyString(h)){var v=h.match(e.define.event.regex),g=v[1],f=v[2]?v[2]:void 0;t.push({type:g,namespace:f})}}}else if(l){var y=t;t=[y]}r?e.is.array(r)||(r=[r]):r=[];for(var d=0;d<t.length;d++)for(var m=t[d],b=0;b<o.length;b++){var h,x=o[b],w=x._private.listeners,_=e.is.element(x),S=_;if(c?(h=m,h.cyTarget=h.cyTarget||x,h.cy=h.cy||u,h.namespace=h.namespace||m.namespace):h=new e.Event(m,{cyTarget:x,cy:u,namespace:m.namespace}),h.cyPosition){var E=h.cyPosition,M=u.zoom(),P=u.pan();h.cyRenderedPosition={x:E.x*M+P.x,y:E.y*M+P.y}}i&&(w=[{namespace:h.namespace,type:h.type,callback:i}]);for(var k=0;k<w.length;k++){var C=w[k],D=!C.namespace||C.namespace===h.namespace,N=C.type===h.type,T=C.delegated?x!==h.cyTarget&&e.is.element(h.cyTarget)&&h.cyTarget.is(C.selector):!0,I=D&&N&&T;if(I){var z=[h];if(z=z.concat(r),h.data=C.data?C.data:void 0,(C.unbindSelfOnTrigger||C.unbindAllBindersOnTrigger)&&(w.splice(k,1),k--),C.unbindAllBindersOnTrigger)for(var B=C.binders,R=0;R<B.length;R++){var X=B[R];
if(X&&X!==x)for(var Y=X._private.listeners,V=0;V<Y.length;V++){var L=Y[V];L===C&&(Y.splice(V,1),V--)}}var A=C.delegated?h.cyTarget:x,O=C.callback.apply(A,z);(O===!1||h.isPropagationStopped())&&(S=!1,O===!1&&(h.stopPropagation(),h.preventDefault()))}}if(S){var q=x.parent(),F=0!==q.length;F?(q=q[0],q.trigger(h)):u.trigger(h)}}return a}}}}(cytoscape),function($$){"use strict";$$.fn.selector=function(e){for(var t in e){var r=e[t];$$.Selector.prototype[t]=r}},$$.Selector=function(e,t){if(!(this instanceof $$.Selector))return new $$.Selector(e,t);void 0===t&&void 0!==e&&(t=e,e=void 0);var r=this;if(r._private={selectorText:null,invalid:!0},!t||$$.is.string(t)&&t.match(/^\s*$/))null==e?r.length=0:(r[0]=n(),r[0].group=e,r.length=1);else if($$.is.element(t)){var i=new $$.Collection(r.cy(),[t]);r[0]=n(),r[0].collection=i,r.length=1}else if($$.is.collection(t))r[0]=n(),r[0].collection=t,r.length=1;else if($$.is.fn(t))r[0]=n(),r[0].filter=t,r.length=1;else{if(!$$.is.string(t))return void $$.util.error("A selector must be created from a string; found "+t);var a=null,n=function(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}},o={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",variable:'(?:[\\w-]|(?:\\\\"+ metaChar +"))+',comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])+"|'+"'(?:\\\\'|[^'])+'",number:$$.util.regex.number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$"};o.value=o.string+"|"+o.number,o.className=o.variable,o.id=o.variable;for(var s=function(e){return e.replace(new RegExp("\\\\("+o.metaChar+")","g"),function(e,t){return t})},l=o.comparatorOp.split("|"),c=0;c<l.length;c++){var u=l[c];o.comparatorOp+="|@"+u}var p={group:{query:!0,regex:"(node|edge|\\*)",populate:function(e){this.group="*"==e?e:e+"s"}},state:{query:!0,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:transparent|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:parent|:child|:loop|:simple|:active|:inactive|:touch)",populate:function(e){this.colonSelectors.push(e)}},id:{query:!0,regex:"\\#("+o.id+")",populate:function(e){this.ids.push(s(e))}},className:{query:!0,regex:"\\.("+o.className+")",populate:function(e){this.classes.push(s(e))}},dataExists:{query:!0,regex:"\\[\\s*("+o.variable+")\\s*\\]",populate:function(e){this.data.push({field:s(e)})}},dataCompare:{query:!0,regex:"\\[\\s*("+o.variable+")\\s*("+o.comparatorOp+")\\s*("+o.value+")\\s*\\]",populate:function(e,t,r){this.data.push({field:s(e),operator:t,value:r})}},dataBool:{query:!0,regex:"\\[\\s*("+o.boolOp+")\\s*("+o.variable+")\\s*\\]",populate:function(e,t){this.data.push({field:s(t),operator:e})}},metaCompare:{query:!0,regex:"\\[\\[\\s*("+o.meta+")\\s*("+o.comparatorOp+")\\s*("+o.number+")\\s*\\]\\]",populate:function(e,t,r){this.meta.push({field:s(e),operator:t,value:r})}},nextQuery:{separator:!0,regex:o.separator,populate:function(){r[++c]=n(),a=null}},child:{separator:!0,regex:o.child,populate:function(){var e=n();e.parent=this,e.subject=a,r[c]=e}},descendant:{separator:!0,regex:o.descendant,populate:function(){var e=n();e.ancestor=this,e.subject=a,r[c]=e}},subject:{modifier:!0,regex:o.subject,populate:function(){return null!=a&&this.subject!=this?($$.util.error("Redefinition of subject in selector `"+t+"`"),!1):(a=this,void(this.subject=this))}}},d=0;for(var h in p)p[d]=p[h],p[d].name=h,d++;p.length=d,r._private.selectorText=t;var v=t,c=0,g=function(e){for(var t,r,i,a=0;a<p.length;a++){var n=p[a],o=n.name;if(!$$.is.fn(e)||e(o,n)){var s=v.match(new RegExp("^"+n.regex));if(null!=s){r=s,t=n,i=o;var l=s[0];v=v.substring(l.length);break}}}return{expr:t,match:r,name:i}},f=function(){var e=v.match(/^\s+/);if(e){var t=e[0];v=v.substring(t.length)}};for(r[0]=n(),f();;){var y=g();if(null==y.expr)return void $$.util.error("The selector `"+t+"`is invalid");for(var m=[],d=1;d<y.match.length;d++)m.push(y.match[d]);var b=y.expr.populate.apply(r[c],m);if(b===!1)return;if(v.match(/^\s*$/))break}for(r.length=c+1,d=0;d<r.length;d++){var x=r[d];if(null!=x.subject){for(;x.subject!=x;)if(null!=x.parent){var w=x.parent,_=x;_.parent=null,w.child=_,x=w}else{if(null==x.ancestor){$$.util.error("When adjusting references for the selector `"+x+"`, neither parent nor ancestor was found");break}var S=x.ancestor,E=x;E.ancestor=null,S.descendant=E,x=S}r[d]=x.subject}}if(null!=e)for(var d=0;d<r.length;d++){if(null!=r[d].group&&r[d].group!=e)return void $$.util.error("Group `"+r[d].group+"` conflicts with implicit group `"+e+"` in selector `"+t+"`");r[d].group=e}}r._private.invalid=!1},$$.selfn=$$.Selector.prototype,$$.selfn.size=function(){return this.length},$$.selfn.eq=function(e){return this[e]},$$.selfn.find=function(){},$$.selfn.filter=function(collection,addLiveFunction){var self=this,cy=collection.cy();if(self._private.invalid)return new $$.Collection(cy);var queryMatches=function(query,element){if(null!=query.group&&"*"!=query.group&&query.group!=element._private.group)return!1;for(var allColonSelectorsMatch=!0,k=0;k<query.colonSelectors.length;k++){var sel=query.colonSelectors[k];switch(sel){case":selected":allColonSelectorsMatch=element.selected();break;case":unselected":allColonSelectorsMatch=!element.selected();break;case":selectable":allColonSelectorsMatch=element.selectable();break;case":unselectable":allColonSelectorsMatch=!element.selectable();break;case":locked":allColonSelectorsMatch=element.locked();break;case":unlocked":allColonSelectorsMatch=!element.locked();break;case":visible":allColonSelectorsMatch=element.visible();break;case":hidden":allColonSelectorsMatch=!element.visible();break;case":transparent":allColonSelectorsMatch=!element.transparent();break;case":grabbed":allColonSelectorsMatch=element.grabbed();break;case":free":allColonSelectorsMatch=!element.grabbed();break;case":removed":allColonSelectorsMatch=element.removed();break;case":inside":allColonSelectorsMatch=!element.removed();break;case":grabbable":allColonSelectorsMatch=element.grabbable();break;case":ungrabbable":allColonSelectorsMatch=!element.grabbable();break;case":animated":allColonSelectorsMatch=element.animated();break;case":unanimated":allColonSelectorsMatch=!element.animated();break;case":parent":allColonSelectorsMatch=element.children().nonempty();break;case":child":allColonSelectorsMatch=element.parent().nonempty();break;case":loop":allColonSelectorsMatch=element.isEdge()&&element.data("source")===element.data("target");break;case":simple":allColonSelectorsMatch=element.isEdge()&&element.data("source")!==element.data("target");break;case":active":allColonSelectorsMatch=element.active();break;case":inactive":allColonSelectorsMatch=!element.active();break;case":touch":allColonSelectorsMatch=window&&document&&("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}if(!allColonSelectorsMatch)break}if(!allColonSelectorsMatch)return!1;for(var allIdsMatch=!0,k=0;k<query.ids.length;k++){var id=query.ids[k],actualId=element._private.data.id;if(allIdsMatch=allIdsMatch&&id==actualId,!allIdsMatch)break}if(!allIdsMatch)return!1;for(var allClassesMatch=!0,k=0;k<query.classes.length;k++){var cls=query.classes[k];if(allClassesMatch=allClassesMatch&&element.hasClass(cls),!allClassesMatch)break}if(!allClassesMatch)return!1;var operandsMatch=function(params){for(var allDataMatches=!0,k=0;k<query[params.name].length;k++){var data=query[params.name][k],operator=data.operator,value=data.value,field=data.field,matches;if(null!=operator&&null!=value){var fieldStr=""+params.fieldValue(field),valStr=""+eval(value),caseInsensitive=!1;switch("@"==operator.charAt(0)&&(fieldStr=fieldStr.toLowerCase(),valStr=valStr.toLowerCase(),operator=operator.substring(1),caseInsensitive=!0),"="==operator&&(operator="=="),operator){case"*=":matches=fieldStr.search(valStr)>=0;break;case"$=":matches=null!=new RegExp(valStr+"$").exec(fieldStr);break;case"^=":matches=null!=new RegExp("^"+valStr).exec(fieldStr);break;default:if(caseInsensitive){var expr="fieldStr "+operator+" valStr";matches=eval(expr)}else{var expr=params.fieldRef(field)+" "+operator+" "+value;matches=eval(expr)}}}else if(null!=operator)switch(operator){case"?":matches=params.fieldTruthy(field);break;case"!":matches=!params.fieldTruthy(field);break;case"^":matches=params.fieldUndefined(field)}else matches=!params.fieldUndefined(field);if(!matches){allDataMatches=!1;break}}return allDataMatches},allDataMatches=operandsMatch({name:"data",fieldValue:function(e){return element._private.data[e]},fieldRef:function(e){return"element._private.data."+e},fieldUndefined:function(e){return void 0===element._private.data[e]},fieldTruthy:function(e){return element._private.data[e]?!0:!1}});if(!allDataMatches)return!1;var allMetaMatches=operandsMatch({name:"meta",fieldValue:function(e){return element[e]()},fieldRef:function(e){return"element."+e+"()"},fieldUndefined:function(e){return void 0==element[e]()},fieldTruthy:function(e){return element[e]()?!0:!1}});if(!allMetaMatches)return!1;if(null!=query.collection){var matchesAny=null!=query.collection._private.ids[element.id()];if(!matchesAny)return!1}if(null!=query.filter&&0==element.collection().filter(query.filter).size())return!1;var confirmRelations=function(e,t){if(null!=e){var r=!1;t=t();for(var i=0;i<t.size();i++)if(queryMatches(e,t.eq(i))){r=!0;break}return r}return!0};return confirmRelations(query.parent,function(){return element.parent()})?confirmRelations(query.ancestor,function(){return element.parents()})?confirmRelations(query.child,function(){return element.children()})?confirmRelations(query.descendant,function(){return element.descendants()})?!0:!1:!1:!1:!1},selectorFunction=function(e,t){for(var r=0;r<self.length;r++){var i=self[r];if(queryMatches(i,t))return!0}return!1};null==self._private.selectorText&&(selectorFunction=function(){return!0});var filteredCollection=collection.filter(selectorFunction);return filteredCollection},$$.selfn.toString=$$.selfn.selector=function(){for(var e="",t=function(e){return $$.is.string(e)?e:""},r=function(e){var a="",n=t(e.group);a+=n.substring(0,n.length-1);for(var o=0;o<e.data.length;o++){var s=e.data[o];a+=s.value?"["+s.field+t(s.operator)+t(s.value)+"]":"["+t(s.operator)+s.field+"]"}for(var o=0;o<e.meta.length;o++){var l=e.meta[o];a+="[["+l.field+t(l.operator)+t(l.value)+"]]"}for(var o=0;o<e.colonSelectors.length;o++){var c=e.colonSelectors[i];a+=c}for(var o=0;o<e.ids.length;o++){var c="#"+e.ids[i];a+=c}for(var o=0;o<e.classes.length;o++){var c="."+e.classes[i];a+=c}return null!=e.parent&&(a=r(e.parent)+" > "+a),null!=e.ancestor&&(a=r(e.ancestor)+" "+a),null!=e.child&&(a+=" > "+r(e.child)),null!=e.descendant&&(a+=" "+r(e.descendant)),a},i=0;i<this.length;i++){var a=this[i];e+=r(a),this.length>1&&i<this.length-1&&(e+=", ")}return e}}(cytoscape),function(e){"use strict";e.Style=function(t){return this instanceof e.Style?e.is.core(t)?(this._private={cy:t,coreStyle:{}},this.length=0,void this.addDefaultStylesheet()):void e.util.error("A style must have a core reference"):new e.Style(t)},e.style=e.Style,e.styfn=e.Style.prototype,e.fn.style=function(t){for(var r in t){var i=t[r];e.Style.prototype=i}},function(){var t=e.util.regex.number,r=e.util.regex.rgbaNoBackRefs,i=e.util.regex.hslaNoBackRefs,a=e.util.regex.hex3,n=e.util.regex.hex6,o=function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(e){return"^"+e+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+t+"|\\w+|"+r+"|"+i+"|"+a+"|"+n+")\\s*\\,\\s*("+t+"|\\w+|"+r+"|"+i+"|"+a+"|"+n+")\\)$"};e.style.types={time:{number:!0,min:0,units:"s"},percent:{number:!0,min:0,max:100,units:"%"},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},size:{number:!0,min:0,enums:["auto"]},bgSize:{number:!0,min:0,allowPercent:!0},color:{color:!0},lineStyle:{enums:["solid","dotted","dashed"]},curveStyle:{enums:["bezier","haystack"]},fontFamily:{regex:"^([\\w- ]+(?:\\s*,\\s*[\\w- ]+)*)$"},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","capitalize","uppercase","lowercase"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon","star"]},arrowShape:{enums:["tee","triangle","square","circle","diamond","none"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},positionx:{enums:["left","center","right"],number:!0,allowPercent:!0},positiony:{enums:["top","center","bottom"],number:!0,allowPercent:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},cursor:{enums:["auto","crosshair","default","e-resize","n-resize","ne-resize","nw-resize","pointer","progress","s-resize","sw-resize","text","w-resize","wait","grab","grabbing"]},text:{string:!0},data:{mapping:!0,regex:o("data")},layoutData:{mapping:!0,regex:o("layoutData")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},url:{regex:"^url\\s*\\(\\s*([^\\s]+)\\s*\\s*\\)|none|(.+)$"},propList:{propList:!0}};var l=e.style.types;e.style.properties=[{name:"text-valign",type:l.valign},{name:"text-halign",type:l.halign},{name:"color",type:l.color},{name:"content",type:l.text},{name:"text-outline-color",type:l.color},{name:"text-outline-width",type:l.size},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-opacity",type:l.zeroOneNumber},{name:"text-decoration",type:l.textDecoration},{name:"text-transform",type:l.textTransform},{name:"font-family",type:l.fontFamily},{name:"font-style",type:l.fontStyle},{name:"font-variant",type:l.fontVariant},{name:"font-weight",type:l.fontWeight},{name:"font-size",type:l.size},{name:"min-zoomed-font-size",type:l.size},{name:"display",type:l.display},{name:"visibility",type:l.visibility},{name:"opacity",type:l.zeroOneNumber},{name:"z-index",type:l.nonNegativeInt},{name:"overlay-padding",type:l.size},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber},{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"background-color",type:l.color},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-image",type:l.url},{name:"background-position-x",type:l.positionx},{name:"background-position-y",type:l.positiony},{name:"background-repeat",type:l.bgRepeat},{name:"background-size-x",type:l.bgSize},{name:"background-size-y",type:l.bgSize},{name:"pie-1-background-color",type:l.color},{name:"pie-2-background-color",type:l.color},{name:"pie-3-background-color",type:l.color},{name:"pie-4-background-color",type:l.color},{name:"pie-5-background-color",type:l.color},{name:"pie-6-background-color",type:l.color},{name:"pie-7-background-color",type:l.color},{name:"pie-8-background-color",type:l.color},{name:"pie-9-background-color",type:l.color},{name:"pie-10-background-color",type:l.color},{name:"pie-11-background-color",type:l.color},{name:"pie-12-background-color",type:l.color},{name:"pie-13-background-color",type:l.color},{name:"pie-14-background-color",type:l.color},{name:"pie-15-background-color",type:l.color},{name:"pie-16-background-color",type:l.color},{name:"pie-1-background-size",type:l.percent},{name:"pie-2-background-size",type:l.percent},{name:"pie-3-background-size",type:l.percent},{name:"pie-4-background-size",type:l.percent},{name:"pie-5-background-size",type:l.percent},{name:"pie-6-background-size",type:l.percent},{name:"pie-7-background-size",type:l.percent},{name:"pie-8-background-size",type:l.percent},{name:"pie-9-background-size",type:l.percent},{name:"pie-10-background-size",type:l.percent},{name:"pie-11-background-size",type:l.percent},{name:"pie-12-background-size",type:l.percent},{name:"pie-13-background-size",type:l.percent},{name:"pie-14-background-size",type:l.percent},{name:"pie-15-background-size",type:l.percent},{name:"pie-16-background-size",type:l.percent},{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size},{name:"border-style",type:l.lineStyle},{name:"height",type:l.size},{name:"width",type:l.size},{name:"padding-left",type:l.size},{name:"padding-right",type:l.size},{name:"padding-top",type:l.size},{name:"padding-bottom",type:l.size},{name:"shape",type:l.nodeShape},{name:"source-arrow-shape",type:l.arrowShape},{name:"target-arrow-shape",type:l.arrowShape},{name:"source-arrow-color",type:l.color},{name:"target-arrow-color",type:l.color},{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"control-point-step-size",type:l.size},{name:"control-point-distance",type:l.size},{name:"control-point-weight",type:l.zeroOneNumber},{name:"curve-style",type:l.curveStyle},{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"panning-cursor",type:l.cursor},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size}];for(var c=e.style.properties,u=0;u<c.length;u++){var p=c[u];c[p.name]=p}e.style.pieBackgroundN=16}(),e.styfn.addDefaultStylesheet=function(){var t="Helvetica",r="normal",i="normal",a="normal",n="#000",o="none",s=16;this.selector("node, edge").css({"text-valign":"top","text-halign":"center",color:n,"text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":o,"font-family":t,"font-style":r,"font-variant":i,"font-weight":a,"font-size":s,"min-zoomed-font-size":0,visibility:"visible",display:"element",opacity:1,"z-index":0,content:"","overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"transition-property":"none","transition-duration":0,"transition-delay":0,"background-color":"#888","background-opacity":1,"background-image":"none","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,"padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,shape:"ellipse","pie-1-background-color":"black","pie-1-background-size":"0%","pie-2-background-color":"black","pie-2-background-size":"0%","pie-3-background-color":"black","pie-3-background-size":"0%","pie-4-background-color":"black","pie-4-background-size":"0%","pie-5-background-color":"black","pie-5-background-size":"0%","pie-6-background-color":"black","pie-6-background-size":"0%","pie-7-background-color":"black","pie-7-background-size":"0%","pie-8-background-color":"black","pie-8-background-size":"0%","pie-9-background-color":"black","pie-9-background-size":"0%","pie-10-background-color":"black","pie-10-background-size":"0%","pie-11-background-color":"black","pie-11-background-size":"0%","pie-12-background-color":"black","pie-12-background-size":"0%","pie-13-background-color":"black","pie-13-background-size":"0%","pie-14-background-color":"black","pie-14-background-size":"0%","pie-15-background-color":"black","pie-15-background-size":"0%","pie-16-background-color":"black","pie-16-background-size":"0%","source-arrow-shape":"none","target-arrow-shape":"none","source-arrow-color":"#bbb","target-arrow-color":"#bbb","line-style":"solid","line-color":"#bbb","control-point-step-size":40,"control-point-weight":.5,"curve-style":"bezier"}).selector("$node > node").css({width:"auto",height:"auto",shape:"rectangle","background-opacity":.5,"padding-top":10,"padding-right":10,"padding-left":10,"padding-bottom":10}).selector("edge").css({width:1}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"panning-cursor":"grabbing","active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":e.is.touch()?40:15})},e.styfn.clear=function(){this._private.newStyle=!0;for(var e=0;e<this.length;e++)delete this[e];return this.length=0,this},e.styfn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},e.styfn.core=function(){return this._private.coreStyle},e.styfn.parse=function(t,r,i){t=e.util.camel2dash(t);var a=e.style.properties[t],n=r;if(!a)return null;if(void 0===r||null===r)return null;var o=e.is.string(r);o&&(r=e.util.trim(r));var s=a.type;if(!s)return null;if(i&&(""===r||null===r))return{name:t,value:r,bypass:!0,deleteBypass:!0};var l,c,u,p;if(o){if((l=new RegExp(e.style.types.data.regex).exec(r))||(u=new RegExp(e.style.types.layoutData.regex).exec(r))){var d=void 0!==u;return l=l||u,{name:t,value:l,strValue:""+r,mapped:d?e.style.types.layoutData:e.style.types.data,field:l[1],bypass:i}}if((c=new RegExp(e.style.types.mapData.regex).exec(r))||(p=new RegExp(e.style.types.mapLayoutData.regex).exec(r))){var d=void 0!==p;if(c=c||p,!s.color&&!s.number)return!1;var h=this.parse(t,c[4]);if(!h||h.mapped)return!1;var v=this.parse(t,c[5]);if(!v||v.mapped)return!1;if(h.value===v.value)return!1;if(s.color){var g=h.value,f=v.value,y=!(g[0]!==f[0]||g[1]!==f[1]||g[2]!==f[2]||g[3]!==f[3]&&(null!=g[3]&&1!==g[3]||null!=f[3]&&1!==f[3]));if(y)return!1}return{name:t,value:c,strValue:""+r,mapped:d?e.style.types.mapLayoutData:e.style.types.mapData,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:h.value,valueMax:v.value,bypass:i}}}else;if(s.number){var m,b="px";if(s.units&&(m=s.units),!s.unitless)if(o){var x="px|em"+(s.allowPercent?"|\\%":"");m&&(x=m);var w=r.match("^("+e.util.regex.number+")("+x+")?$");w&&(r=w[1],m=w[2]||b)}else m||(m=b);if(r=parseFloat(r),isNaN(r)&&void 0===s.enums)return null;if(isNaN(r)&&void 0!==s.enums){r=n;for(var _=0;_<s.enums.length;_++){var S=s.enums[_];if(S===r)return{name:t,value:r,strValue:""+r,bypass:i}}return null}if(s.integer&&!e.is.integer(r))return null;if(void 0!==s.min&&r<s.min||void 0!==s.max&&r>s.max)return null;var E={name:t,value:r,strValue:""+r+(m?m:""),units:m,bypass:i};return s.unitless||"px"!==m&&"em"!==m||(E.pxValue="px"!==m&&m?this.getEmSizeInPixels()*r:r),E}if(s.propList){var M=[],P=""+r;if("none"===P);else{for(var k=P.split(","),_=0;_<k.length;_++){var C=e.util.trim(k[_]);e.style.properties[C]&&M.push(C)}if(0===M.length)return null}return{name:t,value:M,strValue:0===M.length?"none":M.join(", "),bypass:i}}if(s.color){var D=e.util.color2tuple(r);return D?{name:t,value:D,strValue:""+r,bypass:i}:null}if(s.enums){for(var _=0;_<s.enums.length;_++){var S=s.enums[_];if(S===r)return{name:t,value:r,strValue:""+r,bypass:i}}return null}if(s.regex){var N=new RegExp(s.regex),T=N.exec(r);return T?{name:t,value:T,strValue:""+r,bypass:i}:null}return s.string?{name:t,value:r,strValue:""+r,bypass:i}:null},e.styfn.selector=function(t){var r="core"===t?null:new e.Selector(t),i=this.length++;return this[i]={selector:r,properties:[]},this},e.styfn.css=function(){var t=arguments;switch(t.length){case 1:for(var r=t[0],i=0;i<e.style.properties.length;i++){var a=e.style.properties[i],n=r[a.name];void 0===n&&(n=r[e.util.dash2camel(a.name)]),void 0!==n&&this.cssRule(a.name,n)}break;case 2:this.cssRule(t[0],t[1])}return this},e.styfn.cssRule=function(e,t){var r=this.parse(e,t);if(r){var i=this.length-1;this[i].properties.push(r);var a=!this[i].selector;a&&(this._private.coreStyle[r.name]=r)}return this}}(cytoscape),function(e){"use strict";e.styfn.apply=function(e){for(var t=this,r=0;r<e.length;r++){var i=e[r],a=[],n=[];t._private.newStyle&&(i._private.styleCxts=[],i._private.style={});for(var o=0;o<this.length;o++){var s=this[o],l=s.selector&&s.selector.filter(i).length>0,c=s.properties,u=!i._private.styleCxts[o];if(l){for(var p=0;p<c.length;p++){var d=c[p],h=i._private.style[d.name],v=h&&h.context===s,g=d.mapped&&v;(u||g)&&this.applyParsedProperty(i,d,s)}i._private.styleCxts[o]=s,t._private.newStyle===!1&&u&&a.push(s)}else i._private.styleCxts[o]&&(this.rollBackContext(i,s),n.push(s)),delete i._private.styleCxts[o]}(a.length>0||n.length>0)&&this.updateTransitions(i,a,n)}t._private.newStyle=!1},e.styfn.rollBackContext=function(e,t){for(var r=0;r<t.properties.length;r++){var i=t.properties[r],a=e._private.style[i.name];a.bypassed&&(a=a.bypassed);for(var n,o=!0,s=0;a.prev;){var l=a.prev;a.context===t&&(o?e._private.style[i.name]=l:n&&(n.prev=l)),n=a,a=l,o=!1,s++}}},e.styfn.applyParsedProperty=function(t,r,i){r=e.util.clone(r);var a,n,o=r,s=t._private.style,l=e.style.properties[o.name].type,c=o.bypass,u=s[o.name],p=u&&u.bypass;if(("height"===r.name||"width"===r.name)&&"auto"===r.value&&t.isNode()&&!t.isParent())return!1;if(c&&o.deleteBypass){var d=s[o.name];return d?d.bypass&&d.bypassed?(s[o.name]=d.bypassed,!0):!1:!0}switch(o.mapped){case e.style.types.mapData:case e.style.types.mapLayoutData:for(var h=o.mapped===e.style.types.mapLayoutData,v=o.field.split("."),a=h?t._private.layoutData:t._private.data,g=0;g<v.length&&a;g++){var f=v[g];a=a[f]}var y;if(y=e.is.number(a)?(a-o.fieldMin)/(o.fieldMax-o.fieldMin):0,l.color){var m=o.valueMin[0],b=o.valueMax[0],x=o.valueMin[1],w=o.valueMax[1],_=o.valueMin[2],S=o.valueMax[2],E=null==o.valueMin[3]?1:o.valueMin[3],M=null==o.valueMax[3]?1:o.valueMax[3],P=[Math.round(m+(b-m)*y),Math.round(x+(w-x)*y),Math.round(_+(S-_)*y),Math.round(E+(M-E)*y)];n={bypass:o.bypass,name:o.name,value:P,strValue:["rgba(",P[0],", ",P[1],", ",P[2],", ",P[3],")"].join("")}}else{if(!l.number)return!1;var k=o.valueMin+(o.valueMax-o.valueMin)*y;n=this.parse(o.name,k,o.bypass)}n||(n=this.parse(o.name,u.strValue,o.bypass)),n.mapping=o,o=n;break;case e.style.types.data:case e.style.types.layoutData:for(var h=o.mapped===e.style.types.layoutData,v=o.field.split("."),a=h?t._private.layoutData:t._private.data,g=0;g<v.length&&a;g++){var f=v[g];a=a[f]}n=this.parse(o.name,a,o.bypass),n||(n=this.parse(o.name,u.strValue,o.bypass)),n.mapping=o,o=n;break;case void 0:break;default:return!1}if(c)o.bypassed=p?u.bypassed:u,s[o.name]=o;else{var C;p?(C=u.bypassed,u.bypassed=o):(C=s[o.name],s[o.name]=o),C&&C.mapping&&o.mapping&&C.context===i&&(C=C.prev),C&&C!==o&&(o.prev=C)}return o.context=i,!0},e.styfn.update=function(){var e=this._private.cy,t=e.elements();t.updateStyle()},e.styfn.updateMappers=function(t){for(var r=0;r<t.length;r++)for(var i=t[r],a=i._private.style,n=0;n<e.style.properties.length;n++){var o=e.style.properties[n],s=a[o.name];if(s&&s.mapping){var l=s.mapping;this.applyParsedProperty(i,l)}}},e.styfn.updateTransitions=function(t,r,i){var a=this,n=t._private.style,o=n["transition-property"].value,s=1e3*n["transition-duration"].value,l=1e3*n["transition-delay"].value,c={};if(o.length>0&&s>0){for(var u=!1,p=0;p<o.length;p++){for(var d=o[p],h=n[d],v=h.prev,g=n[d],f=!1,y=!1,m=!1,b=0;b<r.length;b++){var x=r[b];if(x===g.context){y=!0;break}}for(var b=i.length-1;b>=0;b--){for(var x=i[b],w=0;w<x.properties.length;w++){var _=x.properties[w];if(_.name===d){m=!0,v=_;break}}if(m)break}(y||m)&&(e.is.number(v.pxValue)&&e.is.number(g.pxValue)?f=v.pxValue!==g.pxValue:e.is.number(v.value)&&e.is.number(g.value)?f=v.value!==g.value:e.is.array(v.value)&&e.is.array(g.value)&&(f=v.value[0]!==g.value[0]||v.value[1]!==g.value[1]||v.value[2]!==g.value[2]),f&&(c[d]=g.strValue,this.applyBypass(t,d,v.strValue),u=!0))}if(!u)return;t._private.transitioning=!0,t.stop(),l>0&&t.delay(l),t.animate({css:c},{duration:s,queue:!1,complete:function(){a.removeAllBypasses(t),t._private.transitioning=!1}})}else t._private.transitioning&&(t.stop(),this.removeAllBypasses(t),t._private.transitioning=!1)}}(cytoscape),function(e){"use strict";e.styfn.applyBypass=function(t,r,i){var a=[];if("*"===r||"**"===r){if(void 0!==i)for(var n=0;n<e.style.properties.length;n++){var o=e.style.properties[n],r=o.name,s=this.parse(r,i,!0);s&&a.push(s)}}else if(e.is.string(r)){var s=this.parse(r,i,!0);s&&a.push(s)}else{if(!e.is.plainObject(r))return!1;for(var l=r,n=0;n<e.style.properties.length;n++){var o=e.style.properties[n],r=o.name,i=l[r];if(void 0===i&&(i=l[e.util.dash2camel(r)]),void 0!==i){var s=this.parse(r,i,!0);s&&a.push(s)}}}if(0===a.length)return!1;for(var c=!1,n=0;n<t.length;n++)for(var u=t[n],p=0;p<a.length;p++){var o=a[p];c=this.applyParsedProperty(u,o)||c}return c},e.styfn.removeAllBypasses=function(t){for(var r=0;r<e.style.properties.length;r++)for(var i=e.style.properties[r],a=i.name,n="",o=this.parse(a,n,!0),s=0;s<t.length;s++){var l=t[s];this.applyParsedProperty(l,o)}}}(cytoscape),function(e,t){"use strict";e.styfn.getEmSizeInPixels=function(){var e=this._private.cy,r=e.container();if(t&&r&&t.getComputedStyle){var i=t.getComputedStyle(r).getPropertyValue("font-size"),a=parseFloat(i);return a}return 1},e.styfn.containerCss=function(e){var r=this._private.cy,i=r.container();return t&&i&&t.getComputedStyle?t.getComputedStyle(i).getPropertyValue(e):void 0},e.styfn.containerProperty=function(e){var t=this.containerCss(e),r=this.parse(e,t);return r},e.styfn.containerPropertyAsString=function(e){var t=this.containerProperty(e);return t?t.strValue:void 0}}(cytoscape,"undefined"==typeof window?null:window),function(e){"use strict";e.styfn.getRenderedStyle=function(t){var t=t[0];if(t){for(var r={},i=t._private.style,a=this._private.cy,n=a.zoom(),o=0;o<e.style.properties.length;o++){var s=e.style.properties[o],l=i[s.name];if(l){var c=l.unitless?l.strValue:l.pxValue*n+"px";r[s.name]=c,r[e.util.dash2camel(s.name)]=c}}return r}},e.styfn.getRawStyle=function(t){var t=t[0];if(t){for(var r={},i=t._private.style,a=0;a<e.style.properties.length;a++){var n=e.style.properties[a],o=i[n.name];o&&(r[n.name]=o.strValue,r[e.util.dash2camel(n.name)]=o.strValue)}return r}},e.styfn.getValueStyle=function(t){var r,i;if(e.is.element(t)?(r={},i=t._private.style):(r={},i=t),i)for(var a=0;a<e.style.properties.length;a++){var n=e.style.properties[a],o=i[n.name]||i[e.util.dash2camel(n.name)];if(void 0===o||e.is.plainObject(o)||(o=this.parse(n.name,o)),o){var s=void 0===o.value?o:o.value;r[n.name]=s,r[e.util.dash2camel(n.name)]=s}}return r}}(cytoscape),function(e){"use strict";e.style.applyFromJson=function(e,t){for(var r=0;r<t.length;r++){var i=t[r],a=i.selector,n=i.css;e.selector(a);for(var o in n){var s=n[o];e.css(o,s)}}return e},e.style.fromJson=function(t,r){var i=new e.Style(t);return e.style.applyFromJson(i,r),i},e.styfn.fromJson=function(t){var r=this;return r.resetToDefault(),e.style.applyFromJson(r,t),r},e.styfn.json=function(){for(var e=[],t=0;t<this.length;t++){for(var r=this[t],i=r.selector,a=r.properties,n={},o=0;o<a.length;o++){var s=a[o];n[s.name]=s.strValue}e.push({selector:i?i.toString():"core",css:n})}return e}}(cytoscape),function(e){"use strict";e.style.applyFromString=function(t,r){function i(){l=l.length>n.length?l.substr(n.length):""}function a(){o=o.length>s.length?o.substr(s.length):""}var n,o,s,l=""+r;for(l=l.replace(/[/][*](\s|.)+?[*][/]/g,"");;){var c=l.match(/^\s*$/);if(c)break;var u=l.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!u){e.util.error("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+l);break}n=u[0];var p=u[1],d=new e.Selector(p);if(d._private.invalid)e.util.error("Skipping parsing of block: Invalid selector found in string stylesheet: "+p),i();else{var h=u[2],v=!1;o=h;for(var g=[];;){var c=o.match(/^\s*$/);if(c)break;var f=o.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!f){e.util.error("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+h),v=!0;break}s=f[0];var y=f[1],m=f[2],b=e.style.properties[y];if(b){var x=t.parse(y,m);x?(g.push({name:y,val:m}),a()):(e.util.error("Skipping property: Invalid property definition in: "+s),a())
}else e.util.error("Skipping property: Invalid property name in: "+s),a()}if(v){i();break}t.selector(p);for(var w=0;w<g.length;w++){var b=g[w];t.css(b.name,b.val)}i()}}return t},e.style.fromString=function(t,r){var i=new e.Style(t);return e.style.applyFromString(i,r),i},e.styfn.fromString=function(t){var r=this;return r.resetToDefault(),e.style.applyFromString(r,t),r}}(cytoscape),function(e){"use strict";e.stylesheet=e.Stylesheet=function(){return this instanceof e.Stylesheet?void(this.length=0):new e.Stylesheet},e.Stylesheet.prototype.selector=function(e){var t=this.length++;return this[t]={selector:e,properties:[]},this},e.Stylesheet.prototype.css=function(t,r){var i=this.length-1;if(e.is.string(t))this[i].properties.push({name:t,value:r});else if(e.is.plainObject(t))for(var a=t,n=0;n<e.style.properties.length;n++){var o=e.style.properties[n],s=a[o.name];if(void 0===s&&(s=a[e.util.dash2camel(o.name)]),void 0!==s){var t=o.name,r=s;this[i].properties.push({name:t,value:r})}}return this},e.Stylesheet.prototype.generateStyle=function(t){for(var r=new e.Style(t),i=0;i<this.length;i++){var a=this[i],n=a.selector,o=a.properties;r.selector(n);for(var s=0;s<o.length;s++){var l=o[s];r.css(l.name,l.value)}}return r}}(cytoscape),function(e,t){"use strict";var r=e.is.touch(),i={hideEdgesOnViewport:!1},a=e.util.copy(i);e.defaults=function(t){i=e.util.extend({},a,t)},e.fn.core=function(t){for(var r in t){var i=t[r];e.Core.prototype[r]=i}},e.Core=function(a){if(!(this instanceof e.Core))return new e.Core(a);var n=this;a=e.util.extend({},i,a);var o=a.container,s=e.getRegistrationForInstance(n,o);s&&s.cy&&(s.domElement.innerHTML="",s.cy.notify({type:"destroy"}),e.removeRegistrationForInstance(s.cy,s.domElement)),s=e.registerInstance(n,o);var l=s.readies,c=a;c.layout=e.util.extend({name:t&&o?"grid":"null"},c.layout),c.renderer=e.util.extend({name:t&&o?"canvas":"null"},c.renderer);var u=this._private={ready:!1,initrender:!1,instanceId:s.id,options:c,elements:[],id2index:{},listeners:[],aniEles:[],scratch:{},layout:null,renderer:null,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:void 0===c.zoomingEnabled?!0:c.zoomingEnabled,userZoomingEnabled:void 0===c.userZoomingEnabled?!0:c.userZoomingEnabled,panningEnabled:void 0===c.panningEnabled?!0:c.panningEnabled,userPanningEnabled:void 0===c.userPanningEnabled?!0:c.userPanningEnabled,boxSelectionEnabled:void 0===c.boxSelectionEnabled?!0:c.boxSelectionEnabled,zoom:e.is.number(c.zoom)?c.zoom:1,pan:{x:e.is.plainObject(c.pan)&&e.is.number(c.pan.x)?c.pan.x:0,y:e.is.plainObject(c.pan)&&e.is.number(c.pan.y)?c.pan.y:0},hasCompoundNodes:!1},p=c.selectionType;u.selectionType=void 0===p||"additive"!==p&&"single"!==p?r?"additive":"single":p,e.is.number(c.minZoom)&&e.is.number(c.maxZoom)&&c.minZoom<c.maxZoom?(u.minZoom=c.minZoom,u.maxZoom=c.maxZoom):e.is.number(c.minZoom)&&void 0===c.maxZoom?u.minZoom=c.minZoom:e.is.number(c.maxZoom)&&void 0===c.minZoom&&(u.maxZoom=c.maxZoom),u.style=e.is.stylesheet(c.style)?c.style.generateStyle(this):e.is.array(c.style)?e.style.fromJson(this,c.style):e.is.string(c.style)?e.style.fromString(this,c.style):new e.Style(n),n.initRenderer(e.util.extend({hideEdgesOnViewport:c.hideEdgesOnViewport},c.renderer)),c.initrender&&(n.on("initrender",c.initrender),n.on("initrender",function(){n._private.initrender=!0})),n.load(c.elements,function(){n.startAnimationLoop(),n._private.ready=!0,e.is.fn(c.ready)&&n.bind("ready",c.ready);for(var t=0;t<l.length;t++){var r=l[t];n.bind("ready",r)}s.readies=[],n.trigger("ready")},c.done)},e.corefn=e.Core.prototype,e.fn.core({ready:function(){return this._private.ready},initrender:function(){return this._private.initrender},registered:function(){return this._private&&null!=this._private.instanceId?!0:!1},registeredId:function(){return this._private.instanceId},getElementById:function(t){var r=this._private.id2index[t];return void 0!==r?this._private.elements[r]:new e.Collection(this)},selectionType:function(){return this._private.selectionType},hasCompoundNodes:function(){return this._private.hasCompoundNodes},addToPool:function(e){for(var t=this._private.elements,r=this._private.id2index,i=0;i<e.length;i++){var a=e[i],n=a._private.data.id,o=r[n],s=void 0!==o;s||(o=t.length,t.push(a),r[n]=o,a._private.index=o)}return this},removeFromPool:function(e){for(var t=this._private.elements,r=this._private.id2index,i=0;i<e.length;i++){var a=e[i],n=a._private.data.id,o=r[n],s=void 0!==o;if(s){delete this._private.id2index[n],t.splice(o,1);for(var l=o;l<t.length;l++){var c=t[l]._private.data.id;r[c]--}}}},container:function(){return this._private.options.container},options:function(){return e.util.copy(this._private.options)},json:function(){var e={},t=this;return e.elements={},t.elements().each(function(t,r){var i=r.group();e.elements[i]||(e.elements[i]=[]),e.elements[i].push(r.json())}),e.style=t.style().json(),e.scratch=t.scratch(),e.zoomingEnabled=t._private.zoomingEnabled,e.userZoomingEnabled=t._private.userZoomingEnabled,e.zoom=t._private.zoom,e.minZoom=t._private.minZoom,e.maxZoom=t._private.maxZoom,e.panningEnabled=t._private.panningEnabled,e.userPanningEnabled=t._private.userPanningEnabled,e.pan=t._private.pan,e.boxSelectionEnabled=t._private.boxSelectionEnabled,e.layout=t._private.options.layout,e.renderer=t._private.options.renderer,e.hideEdgesOnViewport=t._private.options.hideEdgesOnViewport,e}})}(cytoscape,"undefined"==typeof window?null:window),function(e,t){"use strict";function r(e){var t=!document||"interactive"!==document.readyState&&"complete"!==document.readyState?r:e;setTimeout(t,9,e)}e.fn.core({add:function(t){var r,i=this;if(e.is.elementOrCollection(t)){var a=t;if(a._private.cy===i)r=a.restore();else{for(var n=[],o=0;o<a.length;o++){var s=a[o];n.push(s.json())}r=new e.Collection(i,n)}}else if(e.is.array(t)){var n=t;r=new e.Collection(i,n)}else if(e.is.plainObject(t)&&(e.is.array(t.nodes)||e.is.array(t.edges))){for(var l=t,n=[],c=["nodes","edges"],o=0,u=c.length;u>o;o++){var p=c[o],d=l[p];if(e.is.array(d))for(var h=0,v=d.length;v>h;h++){var g=d[h],f=e.util.extend({},g,{group:p});n.push(f)}}r=new e.Collection(i,n)}else{var g=t;r=new e.Element(i,g).collection()}return r},remove:function(t){if(e.is.elementOrCollection(t))t=t;else if(e.is.string(t)){var r=t;t=this.$(r)}return t.remove()},load:function(i,a,n){function o(){s.one("layoutready",function(e){s.notifications(!0),s.trigger(e),s.notify({type:"load",collection:s.elements()}),s.one("load",a),s.trigger("load")}).one("layoutstop",function(){s.one("done",n),s.trigger("done")}),s.layout(s._private.options.layout)}var s=this,l=s.elements();return l.length>0&&l.remove(),s.notifications(!1),null!=i&&(e.is.plainObject(i)||e.is.array(i))&&s.add(i),t?r(o):o(),this}})}(cytoscape,"undefined"==typeof window?null:window),function(e){"use strict";e.fn.core({addToAnimationPool:function(e){for(var t=this,r=t._private.aniEles,i=[],a=0;a<r.length;a++){var n=r[a]._private.data.id;i[n]=!0}for(var a=0;a<e.length;a++){var o=e[a],n=o._private.data.id;i[n]||r.push(o)}},startAnimationLoop:function(){function t(){function e(){u(function(e){r(e),t()},p)}l?setTimeout(function(){e()},s):e()}function r(t){t=+new Date;for(var r=o._private.aniEles,a=0;a<r.length;a++){var n=r[a],s=n._private.animation.current,l=n._private.animation.queue;if(0===s.length){var c=l,u=c.length>0?c.shift():null;null!=u&&(u.callTime=+new Date,s.push(u))}for(var p=[],d=0;d<s.length;d++){var h=s[d];i(n,h,t),s[d].done&&(p.push(h),s.splice(d,1),d--)}for(var d=0;d<p.length;d++){var h=p[d],v=h.params.complete;e.is.fn(v)&&v.apply(n,[t])}}r.length>0&&o.notify({type:"draw",collection:r});for(var d=0;d<r.length;d++){var n=r[d],l=n._private.animation.queue,s=n._private.animation.current,g=s.length>0||l.length>0;g||(r.splice(d,1),d--)}}function i(t,r,i){var s,l=o._private.style,c=r.properties,u=r.params,p=r.callTime;if(s=0===r.duration?1:Math.min(1,(i-p)/r.duration),0>s?s=0:s>1&&(s=1),null==c.delay){var d=r.startPosition,h=c.position,v=t._private.position;if(h&&(a(d.x,h.x)&&(v.x=n(d.x,h.x,s)),a(d.y,h.y)&&(v.y=n(d.y,h.y,s))),c.css)for(var g=e.style.properties,f=0;f<g.length;f++){var y=g[f].name,m=c.css[y];if(void 0!==m){var b=r.startStyle[y],x=n(b,m,s);l.applyBypass(t,y,x)}}}return e.is.fn(u.step)&&u.step.apply(t,[i]),s>=1&&(r.done=!0),s}function a(t,r){return null==t||null==r?!1:e.is.number(t)&&e.is.number(r)?!0:t&&r?!0:!1}function n(t,r,i){if(0>i?i=0:i>1&&(i=1),e.is.number(t)&&e.is.number(r))return t+(r-t)*i;if(e.is.number(t[0])&&e.is.number(r[0])){var a=t,n=r,o=function(e,t){var r=t-e,a=e;return Math.round(i*r+a)},s=o(a[0],n[0]),l=o(a[1],n[1]),c=o(a[2],n[2]);return"rgb("+s+", "+l+", "+c+")"}return void 0}var o=this,s=1e3/60,l=!1,c=!0;o._private.aniEles=[];var u="undefined"==typeof window?function(){}:window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;null!=u&&c||(u=function(e){window.setTimeout(function(){e(+new Date)},s)});var p=o.container();t()}})}(cytoscape),function(e){"use strict";e.fn.core({data:e.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeData:e.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0}),batchData:e.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateMappers:!0}),scratch:e.define.data({field:"scratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeScratch:e.define.removeData({field:"scratch",triggerEvent:!1})})}(cytoscape),function(e){"use strict";e.fn.core({on:e.define.on(),one:e.define.on({unbindSelfOnTrigger:!0}),once:e.define.on({unbindAllBindersOnTrigger:!0}),off:e.define.off(),trigger:e.define.trigger()}),e.corefn.bind=e.corefn.on,e.corefn.unbind=e.corefn.off}(cytoscape),function(e){"use strict";e.fn.core({png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)}})}(cytoscape),function(e){"use strict";e.fn.core({layout:function(e){var t=this;return this._private.layoutRunning?this:(null==e&&(e=this._private.options.layout),this.initLayout(e),t.trigger("layoutstart"),this._private.layoutRunning=!0,this.one("layoutstop",function(){t._private.layoutRunning=!1}),this._private.layout.run(),this)},initLayout:function(t){if(null==t)return void e.util.error("Layout options must be specified to run a layout");if(null==t.name)return void e.util.error("A `name` must be specified to run a layout");var r=t.name,i=e.extension("layout",r);return null==i?void e.util.error("Can not apply layout: No such layout `%s` found; did you include its JS file?",r):(this._private.layout=new i(e.util.extend({},t,{renderer:this._private.renderer,cy:this})),void(this._private.options.layout=t))}})}(cytoscape),function(e){"use strict";e.fn.core({notify:function(t){if(this._private.notificationsEnabled){var r=this.renderer(),i=this;if(e.is.element(t.collection)){var a=t.collection;t.collection=new e.Collection(i,[a])}else if(e.is.array(t.collection)){var n=t.collection;t.collection=new e.Collection(i,n)}r.notify(t)}},notifications:function(e){var t=this._private;return void 0===e?t.notificationsEnabled:void(t.notificationsEnabled=e?!0:!1)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)}})}(cytoscape),function(e){"use strict";e.fn.core({renderTo:function(e,t,r){var i=this._private.renderer;return i.renderTo(e,t,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify({type:"draw"}),this},initRenderer:function(t){var r=this,i=e.extension("renderer",t.name);return null==i?void e.util.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",t.name):void(this._private.renderer=new i(e.util.extend({},t,{cy:r,style:r._private.style})))},recalculateRenderedStyle:function(){var e=this.renderer();e.recalculateRenderedStyle&&e.recalculateRenderedStyle()}})}(cytoscape),function(e){"use strict";e.fn.core({collection:function(t){return e.is.string(t)?this.$(t):e.is.elementOrCollection(t)?t.collection():new e.Collection(this)},nodes:function(e){var t=this.$("node");return e?t.filter(e):t},edges:function(e){var t=this.$("edge");return e?t.filter(e):t},$:function(t){var r=new e.Collection(this,this._private.elements);return t?r.filter(t):r}}),e.corefn.elements=e.corefn.filter=e.corefn.$}(cytoscape),function(e){"use strict";e.fn.core({style:function(){return this._private.style}})}(cytoscape),function(e){"use strict";e.fn.core({panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=e?!0:!1,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=e?!0:!1,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=e?!0:!1,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=e?!0:!1,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=e?!0:!1,this)},pan:function(){var t,r,i,a,n,o=arguments,s=this._private.pan;switch(o.length){case 0:return s;case 1:if(!this._private.panningEnabled)return this;if(e.is.string(o[0]))return t=o[0],s[t];e.is.plainObject(o[0])&&(i=o[0],a=i.x,n=i.y,e.is.number(a)&&(s.x=a),e.is.number(n)&&(s.y=n),this.trigger("pan"));break;case 2:if(!this._private.panningEnabled)return this;t=o[0],r=o[1],"x"!==t&&"y"!==t||!e.is.number(r)||(s[t]=r),this.trigger("pan")}return this.notify({type:"viewport"}),this},panBy:function(){var t,r,i,a,n,o=arguments,s=this._private.pan;if(!this._private.panningEnabled)return this;switch(o.length){case 1:e.is.plainObject(o[0])&&(i=o[0],a=i.x,n=i.y,e.is.number(a)&&(s.x+=a),e.is.number(n)&&(s.y+=n),this.trigger("pan"));break;case 2:t=o[0],r=o[1],"x"!==t&&"y"!==t||!e.is.number(r)||(s[t]+=r),this.trigger("pan")}return this.notify({type:"viewport"}),this},fit:function(t,r){if(e.is.number(t)&&void 0===r&&(r=t,t=void 0),!this._private.panningEnabled||!this._private.zoomingEnabled)return this;if(e.is.string(t)){var i=t;t=this.$(i)}else e.is.elementOrCollection(t)||(t=this.elements());var a,n=t.boundingBox(),o=this.style(),s=parseFloat(o.containerCss("width")),l=parseFloat(o.containerCss("height"));return r=e.is.number(r)?r:0,!isNaN(s)&&!isNaN(l)&&t.length>0&&(a=this._private.zoom=Math.min((s-2*r)/n.w,(l-2*r)/n.h),a=a>this._private.maxZoom?this._private.maxZoom:a,a=a<this._private.minZoom?this._private.minZoom:a,this._private.pan={x:(s-a*(n.x1+n.x2))/2,y:(l-a*(n.y1+n.y2))/2},this.trigger("pan zoom"),this.notify({type:"viewport"})),this},minZoom:function(t){return void 0===t?this._private.minZoom:(e.is.number(t)&&(this._private.minZoom=t),this)},maxZoom:function(t){return void 0===t?this._private.maxZoom:(e.is.number(t)&&(this._private.maxZoom=t),this)},zoom:function(t){var r,i;if(void 0===t)return this._private.zoom;if(e.is.number(t))i=t;else if(e.is.plainObject(t)){if(i=t.level,t.position){var a=t.position,n=this._private.pan,o=this._private.zoom;r={x:a.x*o+n.x,y:a.y*o+n.y}}else t.renderedPosition&&(r=t.renderedPosition);if(r&&!this._private.panningEnabled)return this}if(!this._private.zoomingEnabled)return this;if(!e.is.number(i)||r&&(!e.is.number(r.x)||!e.is.number(r.y)))return this;if(i=i>this._private.maxZoom?this._private.maxZoom:i,i=i<this._private.minZoom?this._private.minZoom:i,r){var s=this._private.pan,l=this._private.zoom,c=i,u={x:-c/l*(r.x-s.x)+r.x,y:-c/l*(r.y-s.y)+r.y};this._private.zoom=i,this._private.pan=u;var p=s.x!==u.x||s.y!==u.y;this.trigger("zoom"+(p?" pan":""))}else this._private.zoom=i,this.trigger("zoom");return this.notify({type:"viewport"}),this},boundingBox:function(e){var t=this.$(e);return t.boundingBox()},renderedBoundingBox:function(e){var t=this.$(e);return t.renderedBoundingBox()},center:function(t){if(!this._private.panningEnabled||!this._private.zoomingEnabled)return this;if(e.is.string(t)){var r=t;t=cy.elements(r)}else e.is.elementOrCollection(t)||(t=cy.elements());var i=t.boundingBox(),a=this.style(),n=parseFloat(a.containerCss("width")),o=parseFloat(a.containerCss("height")),s=this._private.zoom;return this.pan({x:(n-s*(i.x1+i.x2))/2,y:(o-s*(i.y1+i.y2))/2}),this.trigger("pan"),this.notify({type:"viewport"}),this},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.pan({x:0,y:0}),this._private.maxZoom>1&&this._private.minZoom<1&&this.zoom(1),this.notify({type:"viewport"}),this):this}})}(cytoscape),function(e){"use strict";e.fn.collection=e.fn.eles=function(t){for(var r in t){var i=t[r];e.Collection.prototype[r]=i}};var t={prefix:{nodes:"n",edges:"e"},id:{nodes:0,edges:0},generate:function(t,r,i){var a=e.is.element(r)?r._private:r,n=a.group,o=null!=i?i:this.prefix[n]+this.id[n];if(t.getElementById(o).empty())this.id[n]++;else for(;!t.getElementById(o).empty();)o=this.prefix[n]+ ++this.id[n];return o}};e.Element=function(t,r,i){if(!(this instanceof e.Element))return new e.Element(t,r,i);var a=this;if(i=void 0===i||i?!0:!1,void 0===t||void 0===r||!e.is.core(t))return void e.util.error("An element must have a core reference and parameters set");if("nodes"!==r.group&&"edges"!==r.group)return void e.util.error("An element must be of type `nodes` or `edges`; you specified `"+r.group+"`");if(this.length=1,this[0]=this,this._private={cy:t,single:!0,data:r.data||{},layoutData:{},position:r.position||{},autoWidth:void 0,autoHeight:void 0,listeners:[],group:r.group,style:{},rstyle:{},styleCxts:[],removed:!0,selected:r.selected?!0:!1,selectable:void 0===r.selectable?!0:r.selectable?!0:!1,locked:r.locked?!0:!1,grabbed:!1,grabbable:void 0===r.grabbable?!0:r.grabbable?!0:!1,active:!1,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:{},edges:[],children:[]},r.renderedPosition){var n=r.renderedPosition,o=t.pan(),s=t.zoom();this._private.position={x:(n.x-o.x)/s,y:(n.y-o.y)/s}}if(e.is.string(r.classes))for(var l=r.classes.split(/\s+/),c=0,u=l.length;u>c;c++){var p=l[c];p&&""!==p&&(a._private.classes[p]=!0)}r.css&&t.style().applyBypass(this,r.css),(void 0===i||i)&&this.restore()},e.Collection=function(r,i){if(!(this instanceof e.Collection))return new e.Collection(r,i);if(void 0===r||!e.is.core(r))return void e.util.error("A collection must have a reference to the core");var a={},n=[],o=!1;if(i){if(i.length>0&&e.is.plainObject(i[0])&&!e.is.element(i[0])){o=!0;for(var s=[],l={},c=0,u=i.length;u>c;c++){var p=i[c];null==p.data&&(p.data={});var d=p.data;if(null==d.id)d.id=t.generate(r,p);else if(0!=r.getElementById(d.id).length||l[d.id])continue;var h=new e.Element(r,p,!1);s.push(h),l[d.id]=!0}i=s}}else i=[];for(var c=0,u=i.length;u>c;c++){var v=i[c];if(v){var g=v._private.data.id;a[g]||(a[g]=v,n.push(v))}}for(var c=0,u=n.length;u>c;c++)this[c]=n[c];this.length=n.length,this._private={cy:r,ids:a},o&&this.restore()},e.elefn=e.elesfn=e.Element.prototype=e.Collection.prototype,e.elesfn.cy=function(){return this._private.cy},e.elesfn.element=function(){return this[0]},e.elesfn.collection=function(){return e.is.collection(this)?this:new e.Collection(this._private.cy,[this])},e.elesfn.json=function(){var t=this.element();if(null==t)return void 0;var r=t._private,i=e.util.copy({data:r.data,position:r.position,group:r.group,bypass:r.bypass,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbed:r.grabbed,grabbable:r.grabbable,classes:""}),a=[];for(var n in r.classes)a.push(n);for(var o=0;o<a.length;o++){var n=a[o];i.classes+=n+(o<a.length-1?" ":"")}return i},e.elesfn.jsons=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t],i=r.json();e.push(i)}return e},e.elesfn.restore=function(r){var i=this,a=[],n=i.cy();void 0===r&&(r=!0);for(var o=[],s=[],l=[],c=0,u=0,p=0,d=i.length;d>p;p++){var h=i[p];h.isNode()?(s.push(h),c++):(l.push(h),u++)}o=s.concat(l);for(var p=0,d=o.length;d>p;p++){var h=o[p];if(h.removed()){var v=h._private,g=v.data;if(void 0===g.id)g.id=t.generate(n,h);else{if(e.is.emptyString(g.id)||!e.is.string(g.id)){e.util.error("Can not create element with invalid string ID `"+g.id+"`");continue}if(0!=n.getElementById(g.id).length){e.util.error("Can not create second element with ID `"+g.id+"`");continue}}{g.id}if(h.isEdge()){for(var f=h,y=["source","target"],m=y.length,b=!1,x=0;m>x;x++){var w=y[x],_=g[w];null==_||""===_?(e.util.error("Can not create edge `"+g.id+"` with unspecified "+w),b=!0):n.getElementById(_).empty()&&(e.util.error("Can not create edge `"+g.id+"` with nonexistant "+w+" `"+_+"`"),b=!0)}if(b)continue;var S=n.getElementById(g.source),E=n.getElementById(g.target);S._private.edges.push(f),E._private.edges.push(f),f._private.source=S,f._private.target=E}v.ids={},v.ids[g.id]=h,v.removed=!1,n.addToPool(h),a.push(h)}}for(var p=0;c>p;p++){var M=o[p],g=M._private.data,P=(g.id,M._private.data.parent),k=null!=P;if(k){var C=n.getElementById(P);if(C.empty())delete g.parent;else{for(var D=!1,N=C;!N.empty();){if(M.same(N)){D=!0,delete g.parent;break}N=N.parent()}D||(C[0]._private.children.push(M),n._private.hasCompoundNodes=!0)}}}if(a=new e.Collection(n,a),a.length>0){var T=a.add(a.connectedNodes()).add(a.parent());T.updateStyle(r),r?a.rtrigger("add"):a.trigger("add")}return i},e.elesfn.removed=function(){var e=this[0];return e&&e._private.removed},e.elesfn.inside=function(){var e=this[0];return e&&!e._private.removed},e.elesfn.remove=function(t){function r(e){for(var t=e._private.edges,r=0;r<t.length;r++)a(t[r])}function i(e){for(var t=e._private.children,r=0;r<t.length;r++)a(t[r])}function a(e){var t=u[e.id()];t||(u[e.id()]=!0,e.isNode()?(c.push(e),r(e),i(e)):c.unshift(e))}function n(e,t){for(var r=e._private.edges,i=0;i<r.length;i++){var a=r[i];if(t===a){r.splice(i,1);break}}}function o(e,t){t=t[0],e=e[0];for(var r=e._private.children,i=0;i<r.length;i++)if(r[i][0]===t[0]){r.splice(i,1);break}}var s=this,l=[],c=[],u={},p=s._private.cy;void 0===t&&(t=!0);for(var d=0,h=s.length;h>d;d++){var v=s[d];a(v)}for(var d=0;d<c.length;d++){var v=c[d];if(v._private.removed=!0,p.removeFromPool(v),l.push(v),v.isEdge()){var g=v.source()[0],f=v.target()[0];n(g,v),n(f,v)}else{var y=v.parent();0!==y.length&&o(y,v)}}var m=p._private.elements;p._private.hasCompoundNodes=!1;for(var d=0;d<m.length;d++){var v=m[d];if(v.isParent()){p._private.hasCompoundNodes=!0;break}}var b=new e.Collection(this.cy(),l);b.size()>0&&(t&&this.cy().notify({type:"remove",collection:b}),b.trigger("remove"));for(var x={},d=0;d<c.length;d++){var v=c[d],w="nodes"===v._private.group,_=v._private.data.parent;if(w&&void 0!==_&&!x[_]){x[_]=!0;var y=p.getElementById(_);y&&0!==y.length&&!y._private.removed&&0===y.children().length&&y.updateStyle()}}return this}}(cytoscape),function(e){"use strict";e.fn.eles({breadthFirstSearch:function(t,r,i){i=1!==arguments.length||e.is.fn(r)?i:r,r=e.is.fn(r)?r:function(){};for(var a,n=this._private.cy,o=e.is.string(t)?this.filter(t):t,s=[],l=[],c={},u={},p=0,d=this.nodes(),h=this.edges(),v=0;v<o.length;v++)o[v].isNode()&&(s.unshift(o[v]),u[o[v].id()]=!0,l.push(o[v]),c[o[v].id()]=0);for(;0!==s.length;){var o=s.shift(),g=c[o.id()],f=r.call(o,p++,g);if(f===!0){a=o;break}if(f===!1)break;for(var y=o.connectedEdges(i?'[source = "'+o.id()+'"]':void 0).intersect(h),v=0;v<y.length;v++){var m=y[v],b=m.connectedNodes('[id != "'+o.id()+'"]').intersect(d);0===b.length||u[b.id()]||(b=b[0],s.push(b),u[b.id()]=!0,c[b.id()]=c[o.id()]+1,l.push(b),l.push(m))}}return{path:new e.Collection(n,l),found:new e.Collection(n,a)}},depthFirstSearch:function(t,r,i){i=1!==arguments.length||e.is.fn(r)?i:r,r=e.is.fn(r)?r:function(){};for(var a,n=this._private.cy,o=e.is.string(t)?this.filter(t):t,s=[],l=[],c={},u={},p={},d=0,h=this.edges(),v=this.nodes(),g=0;g<o.length;g++)o[g].isNode()&&(s.push(o[g]),l.push(o[g]),u[o[g].id()]=0);for(;0!==s.length;){var o=s.pop();if(!p[o.id()]){p[o.id()]=!0;var f=u[o.id()],y=r.call(o,d++,f);if(y===!0){a=o;break}if(y===!1)break;for(var m=o.connectedEdges(i?'[source = "'+o.id()+'"]':void 0).intersect(h),g=0;g<m.length;g++){var b=m[g],x=b.connectedNodes('[id != "'+o.id()+'"]').intersect(v);0===x.length||p[x.id()]||(x=x[0],s.push(x),u[x.id()]=u[o.id()]+1,l.push(x),c[x.id()]=b)}}}for(var w=[],g=0;g<l.length;g++){var _=l[g],S=c[_.id()];S&&w.push(S),w.push(_)}return{path:new e.Collection(n,w),found:new e.Collection(n,a)}},kruskal:function(t){function r(e){for(var t=0;t<a.length;t++){var r=a[t];if(r.anySame(e))return{eles:r,index:t}}}t=e.is.fn(t)?t:function(){return 1};for(var i=new e.Collection(this._private.cy,[]),a=[],n=this.nodes(),o=0;o<n.length;o++)a.push(n[o].collection());for(var s=this.edges(),l=s.toArray().sort(function(e,r){var i=t.call(e),a=t.call(r);return i-a}),o=0;o<l.length;o++){var c=l[o],u=c.source()[0],p=c.target()[0],d=r(u),h=r(p);d.index!==h.index&&(i=i.add(c),a[d.index]=d.eles.add(h.eles),a.splice(h.index,1))}return n.add(i)},dijkstra:function(t,r,i){var a=this._private.cy;i=e.is.fn(r)?i:r,r=e.is.fn(r)?r:function(){return 1};for(var n=e.is.string(t)?this.filter(t)[0]:t[0],o={},s={},l={},c=this.edges().not(":loop"),u=this.nodes(),p=[],d=0;d<u.length;d++)o[u[d].id()]=u[d].id()===n.id()?0:1/0,p.push(u[d]);var h=function(e){return o[e.id()]};p=new e.Collection(a,p);for(var v=e.Minheap(a,p,h),g=function(e,t){for(var a,n=(i?e.edgesTo(t):e.edgesWith(t)).intersect(c),o=1/0,s=0;s<n.length;s++){var l=n[s],u=r.call(l);(o>u||!a)&&(o=u,a=l)}return{edge:a,dist:o}};v.size()>0;){var f=v.pop(),y=f.value,m=f.id,b=a.getElementById(m);if(l[m]=y,y===Math.Infinite)break;for(var x=b.neighborhood().intersect(u),d=0;d<x.length;d++){var w=x[d],_=w.id(),S=g(b,w),E=y+S.dist;E<v.getValueById(_)&&(v.edit(_,E),s[_]={node:b,edge:S.edge})}}return{distanceTo:function(t){var r=e.is.string(t)?u.filter(t)[0]:t[0];return l[r.id()]},pathTo:function(t){var r=e.is.string(t)?u.filter(t)[0]:t[0],i=[],n=r;for(i.unshift(r);s[n.id()];){var o=s[n.id()];i.unshift(o.edge),i.unshift(o.node),n=o.node}return new e.Collection(a,i)}}}}),e.elesfn.bfs=e.elesfn.breadthFirstSearch,e.elesfn.dfs=e.elesfn.depthFirstSearch}(cytoscape),function(e){"use strict";e.fn.eles({animated:function(){var e=this[0];return e?e._private.animation.current.length>0:void 0},clearQueue:function(){for(var e=0;e<this.length;e++){var t=this[e];t._private.animation.queue=[]}return this},delay:function(e,t){return this.animate({delay:e},{duration:e,complete:t}),this},animate:function(e,t){var r,i=+new Date,a=this._private.cy,n=a.style();switch(void 0===t&&(t={}),void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}if(null==e||null==e.position&&null==e.renderedPosition&&null==e.css&&null==e.delay)return this;if(e.css&&(e.css=n.getValueStyle(e.css)),e.renderedPosition){var o=e.renderedPosition,s=a.pan(),l=a.zoom();e.position={x:(o.x-s.x)/l,y:(o.y-s.y)/l}}for(var c=0;c<this.length;c++){var u=this[c],p=u._private.position,d={x:p.x,y:p.y},h=n.getValueStyle(u);r=u.animated()&&(void 0===t.queue||t.queue)?u._private.animation.queue:u._private.animation.current,r.push({properties:e,duration:t.duration,params:t,callTime:i,startPosition:d,startStyle:h})}return a.addToAnimationPool(this),this},stop:function(e,t){for(var r=0;r<this.length;r++){for(var i=this[r],a=i._private.animation.current,n=0;n<a.length;n++){var o=a[n];t&&(o.duration=0)}e&&(i._private.animation.queue=[]),t||(i._private.animation.current=[])}return this.cy().notify({collection:this,type:"draw"}),this}})}(cytoscape),function(e){"use strict";e.fn.eles({addClass:function(t){t=t.split(/\s+/);for(var r=this,i=[],a=0;a<t.length;a++){var n=t[a];if(!e.is.emptyString(n))for(var o=0;o<r.length;o++){var s=r[o],l=s._private.classes[n];s._private.classes[n]=!0,l||i.push(s)}}return i.length>0&&new e.Collection(this._private.cy,i).updateStyle(),r.trigger("class"),r},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes[e]?!0:!1},toggleClass:function(t,r){for(var i=t.split(/\s+/),a=this,n=[],o=0,s=a.length;s>o;o++)for(var l=a[o],c=0;c<i.length;c++){var u=i[c];if(!e.is.emptyString(u)){var p=l._private.classes[u],d=r||void 0===r&&!p;d?(l._private.classes[u]=!0,p||n.push(l)):(l._private.classes[u]=!1,p&&n.push(l))}}return n.length>0&&new e.Collection(this._private.cy,n).updateStyle(),a.trigger("class"),a},removeClass:function(t){t=t.split(/\s+/);for(var r=this,i=[],a=0;a<r.length;a++)for(var n=r[a],o=0;o<t.length;o++){var s=t[o];if(s&&""!==s){var l=n._private.classes[s];delete n._private.classes[s],l&&i.push(n)}}return i.length>0&&new e.Collection(r._private.cy,i).updateStyle(),r.trigger("class"),r}})}(cytoscape),function(e){"use strict";e.fn.eles({allAre:function(e){return this.filter(e).length===this.length},is:function(e){return this.filter(e).length>0},same:function(e){return e=this.cy().collection(e),this.length!==e.length?!1:this.intersect(e).length===this.length},anySame:function(e){return e=this.cy().collection(e),this.intersect(e).length>0},allAreNeighbors:function(e){return e=this.cy().collection(e),this.neighborhood().intersect(e).length===e.length}})}(cytoscape),function(e){"use strict";e.fn.eles({parent:function(t){for(var r=[],i=this._private.cy,a=0;a<this.length;a++){var n=this[a],o=i.getElementById(n._private.data.parent);o.size()>0&&r.push(o)}return new e.Collection(i,r).filter(t)},parents:function(t){for(var r=[],i=this.parent();i.nonempty();){for(var a=0;a<i.length;a++){var n=i[a];r.push(n)}i=i.parent()}return new e.Collection(this.cy(),r).filter(t)},children:function(t){for(var r=[],i=0;i<this.length;i++){var a=this[i];r=r.concat(a._private.children)}return new e.Collection(this.cy(),r).filter(t)},siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];return e?0!==e._private.children.length:void 0},isChild:function(){var e=this[0];return e?void 0!==e._private.data.parent&&0!==e.parent().length:void 0},descendants:function(t){function r(e){for(var t=0;t<e.length;t++){var a=e[t];i.push(a),a.children().nonempty()&&r(a.children())}}var i=[];return r(this.children()),new e.Collection(this.cy(),i).filter(t)}}),e.fn.eles.ancestors=e.fn.eles.parents}(cytoscape),function(e){"use strict";var t=1,r=0;e.fn.eles({data:e.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateMappers:!0}),removeData:e.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateMappers:!0}),batchData:e.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateMappers:!0}),scratch:e.define.data({field:"scratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeScratch:e.define.removeData({field:"scratch",triggerEvent:!1}),rscratch:e.define.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:e.define.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];return e?e._private.data.id:void 0},position:e.define.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"rtrigger",allowGetting:!0,validKeys:["x","y"],onSet:function(e){var t=e.updateCompoundBounds();t.rtrigger("position")},canSet:function(e){return!e.locked()}}),silentPosition:e.define.data({field:"position",bindingEvent:"position",allowBinding:!1,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!1,triggerFnName:"trigger",allowGetting:!0,validKeys:["x","y"],onSet:function(e){e.updateCompoundBounds()},canSet:function(e){return!e.locked()}}),positions:function(t){if(e.is.plainObject(t))this.position(t);else if(e.is.fn(t)){for(var r=t,i=0;i<this.length;i++){var a=this[i],t=r.apply(a,[i,a]);if(t&&!a.locked()){var n=a._private.position;
n.x=t.x,n.y=t.y}}var o=this.updateCompoundBounds();this.add(o).rtrigger("position")}return this},updateCompoundBounds:function(){function t(e){var t=e.children(),r=e._private.style,a=t.boundingBox({includeLabels:!1,includeEdges:!1}),n={top:r["padding-top"].pxValue,bottom:r["padding-bottom"].pxValue,left:r["padding-left"].pxValue,right:r["padding-right"].pxValue},o=e._private.position,s=!1;"auto"===r.width.value&&(e._private.autoWidth=a.w+n.left+n.right,o.x=(a.x1+a.x2-n.left+n.right)/2,s=!0),"auto"===r.height.value&&(e._private.autoHeight=a.h+n.top+n.bottom,o.y=(a.y1+a.y2-n.top+n.bottom)/2,s=!0),s&&i.push(e)}var r=this.cy();if(!r.hasCompoundNodes())return r.collection();for(var i=[],a=this.parent();a.nonempty();){for(var n=0;n<a.length;n++){var o=a[n];t(o)}a=a.parent()}return new e.Collection(r,i)},renderedPosition:function(t,r){var i=this[0],a=this.cy(),n=a.zoom(),o=a.pan(),s=e.is.plainObject(t)?t:void 0,l=void 0!==s||void 0!==r&&e.is.string(t);if(i&&i.isNode()){if(!l){var c=i._private.position;return s={x:c.x*n+o.x,y:c.y*n+o.y},void 0===t?s:s[t]}for(var u=0;u<this.length;u++){var i=this[u];void 0!==r?i._private.position[t]=(r-o[t])/n:void 0!==s&&(i._private.position={x:(s.x-o.x)/n,y:(s.y-o.y)/n})}this.rtrigger("position")}else if(!l)return void 0;return this},width:function(){var e=this[0];if(e){var t=e._private.style.width;return"auto"===t.strValue?e._private.autoWidth:t.pxValue}},outerWidth:function(){var e=this[0];if(e){var i=e._private.style,a="auto"===i.width.strValue?e._private.autoWidth:i.width.pxValue,n=i["border-width"]?i["border-width"].pxValue*t+r:0;return a+n}},renderedWidth:function(){var e=this[0];if(e){var t=e.width();return t*this.cy().zoom()}},renderedOuterWidth:function(){var e=this[0];if(e){var t=e.outerWidth();return t*this.cy().zoom()}},height:function(){var e=this[0];if(e&&e.isNode()){var t=e._private.style.height;return"auto"===t.strValue?e._private.autoHeight:t.pxValue}},outerHeight:function(){var e=this[0];if(e){var i=e._private.style,a="auto"===i.height.strValue?e._private.autoHeight:i.height.pxValue,n=i["border-width"]?i["border-width"].pxValue*t+r:0;return a+n}},renderedHeight:function(){var e=this[0];if(e){var t=e.height();return t*this.cy().zoom()}},renderedOuterHeight:function(){var e=this[0];if(e){var t=e.outerHeight();return t*this.cy().zoom()}},renderedBoundingBox:function(e){var t=this.boundingBox(e),r=this.cy(),i=r.zoom(),a=r.pan(),n=t.x1*i+a.x,o=t.x2*i+a.x,s=t.y1*i+a.y,l=t.y2*i+a.y;return{x1:n,x2:o,y1:s,y2:l,w:o-n,h:l-s}},boundingBox:function(t){var r=this;t=e.util.extend({includeNodes:!0,includeEdges:!0,includeLabels:!0},t),this.cy().recalculateRenderedStyle();for(var i=1/0,a=-1/0,n=1/0,o=-1/0,s=0;s<r.length;s++){var l,c,u,p,d,h,v=r[s],g=!1;if("none"!==v.css("display")){if(v.isNode()&&t.includeNodes){g=!0;var f=v._private.position;d=f.x,h=f.y;var y=v.outerWidth(),m=y/2,b=v.outerHeight(),x=b/2;l=d-m,c=d+m,u=h-x,p=h+x,i=i>l?l:i,a=c>a?c:a,n=n>u?u:n,o=p>o?p:o}else if(v.isEdge()&&t.includeEdges){g=!0;var w=v.source()[0]._private.position,_=v.target()[0]._private.position,S=v._private.rstyle||{};if(l=w.x,c=_.x,u=w.y,p=_.y,l>c){var E=l;l=c,c=E}if(u>p){var E=u;u=p,p=E}i=i>l?l:i,a=c>a?c:a,n=n>u?u:n,o=p>o?p:o;for(var M=S.bezierPts||[],y=v._private.style.width.pxValue,P=0;P<M.length;P++){var k=M[P];i=k.x-y<i?k.x-y:i,a=k.x+y>a?k.x+y:a,n=k.y-y<n?k.y-y:n,o=k.y+y>o?k.y+y:o}}var C=v._private.style,S=v._private.rstyle,D=C.content.strValue,N=C["font-size"],T=C["text-halign"],I=C["text-valign"],z=S.labelWidth,B=S.labelHeight,R=S.labelX,X=S.labelY;if(g&&t.includeLabels&&D&&N&&void 0!=B&&void 0!=z&&void 0!=R&&void 0!=X&&T&&I){var Y,V,L,A,O=B,q=z;if(v.isEdge())Y=R-q/2,V=R+q/2,L=X-O/2,A=X+O/2;else{switch(T.value){case"left":Y=R-q,V=R;break;case"center":Y=R-q/2,V=R+q/2;break;case"right":Y=R,V=R+q}switch(I.value){case"top":L=X-O,A=X;break;case"center":L=X-O/2,A=X+O/2;break;case"bottom":L=X,A=X+O}}i=i>Y?Y:i,a=V>a?V:a,n=n>L?L:n,o=A>o?A:o}}}return{x1:i,x2:a,y1:n,y2:o,w:a-i,h:o-n}}})}(cytoscape),function(e){"use strict";function t(e){return function(t){var r=this;if(void 0===t&&(t=!0),0!==r.length&&r.isNode()&&!r.removed()){for(var i=0,a=r[0],n=a._private.edges,o=0;o<n.length;o++){var s=n[o];(t||!s.isLoop())&&(i+=e(a,s))}return i}}}function r(e,t){return function(r){for(var i=void 0,a=this.nodes(),n=0;n<a.length;n++){var o=a[n],s=o[e](r);void 0===s||void 0!==i&&!t(s,i)||(i=s)}return i}}e.fn.eles({degree:t(function(e,t){return t.source().same(t.target())?2:1}),indegree:t(function(e,t){return t.target().same(e)?1:0}),outdegree:t(function(e,t){return t.source().same(e)?1:0})}),e.fn.eles({minDegree:r("degree",function(e,t){return t>e}),maxDegree:r("degree",function(e,t){return e>t}),minIndegree:r("indegree",function(e,t){return t>e}),maxIndegree:r("indegree",function(e,t){return e>t}),minOutdegree:r("outdegree",function(e,t){return t>e}),maxOutdegree:r("outdegree",function(e,t){return e>t})}),e.fn.eles({totalDegree:function(e){for(var t=0,r=this.nodes(),i=0;i<r.length;i++)t+=r[i].degree(e);return t}})}(cytoscape),function(e){"use strict";e.fn.eles({on:e.define.on(),one:e.define.on({unbindSelfOnTrigger:!0}),once:e.define.on({unbindAllBindersOnTrigger:!0}),off:e.define.off(),trigger:e.define.trigger(),rtrigger:function(e,t){return 0!==this.length?(this.cy().notify({type:e,collection:this.filter(function(){return!this.removed()})}),this.trigger(e,t),this):void 0}}),e.elesfn.bind=e.elesfn.on,e.elesfn.unbind=e.elesfn.off}(cytoscape),function(e){"use strict";e.fn.eles({nodes:function(e){return this.filter(function(e,t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(e,t){return t.isEdge()}).filter(e)},filter:function(t){var r=this._private.cy;if(e.is.fn(t)){for(var i=[],a=0;a<this.length;a++){var n=this[a];t.apply(n,[a,n])&&i.push(n)}return new e.Collection(r,i)}return e.is.string(t)||e.is.elementOrCollection(t)?new e.Selector(t).filter(this):void 0===t?this:new e.Collection(r)},not:function(t){var r=this._private.cy;if(t){e.is.string(t)&&(t=this.filter(t));for(var i=[],a=0;a<this.length;a++){var n=this[a],o=t._private.ids[n.id()];o||i.push(n)}return new e.Collection(r,i)}return this},intersect:function(t){var r=this._private.cy;if(e.is.string(t)){var i=t;return this.filter(i)}var a=[],n=this,o=t,s=this.length<t.length,l=s?n._private.ids:o._private.ids,c=s?o._private.ids:n._private.ids;for(var u in l){var p=c[u];p&&a.push(p)}return new e.Collection(r,a)},add:function(t){var r=this._private.cy;if(!t)return this;if(e.is.string(t)){var i=t;t=r.elements(i)}for(var a=[],n=0;n<this.length;n++)a.push(this[n]);for(var n=0;n<t.length;n++){var o=!this._private.ids[t[n].id()];o&&a.push(t[n])}return new e.Collection(r,a)}})}(cytoscape),function(e){"use strict";e.fn.eles({isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},group:function(){var e=this[0];return e?e._private.group:void 0}})}(cytoscape),function(e){"use strict";e.fn.eles({each:function(t){if(e.is.fn(t))for(var r=0;r<this.length;r++){var i=this[r],a=t.apply(i,[r,i]);if(a===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(t,r){var i=[],a=this.length;null==r&&(r=a),null==t&&(t=0),0>t&&(t=a+t),0>r&&(r=a+r);for(var n=t;n>=0&&r>n&&a>n;n++)i.push(this[n]);return new e.Collection(this.cy(),i)},size:function(){return this.length},eq:function(e){return this[e]},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!e.is.fn(t))return this;var r=this.cy(),i=(new e.Collection(r),this.toArray().sort(t));return new e.Collection(r,i)},sortByZIndex:function(){return this.sort(e.Collection.zIndexSort)}}),e.Collection.zIndexSort=function(e,t){var r=function(e){return"nodes"==e._private.group?e.parents().size():"edges"==e._private.group?Math.max(e.source()[0].parents().size(),e.target()[0].parents().size()):0},i=e._private.style["z-index"].value-t._private.style["z-index"].value,a=0,n=0;return e.cy().hasCompoundNodes()&&(a=r(e),n=r(t)),a-n===0?"nodes"===e._private.group&&"edges"===t._private.group?1:"edges"===e._private.group&&"nodes"===t._private.group?-1:0===i?e._private.index-t._private.index:i:a-n}}(cytoscape),function(e){"use strict";e.fn.eles({updateStyle:function(e){var t=this._private.cy,r=t.style();e=e||void 0===e?!0:!1,r.apply(this);var i=this.updateCompoundBounds();return e?this.add(i).rtrigger("style"):this.add(i).trigger("style"),this},updateMappers:function(e){var t=this._private.cy,r=t.style();e=e||void 0===e?!0:!1,r.updateMappers(this);var i=this.updateCompoundBounds();return e?this.add(i).rtrigger("style"):this.add(i).trigger("style"),this},renderedCss:function(e){var t=this[0];if(t){var r=t.cy().style().getRenderedStyle(t);return void 0===e?r:r[e]}},css:function(t,r){var i=this.cy().style();if(e.is.plainObject(t)){var a=t;i.applyBypass(this,a);var n=this.updateCompoundBounds();this.add(n).rtrigger("style")}else if(e.is.string(t)){if(void 0===r){var o=this[0];return o?o._private.style[t].strValue:void 0}i.applyBypass(this,t,r);var n=this.updateCompoundBounds();this.add(n).rtrigger("style")}else if(void 0===t){var o=this[0];return o?i.getRawStyle(o):void 0}return this},removeCss:function(){for(var e=this.cy().style(),t=this,r=0;r<t.length;r++){var i=t[r];e.removeAllBypasses(i)}var a=this.updateCompoundBounds();this.add(a).rtrigger("style")},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},visible:function(){var e=this[0];if(e){if("visible"!==e.css("visibility")||"element"!==e.css("display"))return!1;if(e.isNode()){for(var t=e.parents(),r=0;r<t.length;r++){{var i=t[r],a=i.css("visibility"),n=i.css("display");parseFloat(i.css("opacity"))}if("visible"!==a||"element"!==n)return!1}return!0}if(e.isEdge()){var o=e.source(),s=e.target();return o.visible()&&s.visible()}}},hidden:function(){var e=this[0];return e?!e.visible():void 0},effectiveOpacity:function(){var e=this[0];if(e){for(var t=e._private.style.opacity.value,r=e.parents(),i=0;i<r.length;i++){var a=r[i],n=a._private.style.opacity.value;t=n*t}return t}},transparent:function(){var e=this[0];return e?0===e.effectiveOpacity():void 0},isFullAutoParent:function(){var e=this[0];if(e){var t="auto"===e._private.style.width.value,r="auto"===e._private.style.height.value;return e.isParent()&&t&&r}}}),e.elesfn.style=e.elesfn.css,e.elesfn.renderedStyle=e.elesfn.renderedCss,e.elesfn.removeStyle=e.elesfn.removeCss}(cytoscape),function(e){"use strict";function t(e){return function(){var t=arguments;if(2===t.length){var r=t[0],i=t[1];this.bind(e.event,r,i)}else if(1===t.length){var i=t[0];this.bind(e.event,i)}else if(0===t.length){for(var a=0;a<this.length;a++){var n=this[a];(!e.ableField||n._private[e.ableField])&&(n._private[e.field]=e.value)}this.updateStyle(),this.trigger(e.event)}return this}}function r(r){e.elesfn[r.field]=function(){var e=this[0];return e?e._private[r.field]:void 0},e.elesfn[r.on]=t({event:r.on,field:r.field,ableField:r.ableField,value:!0}),e.elesfn[r.off]=t({event:r.off,field:r.field,ableField:r.ableField,value:!1})}r({field:"locked",on:"lock",off:"unlock"}),r({field:"grabbable",on:"grabify",off:"ungrabify"}),r({field:"selected",ableField:"selectable",on:"select",off:"unselect"}),r({field:"selectable",on:"selectify",off:"unselectify"}),e.elesfn.grabbed=function(){var e=this[0];return e?e._private.grabbed:void 0},r({field:"active",on:"activate",off:"unactivate"}),e.elesfn.inactive=function(){var e=this[0];return e?!e._private.active:void 0}}(cytoscape),function(e){"use strict";function t(t){return function(r){for(var i=[],a=this._private.cy,n=0;n<this.length;n++){{var o=this[n];o._private[t.attr]}src&&i.push(src)}return new e.Collection(a,i).filter(r)}}function r(t){return function(r){var i=[],a=this._private.cy,n=t||{};e.is.string(r)&&(r=a.$(r));for(var o=r.connectedEdges(),s=this._private.ids,l=0;l<o.length;l++){var c,u=o[l],p=u._private.data;if(n.thisIs){var d=p[n.thisIs];c=s[d]}else c=s[p.source]||s[p.target];c&&i.push(u)}return new e.Collection(a,i)}}function i(t){var r={codirected:!1};return t=e.util.extend({},r,t),function(r){for(var i=this._private.cy,a=[],n=this.edges(),o=t,s=0;s<n.length;s++)for(var l=n[s],c=l.source()[0],u=c.id(),p=l.target()[0],d=p.id(),h=c._private.edges,v=0;v<h.length;v++){var g=h[v],f=g._private.data,y=f.target,m=f.source,b=y===d&&m===u,x=u===y&&d===m;(o.codirected&&b||!o.codirected&&(b||x))&&a.push(g)}return new e.Collection(i,a).filter(r)}}e.fn.eles({roots:function(t){for(var r=this,i=[],a=0;a<r.length;a++){var n=r[a];if(n.isNode()){var o=n.connectedEdges('[target = "'+n.id()+'"][source != "'+n.id()+'"]').length>0;o||i.push(n)}}return new e.Collection(this._private.cy,i).filter(t)},forwardNodes:function(t){for(var r=this,i=[],a=0;a<r.length;a++){var n=r[a],o=n.id();if(n.isNode())for(var s=n._private.edges,l=0;l<s.length;l++){var c=s[l],u=c._private.data.source,p=c._private.data.target;u===o&&p!==o&&i.push(c.target()[0])}}return new e.Collection(this._private.cy,i).filter(t)},backwardNodes:function(t){for(var r=this,i=[],a=0;a<r.length;a++){var n=r[a],o=n.id();if(n.isNode())for(var s=n._private.edges,l=0;l<s.length;l++){var c=s[l],u=c._private.data.source,p=c._private.data.target;p===o&&u!==o&&i.push(c.source()[0])}}return new e.Collection(this._private.cy,i).filter(t)}}),e.fn.eles({neighborhood:function(t){for(var r=[],i=this._private.cy,a=this.nodes(),n=0;n<a.length;n++)for(var o=a[n],s=o.connectedEdges(),l=0;l<s.length;l++){var c=s[l],u=c.connectedNodes().not(o);u.length>0&&r.push(u[0]),r.push(c[0])}return new e.Collection(i,r).filter(t)},closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),e.fn.eles({source:function(t){var r,i=this[0];return i&&(r=i._private.source),new e.Collection(this.cy(),r).filter(t)},target:function(t){var r,i=this[0];return i&&(r=i._private.target),new e.Collection(this.cy(),r).filter(t)},sources:t({attr:"source"}),targets:t({attr:"target"})}),e.fn.eles({edgesWith:r(),edgesTo:r({thisIs:"source"})}),e.fn.eles({connectedEdges:function(t){for(var r=[],i=this._private.cy,a=this,n=0;n<a.length;n++){var o=a[n];if(o.isNode())for(var s=o._private.edges,l=0;l<s.length;l++){var c=s[l];r.push(c)}}return new e.Collection(i,r).filter(t)},connectedNodes:function(t){for(var r=[],i=this._private.cy,a=this,n=0;n<a.length;n++){var o=a[n];o.isEdge()&&(r.push(o.source()[0]),r.push(o.target()[0]))}return new e.Collection(i,r).filter(t)},parallelEdges:i(),codirectedEdges:i({codirected:!0})})}(cytoscape),function(e){"use strict";e.Minheap=function(t,r,i){return new e.Heap(t,r,e.Heap.minHeapComparator,i)},e.Maxheap=function(t,r,i){return new e.Heap(t,r,e.Heap.maxHeapComparator,i)},e.Heap=function(t,r,i,a){if("undefined"!=typeof i&&"undefined"!=typeof r){"undefined"==typeof a&&(a=e.Heap.idFn);var n,o,s,l=[],c={},u=[],p=0;for(r=this.getArgumentAsCollection(r,t),s=r.length,p=0;s>p;p+=1){if(l.push(a.call(t,r[p],p,r)),n=r[p].id(),c.hasOwnProperty(n))throw"ERROR: Multiple items with the same id found: "+n;c[n]=p,u.push(n)}for(this._private={cy:t,heap:l,pointers:c,elements:u,comparator:i,extractor:a,length:s},p=Math.floor(s/2);p>=0;p-=1)o=this.heapify(p);return o}},e.Heap.idFn=function(e){return e.id()},e.Heap.minHeapComparator=function(e,t){return e>=t},e.Heap.maxHeapComparator=function(e,t){return t>=e},e.Heap.prototype.size=function(){return this._private.length},e.Heap.prototype.getArgumentAsCollection=function(t,r){var i;if("undefined"==typeof r&&(r=this._private.cy),e.is.elementOrCollection(t))i=t;else{for(var a=[],n=[].concat.apply([],[t]),o=0;o<n.length;o++){var s=n[o],l=r.getElementById(s);l.length>0&&a.push(l)}i=new e.Collection(r,a)}return i},e.Heap.prototype.isHeap=function(){var e,t,r,i,a,n=this._private.heap,o=n.length,s=this._private.comparator;for(e=0;o>e;e+=1)if(t=2*e+1,r=t+1,i=o>t?s(n[t],n[e]):!0,a=o>r?s(n[r],n[e]):!0,!i||!a)return!1;return!0},e.Heap.prototype.heapSwap=function(e,t){var r=this._private.heap,i=this._private.pointers,a=this._private.elements,n=r[e],o=a[e],s=a[e],l=a[t];r[e]=r[t],a[e]=a[t],i[s]=t,i[l]=e,r[t]=n,a[t]=o},e.Heap.prototype.heapify=function(e,t){var r,i,a,n,o,s,l,c=0,u=!1;for("undefined"==typeof t&&(t=!0),r=this._private.heap,c=r.length,s=this._private.comparator,i=e;!u;)t?(a=2*i+1,n=a+1,o=i,c>a&&!s(r[a],r[o])&&(o=a),c>n&&!s(r[n],r[o])&&(o=n),u=o===i,u||(this.heapSwap(o,i),i=o)):(l=Math.floor((i-1)/2),o=i,u=0>l||s(r[o],r[l]),u||(this.heapSwap(o,l),i=l))},e.Heap.prototype.insert=function(e){var t,r,i,a,n,o=this.getArgumentAsCollection(e),s=o.length;for(n=0;s>n;n+=1){if(t=o[n],r=this._private.heap.length,i=this._private.extractor(t),a=t.id(),this._private.pointers.hasOwnProperty(a))throw"ERROR: Multiple items with the same id found: "+a;this._private.heap.push(i),this._private.elements.push(a),this._private.pointers[a]=r,this.heapify(r,!1)}this._private.length=this._private.heap.length},e.Heap.prototype.getValueById=function(e){if(this._private.pointers.hasOwnProperty(e)){var t=this._private.pointers[e];return this._private.heap[t]}},e.Heap.prototype.contains=function(e){for(var t=this.getArgumentAsCollection(e),r=0;r<t.length;r+=1){var i=t[r].id();if(!this._private.pointers.hasOwnProperty(i))return!1}return!0},e.Heap.prototype.top=function(){return this._private.length>0?{value:this._private.heap[0],id:this._private.elements[0]}:void 0},e.Heap.prototype.pop=function(){if(this._private.length>0){var e,t,r,i=this.top(),a=this._private.length-1;return this.heapSwap(0,a),e=this._private.elements[a],t=this._private.heap[a],r=e,this._private.heap.pop(),this._private.elements.pop(),this._private.length=this._private.heap.length,delete this._private.pointers[r],this.heapify(0),i}},e.Heap.prototype.findDirectionHeapify=function(e){var t=Math.floor((e-1)/2),r=this._private.heap,i=0>t||this._private.comparator(r[e],r[t]);this.heapify(e,i)},e.Heap.prototype.edit=function(t,r){for(var i=this.getArgumentAsCollection(t),a=0;a<i.length;a+=1){var n=i[a].id(),o=this._private.pointers[n],s=this._private.heap[o];e.is.number(r)?this._private.heap[o]=r:e.is.fn(r)&&(this._private.heap[o]=r.call(this._private.cy,s,o)),this.findDirectionHeapify(o)}},e.Heap.prototype.delete=function(e){for(var t=this.getArgumentAsCollection(e),r=0;r<t.length;r+=1){var i,a,n,o=t[r].id(),s=this._private.pointers[o],l=this._private.length-1;s!==l&&this.heapSwap(s,l),i=this._private.elements[l],a=this._private.heap[l],n=i,this._private.heap.pop(),this._private.elements.pop(),this._private.length=this._private.heap.length,delete this._private.pointers[n],this.findDirectionHeapify(s)}return a}}(cytoscape),function(e){"use strict";function t(e){t.CANVAS_LAYERS=5,t.SELECT_BOX=0,t.DRAG=2,t.NODE=4,t.BUFFER_COUNT=2,this.options=e,this.data={select:[void 0,void 0,void 0,void 0,0],renderer:this,cy:e.cy,container:e.cy.container(),canvases:new Array(t.CANVAS_LAYERS),canvasNeedsRedraw:new Array(t.CANVAS_LAYERS),bufferCanvases:new Array(t.BUFFER_COUNT)},this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},this.timeoutData={panTimeout:null},this.dragData={possibleDragElements:[]},this.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},this.zoomData={freeToZoom:!1,lastPointerX:null},this.redraws=0,this.bindings=[],this.data.canvasContainer=document.createElement("div");var r=this.data.canvasContainer.style;r.position="absolute",r.zIndex="0",this.data.container.appendChild(this.data.canvasContainer);for(var i=0;i<t.CANVAS_LAYERS;i++)this.data.canvases[i]=document.createElement("canvas"),this.data.canvases[i].style.position="absolute",this.data.canvases[i].setAttribute("data-id","layer"+i),this.data.canvases[i].style.zIndex=String(t.CANVAS_LAYERS-i),this.data.canvasContainer.appendChild(this.data.canvases[i]),this.data.canvasNeedsRedraw[i]=!1;this.data.canvases[t.NODE].setAttribute("data-id","layer"+t.NODE+"-node"),this.data.canvases[t.SELECT_BOX].setAttribute("data-id","layer"+t.SELECT_BOX+"-selectbox"),this.data.canvases[t.DRAG].setAttribute("data-id","layer"+t.DRAG+"-drag");for(var i=0;i<t.BUFFER_COUNT;i++)this.data.bufferCanvases[i]=document.createElement("canvas"),this.data.bufferCanvases[i].style.position="absolute",this.data.bufferCanvases[i].setAttribute("data-id","buffer"+i),this.data.bufferCanvases[i].style.zIndex=String(-i-1),this.data.bufferCanvases[i].style.visibility="hidden",this.data.canvasContainer.appendChild(this.data.bufferCanvases[i]);this.hideEdgesOnViewport=e.hideEdgesOnViewport,this.load()}t.panOrBoxSelectDelay=400,t.isTouch=e.is.touch(),t.prototype.notify=function(e){switch(e.type){case"destroy":return void this.destroy();case"add":case"remove":case"load":this.updateNodesCache(),this.updateEdgesCache();break;case"viewport":this.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;break;case"style":this.updateCachedZSortedEles()}this.data.canvasNeedsRedraw[t.DRAG]=!0,this.data.canvasNeedsRedraw[t.NODE]=!0,this.redraw()},t.prototype.destroy=function(){this.destroyed=!0;for(var e=0;e<this.bindings.length;e++){var t=this.bindings[e],r=t;r.target.removeEventListener(r.event,r.handler,r.useCapture)}};for(var r in e.math)t.prototype[r]=e.math[r];e("renderer","canvas",t)}(cytoscape),function(e){"use strict";var t=e("renderer","canvas"),r=t.prototype,i=t.arrowShapes={};t.arrowShapeHeight=.3,i.arrow={_points:[-.15,-.3,0,0,.15,-.3],collide:function(t,r,a,n,o,s,l,c){var u=i.arrow._points;return e.math.pointInsidePolygon(t,r,u,a,n,o,s,l,c)},roughCollide:function(t,r,a,n,o,s){return"undefined"==typeof i.arrow._farthestPointSqDistance&&(i.arrow._farthestPointSqDistance=e.math.findMaxSqDistanceToOrigin(i.arrow._points)),e.math.checkInBoundingCircle(t,r,i.arrow._farthestPointSqDistance,0,o,s,a,n)},draw:function(e){for(var t=i.arrow._points,r=0;r<t.length/2;r++)e.lineTo(t[2*r],t[2*r+1])},spacing:function(){return 0},gap:function(e){return 2*e._private.style.width.pxValue}},i.triangle=i.arrow,i.none={collide:function(){return!1},roughCollide:function(){return!1},draw:function(){},spacing:function(){return 0},gap:function(){return 0}},i.circle={_baseRadius:.15,collide:function(e,t,r,a,n,o,s,l){if(n!=o){var c=Math.asin(s[1]/Math.sqrt(s[0]*s[0]+s[1]*s[1])),u=(Math.cos(-c),Math.sin(-c),(o+l)/(n+l));return t/=u,a/=u,Math.pow(r-e,2)+Math.pow(a-t,2)<=Math.pow((n+l)*i.circle._baseRadius,2)}return Math.pow(r-e,2)+Math.pow(a-t,2)<=Math.pow((n+l)*i.circle._baseRadius,2)},roughCollide:function(){return!0},draw:function(e){e.arc(0,0,i.circle._baseRadius,0,2*Math.PI,!1)},spacing:function(e){return r.getArrowWidth(e._private.style.width.pxValue)*i.circle._baseRadius},gap:function(e){return 2*e._private.style.width.pxValue}},i.inhibitor={_points:[-.25,0,-.25,-.1,.25,-.1,.25,0],collide:function(t,r,a,n,o,s,l,c){var u=i.inhibitor._points;return e.math.pointInsidePolygon(t,r,u,a,n,o,s,l,c)},roughCollide:function(t,r,a,n,o,s){return"undefined"==typeof i.inhibitor._farthestPointSqDistance&&(i.inhibitor._farthestPointSqDistance=e.math.findMaxSqDistanceToOrigin(i.inhibitor._points)),e.math.checkInBoundingCircle(t,r,i.inhibitor._farthestPointSqDistance,0,o,s,a,n)},draw:function(e){for(var t=i.inhibitor._points,r=0;r<t.length/2;r++)e.lineTo(t[2*r],t[2*r+1])},spacing:function(){return 4},gap:function(){return 4}},i.square={_points:[-.12,0,.12,0,.12,-.24,-.12,-.24],collide:function(t,r,a,n,o,s,l,c){var u=i.square._points;return e.math.pointInsidePolygon(t,r,u,a,n,o,s,l,c)},roughCollide:function(t,r,a,n,o,s){return"undefined"==typeof i.square._farthestPointSqDistance&&(i.square._farthestPointSqDistance=e.math.findMaxSqDistanceToOrigin(i.square._points)),e.math.checkInBoundingCircle(t,r,i.square._farthestPointSqDistance,0,o,s,a,n)},draw:function(e){for(var t=i.square._points,r=0;r<t.length/2;r++)e.lineTo(t[2*r],t[2*r+1])},spacing:function(){return 0},gap:function(e){return 2*e._private.style.width.pxValue}},i.diamond={_points:[-.14,-.14,0,-.28,.14,-.14,0,0],collide:function(t,r,a,n,o,s,l,c){var u=i.diamond._points;return e.math.pointInsidePolygon(t,r,u,a,n,o,s,l,c)},roughCollide:function(t,r,a,n,o,s){return"undefined"==typeof i.diamond._farthestPointSqDistance&&(i.diamond._farthestPointSqDistance=e.math.findMaxSqDistanceToOrigin(i.diamond._points)),e.math.checkInBoundingCircle(t,r,i.diamond._farthestPointSqDistance,0,o,s,a,n)},draw:function(e){e.lineTo(-.14,-.14),e.lineTo(0,-.28),e.lineTo(.14,-.14),e.lineTo(0,0)},spacing:function(){return 0},gap:function(e){return 2*e._private.style.width.pxValue}},i.tee=i.inhibitor}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.getCachedNodes=function(){var e=this.data,t=this.data.cy;return void 0==e.cache&&(e.cache={}),void 0==e.cache.cachedNodes&&(e.cache.cachedNodes=t.nodes()),e.cache.cachedNodes},t.prototype.updateNodesCache=function(){var e=this.data,t=this.data.cy;void 0==e.cache&&(e.cache={}),e.cache.cachedNodes=t.nodes()},t.prototype.getCachedEdges=function(){var e=this.data,t=this.data.cy;return void 0==e.cache&&(e.cache={}),void 0==e.cache.cachedEdges&&(e.cache.cachedEdges=t.edges()),e.cache.cachedEdges},t.prototype.updateEdgesCache=function(){var e=this.data,t=this.data.cy;void 0==e.cache&&(e.cache={}),e.cache.cachedEdges=t.edges()}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.projectIntoViewport=function(e,t){var r=(this.data.container,this.findContainerPageCoords()),i=r[0],a=r[1],n=e-i,o=t-a;return n-=this.data.cy.pan().x,o-=this.data.cy.pan().y,n/=this.data.cy.zoom(),o/=this.data.cy.zoom(),[n,o]},t.prototype.findContainerPageCoords=function(){for(var e=0,t=0,r=this.data.container,i=r;null!=i;){var a=window.getComputedStyle(i);if("number"==typeof i.offsetLeft){var n=a.getPropertyValue("position").toLowerCase(),o=parseFloat(a.getPropertyValue("border-left-width")),s=parseFloat(a.getPropertyValue("border-top-width"));if(e+=i.offsetLeft,t+=i.offsetTop,("static"!==n||i===r)&&(e+=o,t+=s),"fixed"===n){e+=window.scrollX,t+=window.scrollY;break}if(i==document.body||i==document.header)break}i&&(i=i.offsetParent)}return[e,t]},t.prototype.findNearestElement=function(r,i,a){for(var n=this.data,o=this.getCachedNodes(),s=this.getCachedEdges(),l=[],c=t.isTouch,u=this.data.cy.zoom(),p=(c?256:32)/u,d=(c?16:0)/u,h=0;h<o.length;h++)t.nodeShapes[this.getNodeShape(o[h])].checkPointRough(r,i,o[h]._private.style["border-width"].pxValue/2,this.getNodeWidth(o[h])+d,this.getNodeHeight(o[h])+d,o[h]._private.position.x,o[h]._private.position.y)&&t.nodeShapes[this.getNodeShape(o[h])].checkPoint(r,i,o[h]._private.style["border-width"].pxValue/2,this.getNodeWidth(o[h])+d,this.getNodeHeight(o[h])+d,o[h]._private.position.x,o[h]._private.position.y)&&(a?0!=o[h]._private.style.opacity.value&&"visible"==o[h]._private.style.visibility.value&&"element"==o[h]._private.style.display.value&&l.push(o[h]):l.push(o[h]));for(var v,h=0;h<s.length;h++){var g=s[h],f=g._private.rscratch;if(v=!1,"self"==f.edgeType)(e.math.inBezierVicinity(r,i,f.startX,f.startY,f.cp2ax,f.cp2ay,f.selfEdgeMidX,f.selfEdgeMidY,Math.pow(g._private.style.width.pxValue/2,2))&&Math.pow(s[h]._private.style.width.pxValue/2,2)+p>e.math.sqDistanceToQuadraticBezier(r,i,f.startX,f.startY,f.cp2ax,f.cp2ay,f.selfEdgeMidX,f.selfEdgeMidY)||e.math.inBezierVicinity(r,i,f.selfEdgeMidX,f.selfEdgeMidY,f.cp2cx,f.cp2cy,f.endX,f.endY,Math.pow(s[h]._private.style.width.pxValue/2,2))&&Math.pow(s[h]._private.style.width.pxValue/2,2)+p>e.math.sqDistanceToQuadraticBezier(r,i,f.selfEdgeMidX,f.selfEdgeMidY,f.cp2cx,f.cp2cy,f.endX,f.endY))&&(v=!0);else if("haystack"==f.edgeType){var y=s[h].target()[0],m=y.position(),b=s[h].source()[0],x=b.position(),w=x.x+f.source.x,_=x.y+f.source.y,S=m.x+f.target.x,E=m.y+f.target.y;e.math.inLineVicinity(r,i,w,_,S,E,2*s[h]._private.style.width.pxValue)&&Math.pow(s[h]._private.style.width.pxValue/2,2)+p>e.math.sqDistanceToFiniteLine(r,i,w,_,S,E)&&(v=!0)}else"straight"==f.edgeType?e.math.inLineVicinity(r,i,f.startX,f.startY,f.endX,f.endY,2*s[h]._private.style.width.pxValue)&&Math.pow(s[h]._private.style.width.pxValue/2,2)+p>e.math.sqDistanceToFiniteLine(r,i,f.startX,f.startY,f.endX,f.endY)&&(v=!0):"bezier"==f.edgeType&&e.math.inBezierVicinity(r,i,f.startX,f.startY,f.cp2x,f.cp2y,f.endX,f.endY,Math.pow(s[h]._private.style.width.pxValue/2,2))&&Math.pow(s[h]._private.style.width.pxValue/2,2)+p>e.math.sqDistanceToQuadraticBezier(r,i,f.startX,f.startY,f.cp2x,f.cp2y,f.endX,f.endY)&&(v=!0);if(l.length&&l[l.length-1]==s[h]||(t.arrowShapes[s[h]._private.style["source-arrow-shape"].value].roughCollide(r,i,s[h]._private.rscratch.arrowStartX,s[h]._private.rscratch.arrowStartY,this.getArrowWidth(s[h]._private.style.width.pxValue),this.getArrowHeight(s[h]._private.style.width.pxValue),[s[h]._private.rscratch.arrowStartX-s[h].source()[0]._private.position.x,s[h]._private.rscratch.arrowStartY-s[h].source()[0]._private.position.y],0)&&t.arrowShapes[s[h]._private.style["source-arrow-shape"].value].collide(r,i,s[h]._private.rscratch.arrowStartX,s[h]._private.rscratch.arrowStartY,this.getArrowWidth(s[h]._private.style.width.pxValue),this.getArrowHeight(s[h]._private.style.width.pxValue),[s[h]._private.rscratch.arrowStartX-s[h].source()[0]._private.position.x,s[h]._private.rscratch.arrowStartY-s[h].source()[0]._private.position.y],0)||t.arrowShapes[s[h]._private.style["target-arrow-shape"].value].roughCollide(r,i,s[h]._private.rscratch.arrowEndX,s[h]._private.rscratch.arrowEndY,this.getArrowWidth(s[h]._private.style.width.pxValue),this.getArrowHeight(s[h]._private.style.width.pxValue),[s[h]._private.rscratch.arrowEndX-s[h].target()[0]._private.position.x,s[h]._private.rscratch.arrowEndY-s[h].target()[0]._private.position.y],0)&&t.arrowShapes[s[h]._private.style["target-arrow-shape"].value].collide(r,i,s[h]._private.rscratch.arrowEndX,s[h]._private.rscratch.arrowEndY,this.getArrowWidth(s[h]._private.style.width.pxValue),this.getArrowHeight(s[h]._private.style.width.pxValue),[s[h]._private.rscratch.arrowEndX-s[h].target()[0]._private.position.x,s[h]._private.rscratch.arrowEndY-s[h].target()[0]._private.position.y],0))&&(v=!0),v)if(a){var M=n.cy.getElementById(s[h]._private.data.source),P=n.cy.getElementById(s[h]._private.data.target);0!=s[h]._private.style.opacity.value&&"visible"==s[h]._private.style.visibility.value&&"element"==s[h]._private.style.display.value&&0!=M._private.style.opacity.value&&"visible"==M._private.style.visibility.value&&"element"==M._private.style.display.value&&0!=P._private.style.opacity.value&&"visible"==P._private.style.visibility.value&&"element"==P._private.style.display.value&&l.push(s[h])}else l.push(s[h])}return l.sort(this.zOrderSort),l.length>0?l[l.length-1]:null},t.prototype.getAllInBox=function(r,i,a,n){var o=(this.data,this.getCachedNodes()),s=this.getCachedEdges(),l=[],c=Math.min(r,a),u=Math.max(r,a),p=Math.min(i,n),d=Math.max(i,n);r=c,a=u,i=p,n=d;for(var h,v=0;v<o.length;v++){var g=o[v]._private.position,f=this.getNodeShape(o[v]),y=this.getNodeWidth(o[v]),m=this.getNodeHeight(o[v]),b=o[v]._private.style["border-width"].pxValue/2,x=t.nodeShapes[f];x.intersectBox(r,i,a,n,y,m,g.x,g.y,b)&&l.push(o[v])}for(var v=0;v<s.length;v++){var w=s[v]._private.rscratch;if("self"==s[v]._private.rscratch.edgeType&&((h=e.math.boxInBezierVicinity(r,i,a,n,w.startX,w.startY,w.cp2ax,w.cp2ay,w.endX,w.endY,s[v]._private.style.width.pxValue))&&(2==h||1==h&&e.math.checkBezierInBox(r,i,a,n,w.startX,w.startY,w.cp2ax,w.cp2ay,w.endX,w.endY,s[v]._private.style.width.pxValue))||(h=e.math.boxInBezierVicinity(r,i,a,n,w.startX,w.startY,w.cp2cx,w.cp2cy,w.endX,w.endY,s[v]._private.style.width.pxValue))&&(2==h||1==h&&e.math.checkBezierInBox(r,i,a,n,w.startX,w.startY,w.cp2cx,w.cp2cy,w.endX,w.endY,s[v]._private.style.width.pxValue)))&&l.push(s[v]),"bezier"==w.edgeType&&(h=e.math.boxInBezierVicinity(r,i,a,n,w.startX,w.startY,w.cp2x,w.cp2y,w.endX,w.endY,s[v]._private.style.width.pxValue))&&(2==h||1==h&&e.math.checkBezierInBox(r,i,a,n,w.startX,w.startY,w.cp2x,w.cp2y,w.endX,w.endY,s[v]._private.style.width.pxValue))&&l.push(s[v]),"straight"==w.edgeType&&(h=e.math.boxInBezierVicinity(r,i,a,n,w.startX,w.startY,.5*w.startX+.5*w.endX,.5*w.startY+.5*w.endY,w.endX,w.endY,s[v]._private.style.width.pxValue))&&(2==h||1==h&&e.math.checkStraightEdgeInBox(r,i,a,n,w.startX,w.startY,w.endX,w.endY,s[v]._private.style.width.pxValue))&&l.push(s[v]),"haystack"==w.edgeType){var _=s[v].target()[0],S=_.position(),E=s[v].source()[0],M=E.position(),P=M.x+w.source.x,k=M.y+w.source.y,C=S.x+w.target.x,D=S.y+w.target.y,N=P>=r&&a>=P&&k>=i&&n>=k,T=C>=r&&a>=C&&D>=i&&n>=D;
N&&T&&l.push(s[v])}}return l},t.prototype.getNodeWidth=function(e){return e.width()},t.prototype.getNodeHeight=function(e){return e.height()},t.prototype.getNodeShape=function(e){var t=e._private.style.shape.value;return e.isParent()?"rectangle"===t||"roundrectangle"===t?t:"rectangle":t},t.prototype.getNodePadding=function(e){var t=e._private.style["padding-left"].pxValue,r=e._private.style["padding-right"].pxValue,i=e._private.style["padding-top"].pxValue,a=e._private.style["padding-bottom"].pxValue;return isNaN(t)&&(t=0),isNaN(r)&&(r=0),isNaN(i)&&(i=0),isNaN(a)&&(a=0),{left:t,right:r,top:i,bottom:a}},t.prototype.zOrderSort=e.Collection.zIndexSort,t.prototype.updateCachedZSortedEles=function(){this.getCachedZSortedEles(!0)},t.prototype.getCachedZSortedEles=function(e){var t=this.lastZOrderCachedNodes,r=this.lastZOrderCachedEdges,i=this.getCachedNodes(),a=this.getCachedEdges(),n=[];if(!e&&t&&r&&t===i&&r===a)n=this.cachedZSortedEles;else{for(var o=0;o<i.length;o++)n.push(i[o]);for(var o=0;o<a.length;o++)n.push(a[o]);n.sort(this.zOrderSort),this.cachedZSortedEles=n}return this.lastZOrderCachedNodes=i,this.lastZOrderCachedEdges=a,n},t.prototype.projectBezier=function(t){function r(e){n.push({x:i(e[0],e[2],e[4],.05),y:i(e[1],e[3],e[5],.05)}),n.push({x:i(e[0],e[2],e[4],.25),y:i(e[1],e[3],e[5],.25)}),n.push({x:i(e[0],e[2],e[4],.4),y:i(e[1],e[3],e[5],.4)}),n.push({x:i(e[0],e[2],e[4],.5),y:i(e[1],e[3],e[5],.5)}),n.push({x:i(e[0],e[2],e[4],.6),y:i(e[1],e[3],e[5],.6)}),n.push({x:i(e[0],e[2],e[4],.75),y:i(e[1],e[3],e[5],.75)}),n.push({x:i(e[0],e[2],e[4],.95),y:i(e[1],e[3],e[5],.95)})}var i=e.math.qbezierAt,a=t._private.rscratch,n=t._private.rstyle.bezierPts=[];"self"===a.edgeType?(r([a.startX,a.startY,a.cp2ax,a.cp2ay,a.selfEdgeMidX,a.selfEdgeMidY]),r([a.selfEdgeMidX,a.selfEdgeMidY,a.cp2cx,a.cp2cy,a.endX,a.endY])):"bezier"===a.edgeType&&r([a.startX,a.startY,a.cp2x,a.cp2y,a.endX,a.endY])},t.prototype.recalculateNodeLabelProjection=function(e){var t=e._private.style.content.strValue;if(t&&!t.match(/\s+/)){var r,i,a=e.outerWidth(),n=e.outerHeight(),o=e._private.position,s=e._private.style["text-halign"].strValue,l=e._private.style["text-valign"].strValue,c=e._private.rscratch,u=e._private.rstyle;switch(s){case"left":r=o.x-a/2;break;case"right":r=o.x+a/2;break;case"center":default:r=o.x}switch(l){case"top":i=o.y-n/2;break;case"bottom":i=o.y+n/2;break;case"middle":default:i=o.y}c.labelX=r,c.labelY=i,u.labelX=r,u.labelY=i,this.applyLabelDimensions(e)}},t.prototype.recalculateEdgeLabelProjection=function(t){var r=t._private.style.content.strValue;if(r&&!r.match(/\s+/)){var i,a,n,o,s=t._private.rscratch,l=t._private.rstyle;if("self"==s.edgeType)n=s.selfEdgeMidX,o=s.selfEdgeMidY;else if("straight"==s.edgeType)n=(s.startX+s.endX)/2,o=(s.startY+s.endY)/2;else if("bezier"==s.edgeType)n=e.math.qbezierAt(s.startX,s.cp2x,s.endX,.5),o=e.math.qbezierAt(s.startY,s.cp2y,s.endY,.5);else if("haystack"==s.edgeType){var c=t.source().position(),u=t.target().position();n=(c.x+s.source.x+u.x+s.target.x)/2,o=(c.y+s.source.y+u.y+s.target.y)/2}i=n,a=o,s.labelX=i,s.labelY=a,l.labelX=i,l.labelY=a,this.applyLabelDimensions(t)}},t.prototype.applyLabelDimensions=function(e){var t=e._private.rscratch,r=e._private.rstyle,i=this.getLabelText(e),a=this.calculateLabelDimensions(e,i);r.labelWidth=a.width,t.labelWidth=a.width,r.labelHeight=a.height,t.labelHeight=a.height},t.prototype.getLabelText=function(e){var t=e._private.style,r=e._private.style.content.strValue,i=t["text-transform"].value;return"none"==i||("uppercase"==i?r=r.toUpperCase():"lowercase"==i&&(r=r.toLowerCase())),r},t.prototype.calculateLabelDimensions=function(e,t){var r=e._private.style,i=r["font-style"].strValue,a=r["font-size"].pxValue+"px",n=r["font-family"].strValue,o=r["font-variant"].strValue,s=r["font-weight"].strValue,l=e._private.rscratch,c=[i,a,n,o,s].join("$$$"),u=l.labelDimCache||(l.labelDimCache={});if(u[c])return u[c];var p=this.labelCalcDiv;p||(p=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(p));var d=p.style;return d.fontFamily=n,d.fontStyle=i,d.fontSize=a,d.fontVariant=o,d.fontWeight=s,d.position="absolute",d.left="-9999px",d.top="-9999px",d.zIndex="-1",d.visibility="hidden",d.padding="0",d.lineHeight="1",p.innerText=t,u[c]={width:p.clientWidth,height:p.clientHeight}},t.prototype.recalculateRenderedStyle=function(){this.recalculateEdgeProjections(),this.recalculateLabelProjections()},t.prototype.recalculateLabelProjections=function(){for(var e=this.getCachedNodes(),t=0;t<e.length;t++)this.recalculateNodeLabelProjection(e[t]);for(var r=this.getCachedEdges(),t=0;t<r.length;t++)this.recalculateEdgeLabelProjection(r[t])},t.prototype.recalculateEdgeProjections=function(){var e=this.getCachedEdges();this.findEdgeControlPoints(e)},t.prototype.findEdgeControlPoints=function(r){for(var i,a={},n=this.data.cy,o=[],s=[],l=0;l<r.length;l++){var c=r[l],u=c._private.style;if("none"!==u.display.value)if("haystack"!==u["curve-style"].value){var p=c._private.data.source,d=c._private.data.target;i=p>d?d+"-"+p:p+"-"+d,void 0==a[i]&&(a[i]=[]),a[i].push(c),o.push(i)}else s.push(c)}for(var h,v,g,f,y,m,b,x,w,_,S,E,M,P,k=0;k<o.length;k++){if(i=o[k],h=n.getElementById(a[i][0]._private.data.source),v=n.getElementById(a[i][0]._private.data.target),g=h._private.position,f=v._private.position,y=this.getNodeWidth(h),m=this.getNodeHeight(h),b=this.getNodeWidth(v),x=this.getNodeHeight(v),w=t.nodeShapes[this.getNodeShape(h)],_=t.nodeShapes[this.getNodeShape(v)],S=h._private.style["border-width"].pxValue,E=v._private.style["border-width"].pxValue,P=!1,a[i].length>1){var C=w.intersectLine(g.x,g.y,y,m,f.x,f.y,S/2),D=_.intersectLine(f.x,f.y,b,x,g.x,g.y,E/2),N=({x:(C[0]+D[0])/2,y:(C[1]+D[1])/2},{x1:C[0],x2:D[0],y1:C[1],y2:D[1]}),T=D[1]-C[1],I=D[0]-C[0],z=Math.sqrt(I*I+T*T),B={x:I,y:T},R={x:B.x/z,y:B.y/z};M={x:-R.y,y:R.x},(_.checkPoint(C[0],C[1],E/2,b,x,f.x,f.y)||w.checkPoint(D[0],D[1],S/2,y,m,g.x,g.y))&&(M={},P=!0)}for(var c,X,l=0;l<a[i].length;l++){c=a[i][l],X=c._private.rscratch;var Y=X.lastEdgeIndex,V=l,L=X.lastNumEdges,A=a[i].length,O=X.lastSrcCtlPtX,q=g.x,F=X.lastSrcCtlPtY,$=g.y,j=X.lastSrcCtlPtW,H=h.outerWidth(),W=X.lastSrcCtlPtH,Z=h.outerHeight(),G=X.lastTgtCtlPtX,U=f.x,K=X.lastTgtCtlPtY,J=f.y,Q=X.lastTgtCtlPtW,et=v.outerWidth(),tt=X.lastTgtCtlPtH,rt=v.outerHeight();if(X.badBezier=P?!0:!1,O!==q||F!==$||j!==H||W!==Z||G!==U||K!==J||Q!==et||tt!==rt||Y!==V||L!==A){X.lastSrcCtlPtX=q,X.lastSrcCtlPtY=$,X.lastSrcCtlPtW=H,X.lastSrcCtlPtH=Z,X.lastTgtCtlPtX=U,X.lastTgtCtlPtY=J,X.lastTgtCtlPtW=et,X.lastTgtCtlPtH=rt,X.lastEdgeIndex=V,X.lastNumEdges=A;var it=c._private.style,at=it["control-point-step-size"].pxValue,nt=void 0!==it["control-point-distance"]?it["control-point-distance"].pxValue:void 0,ot=it["control-point-weight"].value;if(h.id()==v.id())X.edgeType="self",X.cp2ax=g.x,X.cp2ay=g.y-(1+Math.pow(m,1.12)/100)*at*(l/3+1),X.cp2cx=h._private.position.x-(1+Math.pow(y,1.12)/100)*at*(l/3+1),X.cp2cy=g.y,X.selfEdgeMidX=(X.cp2ax+X.cp2cx)/2,X.selfEdgeMidY=(X.cp2ay+X.cp2cy)/2;else if(a[i].length%2==1&&l==Math.floor(a[i].length/2))X.edgeType="straight";else{var st=(.5-a[i].length/2+l)*at,lt=void 0!==nt?e.math.signum(st)*nt:void 0,ct=void 0!==lt?lt:st,ut={x:N.x1*(1-ot)+N.x2*ot,y:N.y1*(1-ot)+N.y2*ot};X.edgeType="bezier",X.cp2x=ut.x+M.x*ct,X.cp2y=ut.y+M.y*ct}this.findEndpoints(c);var pt=!e.is.number(X.startX)||!e.is.number(X.startY),dt=!e.is.number(X.arrowStartX)||!e.is.number(X.arrowStartY),ht=!e.is.number(X.endX)||!e.is.number(X.endY),vt=!e.is.number(X.arrowEndX)||!e.is.number(X.arrowEndY),gt=3,ft=this.getArrowWidth(c._private.style.width.pxValue)*t.arrowShapeHeight,yt=gt*ft,mt=e.math.distance({x:X.cp2x,y:X.cp2y},{x:X.startX,y:X.startY}),bt=yt>mt,xt=e.math.distance({x:X.cp2x,y:X.cp2y},{x:X.endX,y:X.endY}),wt=yt>xt;if("bezier"===X.edgeType){var _t=!1;if(pt||dt||bt){_t=!0;var St={x:X.cp2x-g.x,y:X.cp2y-g.y},Et=Math.sqrt(St.x*St.x+St.y*St.y),Mt={x:St.x/Et,y:St.y/Et},Pt=Math.max(y,m),kt={x:X.cp2x+2*Mt.x*Pt,y:X.cp2y+2*Mt.y*Pt},Ct=w.intersectLine(g.x,g.y,y,m,kt.x,kt.y,S/2);bt?(X.cp2x=X.cp2x+Mt.x*(yt-mt),X.cp2y=X.cp2y+Mt.y*(yt-mt)):(X.cp2x=Ct[0]+Mt.x*yt,X.cp2y=Ct[1]+Mt.y*yt)}if(ht||vt||wt){_t=!0;var St={x:X.cp2x-f.x,y:X.cp2y-f.y},Et=Math.sqrt(St.x*St.x+St.y*St.y),Mt={x:St.x/Et,y:St.y/Et},Pt=Math.max(y,m),kt={x:X.cp2x+2*Mt.x*Pt,y:X.cp2y+2*Mt.y*Pt},Dt=_.intersectLine(f.x,f.y,b,x,kt.x,kt.y,E/2);wt?(X.cp2x=X.cp2x+Mt.x*(yt-xt),X.cp2y=X.cp2y+Mt.y*(yt-xt)):(X.cp2x=Dt[0]+Mt.x*yt,X.cp2y=Dt[1]+Mt.y*yt)}_t&&this.findEndpoints(c)}this.projectBezier(c)}}}for(var l=0;l<s.length;l++){var c=s[l],Nt=c._private.rscratch,Tt=.8;if(!Nt.haystack){var h=c.source()[0],g=h.position(),y=h.width(),m=h.height(),It=Math.min(y,m)*Tt*.5,zt=2*Math.random()*Math.PI;Nt.source={x:Math.round(It*Math.cos(zt)),y:Math.round(It*Math.sin(zt))};var v=c.target()[0],f=v.position(),b=v.width(),x=v.height(),Bt=Math.min(b,x)*Tt*.5,zt=2*Math.random()*Math.PI;Nt.target={x:Math.round(Bt*Math.cos(zt)),y:Math.round(Bt*Math.sin(zt))},Nt.edgeType="haystack",Nt.haystack=!0}}return a},t.prototype.findEndpoints=function(r){var i,a=r.source()[0],n=r.target()[0],o=(a._private.position,n._private.position,r._private.style["target-arrow-shape"].value),s=r._private.style["source-arrow-shape"].value,l=n._private.style["border-width"].pxValue,c=a._private.style["border-width"].pxValue,u=r._private.rscratch;if("self"==r._private.rscratch.edgeType){var p=[u.cp2cx,u.cp2cy];i=t.nodeShapes[this.getNodeShape(n)].intersectLine(n._private.position.x,n._private.position.y,this.getNodeWidth(n),this.getNodeHeight(n),p[0],p[1],l/2);var d=e.math.shortenIntersection(i,p,t.arrowShapes[o].spacing(r)),h=e.math.shortenIntersection(i,p,t.arrowShapes[o].gap(r));u.endX=h[0],u.endY=h[1],u.arrowEndX=d[0],u.arrowEndY=d[1];var p=[u.cp2ax,u.cp2ay];i=t.nodeShapes[this.getNodeShape(a)].intersectLine(a._private.position.x,a._private.position.y,this.getNodeWidth(a),this.getNodeHeight(a),p[0],p[1],c/2);var v=e.math.shortenIntersection(i,p,t.arrowShapes[s].spacing(r)),g=e.math.shortenIntersection(i,p,t.arrowShapes[s].gap(r));u.startX=g[0],u.startY=g[1],u.arrowStartX=v[0],u.arrowStartY=v[1]}else if("straight"==u.edgeType){i=t.nodeShapes[this.getNodeShape(n)].intersectLine(n._private.position.x,n._private.position.y,this.getNodeWidth(n),this.getNodeHeight(n),a.position().x,a.position().y,l/2),u.noArrowPlacement=0==i.length?!0:!1;var d=e.math.shortenIntersection(i,[a.position().x,a.position().y],t.arrowShapes[o].spacing(r)),h=e.math.shortenIntersection(i,[a.position().x,a.position().y],t.arrowShapes[o].gap(r));u.endX=h[0],u.endY=h[1],u.arrowEndX=d[0],u.arrowEndY=d[1],i=t.nodeShapes[this.getNodeShape(a)].intersectLine(a._private.position.x,a._private.position.y,this.getNodeWidth(a),this.getNodeHeight(a),n.position().x,n.position().y,c/2),u.noArrowPlacement=0==i.length?!0:!1;var v=e.math.shortenIntersection(i,[n.position().x,n.position().y],t.arrowShapes[s].spacing(r)),g=e.math.shortenIntersection(i,[n.position().x,n.position().y],t.arrowShapes[s].gap(r));u.startX=g[0],u.startY=g[1],u.arrowStartX=v[0],u.arrowStartY=v[1]}else if("bezier"==u.edgeType){var p=[u.cp2x,u.cp2y];i=t.nodeShapes[this.getNodeShape(n)].intersectLine(n._private.position.x,n._private.position.y,this.getNodeWidth(n),this.getNodeHeight(n),p[0],p[1],l/2);var d=e.math.shortenIntersection(i,p,t.arrowShapes[o].spacing(r)),h=e.math.shortenIntersection(i,p,t.arrowShapes[o].gap(r));u.endX=h[0],u.endY=h[1],u.arrowEndX=d[0],u.arrowEndY=d[1],i=t.nodeShapes[this.getNodeShape(a)].intersectLine(a._private.position.x,a._private.position.y,this.getNodeWidth(a),this.getNodeHeight(a),p[0],p[1],c/2);var v=e.math.shortenIntersection(i,p,t.arrowShapes[s].spacing(r)),g=e.math.shortenIntersection(i,p,t.arrowShapes[s].gap(r));u.startX=g[0],u.startY=g[1],u.arrowStartX=v[0],u.arrowStartY=v[1]}else if(u.isArcEdge)return},t.prototype.findEdges=function(e){for(var t=this.getCachedEdges(),r={},i=[],a=0;a<e.length;a++)r[e[a]._private.data.id]=e[a];for(var a=0;a<t.length;a++)(r[t[a]._private.data.source]||r[t[a]._private.data.target])&&i.push(t[a]);return i},t.prototype.getArrowWidth=function(e){return Math.max(Math.pow(13.37*e,.9),29)},t.prototype.getArrowHeight=function(e){return Math.max(Math.pow(13.37*e,.9),29)}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.drawEdge=function(e,t,r){if(t.visible()){var i=t._private.rscratch;if(!i.badBezier){var a,n,o,s;o=a=t.source()[0],s=n=t.target()[0];var l=s.position(),c=o.position();if("visible"==t._private.style.visibility.value&&"element"==t._private.style.display.value&&"visible"==a._private.style.visibility.value&&"element"==a._private.style.display.value&&"visible"==n._private.style.visibility.value&&"element"==n._private.style.display.value){var u=t._private.style["overlay-padding"].pxValue,p=t._private.style["overlay-opacity"].value,d=t._private.style["overlay-color"].value;if(r?(e.strokeStyle="rgba( "+d[0]+", "+d[1]+", "+d[2]+", "+p+" )",e.lineCap="round","self"==t._private.rscratch.edgeType&&(e.lineCap="butt")):(e.strokeStyle="rgba("+t._private.style["line-color"].value[0]+","+t._private.style["line-color"].value[1]+","+t._private.style["line-color"].value[2]+","+t._private.style.opacity.value+")",e.lineCap="butt"),!(t._private.style.width.pxValue<=0)){var h=t._private.style.width.pxValue+(r?2*u:0),v=r?"solid":t._private.style["line-style"].value;if(e.lineWidth=h,this.findEndpoints(t),"haystack"==i.edgeType)this.drawStyledEdge(t,e,[i.source.x+c.x,i.source.y+c.y,i.target.x+l.x,i.target.y+l.y],v,h);else if("self"==i.edgeType){var g=t._private.rscratch;this.drawStyledEdge(t,e,[g.startX,g.startY,g.cp2ax,g.cp2ay,g.selfEdgeMidX,g.selfEdgeMidY],v,h),this.drawStyledEdge(t,e,[g.selfEdgeMidX,g.selfEdgeMidY,g.cp2cx,g.cp2cy,g.endX,g.endY],v,h)}else if("straight"==i.edgeType){var f=n._private.position.x-a._private.position.x,y=n._private.position.y-a._private.position.y,m=t._private.rscratch.endX-t._private.rscratch.startX,b=t._private.rscratch.endY-t._private.rscratch.startY;if(0>f*m+y*b)t._private.rscratch.straightEdgeTooShort=!0;else{var g=t._private.rscratch;this.drawStyledEdge(t,e,[g.startX,g.startY,g.endX,g.endY],v,h),t._private.rscratch.straightEdgeTooShort=!1}}else{var g=t._private.rscratch;this.drawStyledEdge(t,e,[g.startX,g.startY,g.cp2x,g.cp2y,g.endX,g.endY],v,h)}t._private.rscratch.noArrowPlacement!==!0&&void 0!==t._private.rscratch.startX&&this.drawArrowheads(e,t,r)}}}}};var r=function(e,t){var r=Math.sqrt(Math.pow(e[4]-e[0],2)+Math.pow(e[5]-e[1],2));r+=Math.sqrt(Math.pow((e[4]+e[0])/2-e[2],2)+Math.pow((e[5]+e[1])/2-e[3],2));var i,a=Math.ceil(r/t);if(!(a>0))return null;i=new Array(2*a);for(var n=0;a>n;n++){var o=n/a;i[2*n]=e[0]*(1-o)*(1-o)+2*e[2]*(1-o)*o+e[4]*o*o,i[2*n+1]=e[1]*(1-o)*(1-o)+2*e[3]*(1-o)*o+e[5]*o*o}return i},i=function(e,t){var r,i=Math.sqrt(Math.pow(e[2]-e[0],2)+Math.pow(e[3]-e[1],2)),a=Math.ceil(i/t);if(!(a>0))return null;r=new Array(2*a);for(var n=[e[2]-e[0],e[3]-e[1]],o=0;a>o;o++){var s=o/a;r[2*o]=n[0]*s+e[0],r[2*o+1]=n[1]*s+e[1]}return r};t.prototype.drawStyledEdge=function(e,t,a,n,o){var s=this.data.cy,l=s.zoom();if("solid"==n)t.beginPath(),t.moveTo(a[0],a[1]),6==a.length?t.quadraticCurveTo(a[2],a[3],a[4],a[5]):t.lineTo(a[2],a[3]),t.stroke();else if("dotted"==n){var c;if(c=6==a.length?r(a,16,!0):i(a,16,!0),!c)return;var u=Math.max(1.6*o,3.4)*l,p=2*u,d=2*u;p=Math.max(p,1),d=Math.max(d,1);var h=this.createBuffer(p,d),v=h[1];v.setTransform(1,0,0,1,0,0),v.clearRect(0,0,p,d),v.fillStyle=t.strokeStyle,v.beginPath(),v.arc(p/2,d/2,.5*u,0,2*Math.PI,!1),v.fill(),t.beginPath();for(var g=0;g<c.length/2;g++)t.drawImage(h[0],c[2*g]-p/2/l,c[2*g+1]-d/2/l,p/l,d/l)}else if("dashed"==n){var c;if(c=6==a.length?r(a,14,!0):i(a,14,!0),!c)return;var p=2*o*l,d=7.8*l;p=Math.max(p,1),d=Math.max(d,1);var h=this.createBuffer(p,d),v=h[1];v.setTransform(1,0,0,1,0,0),v.clearRect(0,0,p,d),t.strokeStyle&&(v.strokeStyle=t.strokeStyle),v.lineWidth=o*s.zoom(),v.beginPath(),v.moveTo(p/2,.2*d),v.lineTo(p/2,.8*d),v.stroke();var f,y,m=!1;4==a.length?(f=[a[2]-a[0],a[3]-c[1]],y=Math.acos((0*f[0]+-1*f[1])/Math.sqrt(f[0]*f[0]+f[1]*f[1])),f[0]<0&&(y=-y+2*Math.PI)):6==a.length&&(m=!0);for(var g=0;g<c.length/2;g++){var b=g/Math.max(c.length/2-1,1);m&&(f=[2*(1-b)*(a[2]-a[0])+2*b*(a[4]-a[2]),2*(1-b)*(a[3]-a[1])+2*b*(a[5]-a[3])],y=Math.acos((0*f[0]+-1*f[1])/Math.sqrt(f[0]*f[0]+f[1]*f[1])),f[0]<0&&(y=-y+2*Math.PI)),t.translate(c[2*g],c[2*g+1]),t.rotate(y),t.translate(-p/2/l,-d/2/l),t.drawImage(h[0],0,0,p/l,d/l),t.translate(p/2/l,d/2/l),t.rotate(-y),t.translate(-c[2*g],-c[2*g+1])}}else this.drawStyledEdge(e,t,a,"solid",o)},t.prototype.drawArrowheads=function(e,t,r){if(!r){var i,a,n=t._private.rscratch.arrowStartX,o=t._private.rscratch.arrowStartY,s=t.source().position();if(i=n-s.x,a=o-s.y,!(isNaN(n)||isNaN(o)||isNaN(i)||isNaN(a))){var l=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",e.lineWidth=t._private.style.width.pxValue,e.fillStyle="white",this.drawArrowShape(e,t._private.style["source-arrow-shape"].value,n,o,i,a),e.globalCompositeOperation=l,e.fillStyle="rgba("+t._private.style["source-arrow-color"].value[0]+","+t._private.style["source-arrow-color"].value[1]+","+t._private.style["source-arrow-color"].value[2]+","+t._private.style.opacity.value+")",this.drawArrowShape(e,t._private.style["source-arrow-shape"].value,n,o,i,a)}var c=t._private.rscratch.arrowEndX,u=t._private.rscratch.arrowEndY,p=t.target().position();if(i=c-p.x,a=u-p.y,!(isNaN(c)||isNaN(u)||isNaN(i)||isNaN(a))){var l=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",e.lineWidth=t._private.style.width.pxValue,e.fillStyle="white",this.drawArrowShape(e,t._private.style["target-arrow-shape"].value,c,u,i,a),e.globalCompositeOperation=l,e.fillStyle="rgba("+t._private.style["target-arrow-color"].value[0]+","+t._private.style["target-arrow-color"].value[1]+","+t._private.style["target-arrow-color"].value[2]+","+t._private.style.opacity.value+")",this.drawArrowShape(e,t._private.style["target-arrow-shape"].value,c,u,i,a)}}},t.prototype.drawArrowShape=function(e,r,i,a,n,o){var s=Math.asin(o/Math.sqrt(n*n+o*o));0>n?s+=Math.PI/2:s=-(Math.PI/2+s),e.translate(i,a),e.moveTo(0,0),e.rotate(-s);var l=this.getArrowWidth(e.lineWidth);e.scale(l,l),e.beginPath(),t.arrowShapes[r].draw(e),e.closePath(),e.fill(),e.scale(1/l,1/l),e.rotate(s),e.translate(-i,-a)}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas"),r={},i=9e3;t.prototype.getCachedImage=function(e,t){if(r[e]&&r[e].image)return r[e].keepTime=i,r[e].image;var a=r[e];return void 0==a&&(r[e]=new Object,r[e].image=new Image,r[e].image.onload=t,r[e].image.src=e,r[e].keepTime=i,a=r[e]),a.image},t.prototype.swapCachedImage=function(e){if(r[e]){if(r[e].image&&r[e].image.complete){var t=r[e].image,i=document.createElement("canvas");return i.width=t.width,i.height=t.height,i.getContext("2d").drawImage(t,0,0),r[e].image=i,r[e].swappedWithCanvas=!0,i}return null}return null},t.prototype.updateImageCaches=function(){for(var e in r)r[e].keepTime<=0?(void 0!=r[e].image&&(r[e].image.src=void 0,r[e].image=void 0),r[e]=void 0):r[e]-=1},t.prototype.drawImage=function(e,t,r,i,a,n,o){o.widthScale=.5,o.heightScale=.5,o.rotate=n;canvas.drawImage(o,t,r)},t.prototype.drawInscribedImage=function(e,r,i){var a=this,n=(this.data.cy._private.zoom,i._private.position.x),o=i._private.position.y,s=this.getNodeWidth(i),l=this.getNodeHeight(i);e.save(),t.nodeShapes[a.getNodeShape(i)].drawPath(e,n,o,s,l),e.clip();var c=[r.width,r.height];e.drawImage(r,n-c[0]/2,o-c[1]/2,c[0],c[1]),e.restore(),i._private.style["border-width"].value>0&&e.stroke()}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.drawEdgeText=function(e,t){var r=t._private.style.content.strValue;if(t.visible()&&r&&!r.match(/\s+/)&&(!this.hideEdgesOnViewport||!(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning))){var i=t._private.style["font-size"].pxValue*t.cy().zoom(),a=t._private.style["min-zoomed-font-size"].pxValue;if(!(a>i)){e.textAlign="center",e.textBaseline="middle",this.recalculateEdgeLabelProjection(t);var n=t._private.rscratch;this.drawText(e,t,n.labelX,n.labelY)}}},t.prototype.drawNodeText=function(e,t){var r=t._private.style.content.strValue;if(t.visible()&&r&&!r.match(/\s+/)){var i=t._private.style["font-size"].pxValue*t.cy().zoom(),a=t._private.style["min-zoomed-font-size"].pxValue;if(!(a>i)){this.recalculateNodeLabelProjection(t);var n=t._private.style["text-halign"].strValue,o=t._private.style["text-valign"].strValue,s=t._private.rscratch;switch(n){case"left":e.textAlign="right";break;case"right":e.textAlign="left";break;case"center":default:e.textAlign="center"}switch(o){case"top":e.textBaseline="bottom";break;case"bottom":e.textBaseline="top";break;case"center":default:e.textBaseline="middle"}this.drawText(e,t,s.labelX,s.labelY)}}},t.prototype.setupTextStyle=function(e,t){var r=t.effectiveOpacity(),i=t._private.style,a=i["font-style"].strValue,n=i["font-size"].pxValue+"px",o=i["font-family"].strValue,s=(i["font-variant"].strValue,i["font-weight"].strValue);e.font=a+" "+s+" "+n+" "+o;var l=String(i.content.value),c=i["text-transform"].value;return"none"==c||("uppercase"==c?l=l.toUpperCase():"lowercase"==c&&(l=l.toLowerCase())),e.lineJoin="round",e.fillStyle="rgba("+i.color.value[0]+","+i.color.value[1]+","+i.color.value[2]+","+i["text-opacity"].value*i.opacity.value*r+")",e.strokeStyle="rgba("+i["text-outline-color"].value[0]+","+i["text-outline-color"].value[1]+","+i["text-outline-color"].value[2]+","+i["text-opacity"].value*i.opacity.value*r+")",l},t.prototype.drawText=function(e,t,r,i){var a=t._private.style,n=t.effectiveOpacity();if(0!==n){var o=this.setupTextStyle(e,t);if(void 0!=o&&!isNaN(r)&&!isNaN(i)){var s=2*a["text-outline-width"].value;s>0&&(e.lineWidth=s,e.strokeText(o,r,i)),e.fillText(""+o,r,i)}}}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.drawNode=function(e,r,i){var a,n;if(r.visible()){var o=r.effectiveOpacity();if(0!==o)if(a=this.getNodeWidth(r),n=this.getNodeHeight(r),e.lineWidth=r._private.style["border-width"].pxValue,void 0!==i&&i){var s=r._private.style["overlay-padding"].pxValue,l=r._private.style["overlay-opacity"].value,c=r._private.style["overlay-color"].value;l>0&&(e.fillStyle="rgba( "+c[0]+", "+c[1]+", "+c[2]+", "+l+" )",t.nodeShapes.roundrectangle.draw(e,r._private.position.x,r._private.position.y,a+2*s,n+2*s))}else{e.fillStyle="rgba("+r._private.style["background-color"].value[0]+","+r._private.style["background-color"].value[1]+","+r._private.style["background-color"].value[2]+","+r._private.style["background-opacity"].value*r._private.style.opacity.value*o+")",e.strokeStyle="rgba("+r._private.style["border-color"].value[0]+","+r._private.style["border-color"].value[1]+","+r._private.style["border-color"].value[2]+","+r._private.style["border-opacity"].value*r._private.style.opacity.value*o+")",e.lineJoin="miter";var u=r._private.style["background-image"].value[2]||r._private.style["background-image"].value[1];if(void 0!=u){var p=this,d=this.getCachedImage(u,function(){p.data.canvasNeedsRedraw[t.NODE]=!0,p.data.canvasNeedsRedraw[t.DRAG]=!0,p.swapCachedImage(u),p.redraw()});0==d.complete?(t.nodeShapes[p.getNodeShape(r)].drawPath(e,r._private.position.x,r._private.position.y,a,n),e.stroke(),e.fillStyle="#555555",e.fill()):this.drawInscribedImage(e,d,r)}else t.nodeShapes[this.getNodeShape(r)].draw(e,r._private.position.x,r._private.position.y,a,n);this.drawPie(e,r),r._private.style["border-width"].pxValue>0&&(t.nodeShapes[this.getNodeShape(r)].drawPath(e,r._private.position.x,r._private.position.y,a,n),e.stroke())}}},t.prototype.hasPie=function(t){t=t[0];for(var r=1;r<=e.style.pieBackgroundN;r++){var i=t._private.style["pie-"+r+"-background-size"].value;if(i>0)return!0}return!1},t.prototype.drawPie=function(r,i){if(i=i[0],this.hasPie(i)){var a=this.getNodeWidth(i),n=this.getNodeHeight(i),o=i._private.position.x,s=i._private.position.y,l=Math.min(a,n)/2,c=0;r.save(),t.nodeShapes[this.getNodeShape(i)].drawPath(r,o,s,a,n),r.clip();for(var u=1;u<=e.style.pieBackgroundN;u++){{var p=i._private.style["pie-"+u+"-background-size"].value,d=i._private.style["pie-"+u+"-background-color"],h=p/100,v=1.5*Math.PI+2*Math.PI*c,g=2*Math.PI*h,f=v+g;o+l*Math.cos(v),s+l*Math.sin(v)}0===p||c>=1||c+h>1||(r.beginPath(),r.moveTo(o,s),r.arc(o,s,l,v,f),r.closePath(),r.fillStyle="rgb("+d.value[0]+","+d.value[1]+","+d.value[2]+")",r.fill(),c+=h)}r.restore()}}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.getPixelRatio=function(){var e=this.data.canvases[0],t=e.getContext("2d"),r=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,i="undefined"!=typeof InstallTrigger;return i?1:(window.devicePixelRatio||1)/r},t.prototype.matchCanvasSize=function(e){var r,i=this.data,a=e.clientWidth,n=e.clientHeight,o=a,s=n,l=this.getPixelRatio();o*=l,s*=l;var c=i.canvasContainer;c.style.width=a+"px",c.style.height=n+"px";for(var u=0;u<t.CANVAS_LAYERS;u++)r=i.canvases[u],(r.width!==o||r.height!==s)&&(r.width=o,r.height=s,r.style.width=a+"px",r.style.height=n+"px");for(var u=0;u<t.BUFFER_COUNT;u++)r=i.bufferCanvases[u],(r.width!==o||r.height!==s)&&(r.width=o,r.height=s)},t.prototype.renderTo=function(e,t,r){this.redraw({forcedContext:e,forcedZoom:t,forcedPan:r,drawAllLayers:!0})},t.prototype.redraw=function(e){function r(){function e(e){e.setTransform(1,0,0,1,0,0),!i&&e.clearRect(0,0,e.canvas.width,e.canvas.height),a||(e.translate(g.x,g.y),e.scale(h,h)),o&&e.translate(o.x,o.y),n&&e.scale(n,n)}function r(e,t){for(var r=[],i=[],a=0;a<e.length;a++)n=e[a],n.isNode()?i.push(n):n.isEdge()&&!w&&(s.drawEdge(t,n),r.push(n));for(var a=0;a<r.length&&!w;a++)n=r[a],s.drawEdgeText(t,n),s.drawEdge(t,n,!0);for(var a=0;a<i.length;a++){var n=i[a];s.drawNode(t,n),s.drawNodeText(t,n),s.drawNode(t,n,!0)}}var p=(s.getCachedNodes(),s.getCachedEdges());i||s.matchCanvasSize(u.container);var d=c.zoom(),h=void 0!==n?n:d,v=c.pan(),g={x:v.x,y:v.y};o&&(g=o),h*=l,g.x*=l,g.y*=l;var f,m,b,x;if(u.canvasNeedsRedraw[t.DRAG]||u.canvasNeedsRedraw[t.NODE]||a){var w=s.hideEdgesOnViewport&&(s.pinching||s.hoverData.dragging||s.swipePanning||s.data.wheelZooming||s.hoverData.draggingEles);w||s.findEdgeControlPoints(p),f=s.getCachedZSortedEles(),m=[],b=[];for(var _=0;_<f.length;_++)x=f[_],x._private.rscratch.inDragLayer?m.push(x):b.push(x)}if(u.canvasNeedsRedraw[t.NODE]||a){var S=i||u.canvases[t.NODE].getContext("2d");e(S),r(b,S),a||(u.canvasNeedsRedraw[t.NODE]=!1)}if(u.canvasNeedsRedraw[t.DRAG]||a){var S=i||u.canvases[t.DRAG].getContext("2d");e(S),r(m,S),a||(u.canvasNeedsRedraw[t.DRAG]=!1)}if(u.canvasNeedsRedraw[t.SELECT_BOX]&&!a){var S=i||u.canvases[t.SELECT_BOX].getContext("2d");e(S);var E=c.style()._private.coreStyle;if(1==u.select[4]){var d=u.cy.zoom(),M=E["selection-box-border-width"].value/d;S.lineWidth=M,S.fillStyle="rgba("+E["selection-box-color"].value[0]+","+E["selection-box-color"].value[1]+","+E["selection-box-color"].value[2]+","+E["selection-box-opacity"].value+")",S.fillRect(u.select[0],u.select[1],u.select[2]-u.select[0],u.select[3]-u.select[1]),M>0&&(S.strokeStyle="rgba("+E["selection-box-border-color"].value[0]+","+E["selection-box-border-color"].value[1]+","+E["selection-box-border-color"].value[2]+","+E["selection-box-opacity"].value+")",S.strokeRect(u.select[0],u.select[1],u.select[2]-u.select[0],u.select[3]-u.select[1]))}if(u.bgActivePosistion){var d=u.cy.zoom(),P=u.bgActivePosistion;S.fillStyle="rgba("+E["active-bg-color"].value[0]+","+E["active-bg-color"].value[1]+","+E["active-bg-color"].value[2]+","+E["active-bg-opacity"].value+")",S.beginPath(),S.arc(P.x,P.y,E["active-bg-size"].pxValue/d,0,2*Math.PI),S.fill()}a||(u.canvasNeedsRedraw[t.SELECT_BOX]=!1)}var k=+new Date;void 0===s.averageRedrawTime&&(s.averageRedrawTime=k-y),s.averageRedrawTime=s.averageRedrawTime/2+(k-y)/2}e=e||{};var i=e.forcedContext,a=e.drawAllLayers,n=e.forcedZoom,o=e.forcedPan,s=this,l=this.getPixelRatio(),c=s.data.cy,u=s.data;clearTimeout(this.redrawTimeout),void 0===this.averageRedrawTime&&(this.averageRedrawTime=0);var p=1e3/60,d=1e3,h=this.averageRedrawTime;h=Math.max(p,h),h=Math.min(h,d),void 0===this.lastDrawTime&&(this.lastDrawTime=0);var v=+new Date,g=v-this.lastDrawTime,f=g>=h;if(!i){if(!f)return clearTimeout(this.redrawTimeout),void(this.redrawTimeout=setTimeout(function(){s.redraw()},h));this.lastDrawTime=v}var y=v;i?r():setTimeout(r,0),i||s.initrender||(s.initrender=!0,c.trigger("initrender"))}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.drawPolygonPath=function(e,t,r,i,a,n){e.translate(t,r),e.scale(i/2,a/2),e.beginPath(),e.moveTo(n[0],n[1]);for(var o=1;o<n.length/2;o++)e.lineTo(n[2*o],n[2*o+1]);e.closePath(),e.scale(2/i,2/a),e.translate(-t,-r)},t.prototype.drawPolygon=function(e,t,r,i,a,n){this.drawPolygonPath(e,t,r,i,a,n),e.fill()},t.prototype.drawRoundRectanglePath=function(t,r,i,a,n){var o=a/2,s=n/2,l=e.math.getRoundRectangleRadius(a,n);t.translate(r,i),t.beginPath(),t.moveTo(0,-s),t.arcTo(o,-s,o,0,l),t.arcTo(o,s,0,s,l),t.arcTo(-o,s,-o,0,l),t.arcTo(-o,-s,0,-s,l),t.lineTo(0,-s),t.closePath(),t.translate(-r,-i)},t.prototype.drawRoundRectangle=function(e,t,r,i,a,n){this.drawRoundRectanglePath(e,t,r,i,a,n),e.fill()}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.createBuffer=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,[r,r.getContext("2d")]},t.prototype.png=function(e){var t=this.data,r=t.cy,i=r.boundingBox(),a=e.full?Math.ceil(i.w):this.data.container.clientWidth,n=e.full?Math.ceil(i.h):this.data.container.clientHeight,o=document.createElement("canvas");o.width=a,o.height=n,o.style.width=a+"px",o.style.height=n+"px";var s=o.getContext("2d");return a>0&&n>0&&(s.clearRect(0,0,a,n),e.bg&&(s.fillStyle=e.bg,s.rect(0,0,a,n),s.fill()),s.globalCompositeOperation="source-over",this.redraw(e.full?{forcedContext:s,drawAllLayers:!0,forcedZoom:1,forcedPan:{x:-i.x1,y:-i.y1}}:{forcedContext:s,drawAllLayers:!0})),o.toDataURL("image/png")}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.registerBinding=function(e,t,r,i){this.bindings.push({target:e,event:t,handler:r,useCapture:i}),e.addEventListener(t,r,i)},t.prototype.load=function(){var r=this,i=function(e,t,r){if(!t)for(var i=e.parents(),a=0;a<i.size();a++)if(i[a]._private.selected)return;for(var n=e.descendants(),a=0;a<n.size();a++)if(t||!n[a]._private.selected){n[a]._private.rscratch.inDragLayer=!0,r.push(n[a]);for(var o=0;o<n[a]._private.edges.length;o++)n[a]._private.edges[o]._private.rscratch.inDragLayer=!0}},a=function(e,t){e._private.grabbed=!0,e._private.rscratch.inDragLayer=!0,t.push(e);for(var r=0;r<e._private.edges.length;r++)e._private.edges[r]._private.rscratch.inDragLayer=!0},n=function(e,t){for(var r=e;r.parent().nonempty();)r=r.parent()[0];if(r!=e||!t)for(var i=r.descendants().add(r),a=0;a<i.size();a++){i[a]._private.rscratch.inDragLayer=t;for(var n=0;n<i[a]._private.edges.length;n++)i[a]._private.edges[n]._private.rscratch.inDragLayer=t}};t.prototype.nodeIsDraggable=function(e){return 0!=e._private.style.opacity.value&&"visible"==e._private.style.visibility.value&&"element"==e._private.style.display.value&&!e._private.locked&&e._private.grabbable?!0:!1},r.registerBinding(window,"resize",function(){r.data.canvasNeedsRedraw[t.NODE]=!0,r.redraw()},!0),r.registerBinding(r.data.container,"contextmenu",function(e){e.preventDefault()});var o=function(){return 0!==r.data.select[4]};r.registerBinding(r.data.container,"mousedown",function(o){o.preventDefault(),r.hoverData.capture=!0,r.hoverData.which=o.which;var s=r.data.cy,l=r.projectIntoViewport(o.pageX,o.pageY),c=r.data.select,u=r.findNearestElement(l[0],l[1],!0),p=(r.hoverData.down,r.dragData.possibleDragElements),d=new e.Event("grab");if(3==o.which)r.hoverData.cxtStarted=!0,u&&(u.activate(),u.trigger(new e.Event(o,{type:"cxttapstart",cyPosition:{x:l[0],y:l[1]}})),r.hoverData.down=u),s.trigger(new e.Event(o,{type:"cxttapstart",cyPosition:{x:l[0],y:l[1]}})),r.hoverData.downTime=(new Date).getTime(),r.hoverData.cxtDragged=!1;
else if(1==o.which){if(u&&u.activate(),null!=u&&r.nodeIsDraggable(u)){if("nodes"==u._private.group&&0==u._private.selected&&(p=r.dragData.possibleDragElements=[],a(u,p),u.trigger(d),("auto"==u._private.style.width.value||"auto"==u._private.style.height.value)&&i(u,!0,p),n(u,!0)),"nodes"==u._private.group&&1==u._private.selected){p=r.dragData.possibleDragElements=[];for(var h=!1,v=s.$("node:selected"),g=0;g<v.length;g++)r.nodeIsDraggable(v[g])&&(a(v[g],p),h||(u.trigger(d),h=!0),("auto"==v[g]._private.style.width.value||"auto"==v[g]._private.style.height.value)&&i(v[g],!1,p),n(v[g],!0))}u.trigger(new e.Event(o,{type:"mousedown",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(o,{type:"tapstart",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(o,{type:"vmousedown",cyPosition:{x:l[0],y:l[1]}}))}else null==u&&s.trigger(new e.Event(o,{type:"mousedown",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(o,{type:"tapstart",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(o,{type:"vmousedown",cyPosition:{x:l[0],y:l[1]}}));if(r.hoverData.down=u,r.hoverData.downTime=(new Date).getTime(),null==u||u.isEdge()){c[4]=1;var f=Math.max(0,t.panOrBoxSelectDelay-(+new Date-r.hoverData.downTime));clearTimeout(r.bgActiveTimeout),r.bgActiveTimeout=setTimeout(function(){u&&u.unactivate(),r.data.bgActivePosistion={x:l[0],y:l[1]},r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,r.redraw()},f)}}c[0]=c[2]=l[0],c[1]=c[3]=l[1],r.redraw()},!1),r.registerBinding(window,"mousemove",e.util.throttle(function(i){var a=!1,n=r.hoverData.capture;if(!n){var o=r.findContainerPageCoords();if(!(i.pageX>o[0]&&i.pageX<o[0]+r.data.container.clientWidth&&i.pageY>o[1]&&i.pageY<o[1]+r.data.container.clientHeight))return}{var s=r.data.cy,l=r.projectIntoViewport(i.pageX,i.pageY),c=r.data.select,u=r.findNearestElement(l[0],l[1],!0),p=r.hoverData.last,d=r.hoverData.down,h=[l[0]-c[2],l[1]-c[3]],v=(r.getCachedNodes(),r.getCachedEdges(),r.dragData.possibleDragElements);i.shiftKey}if(a=!0,null!=u?u.trigger(new e.Event(i,{type:"mousemove",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(i,{type:"vmousemove",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(i,{type:"tapdrag",cyPosition:{x:l[0],y:l[1]}})):null==u&&s.trigger(new e.Event(i,{type:"mousemove",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(i,{type:"vmousemove",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(i,{type:"tapdrag",cyPosition:{x:l[0],y:l[1]}})),3===r.hoverData.which){var g=new e.Event(i,{type:"cxtdrag",cyPosition:{x:l[0],y:l[1]}});d?d.trigger(g):s.trigger(g),r.hoverData.cxtDragged=!0}else if(r.hoverData.dragging){if(a=!0,s.panningEnabled()&&s.userPanningEnabled()){var f={x:h[0]*s.zoom(),y:h[1]*s.zoom()};s.panBy(f)}l=r.projectIntoViewport(i.pageX,i.pageY)}else if(1==c[4]&&(null==d||d.isEdge())&&(!s.boxSelectionEnabled()||+new Date-r.hoverData.downTime>=t.panOrBoxSelectDelay)&&Math.abs(c[3]-c[1])+Math.abs(c[2]-c[0])<4&&s.panningEnabled()&&s.userPanningEnabled())r.hoverData.dragging=!0,c[4]=0;else{if(s.boxSelectionEnabled()&&Math.pow(c[2]-c[0],2)+Math.pow(c[3]-c[1],2)>7&&c[4]&&(clearTimeout(r.bgActiveTimeout),r.data.bgActivePosistion=void 0),d&&d.isEdge()&&d.active()&&d.unactivate(),u!=p&&(p&&p.trigger(new e.Event(i,{type:"mouseout",cyPosition:{x:l[0],y:l[1]}})),u&&u.trigger(new e.Event(i,{type:"mouseover",cyPosition:{x:l[0],y:l[1]}})),r.hoverData.last=u),d&&d.isNode()&&r.nodeIsDraggable(d)){r.dragData.didDrag=!0,r.hoverData.draggingEles=!0;var y=[];new e.Collection(s,v).positions(function(e,t){if(t.isNode()&&r.nodeIsDraggable(t)){var i=t.position();return{x:i.x+h[0],y:i.y+h[1]}}}),new e.Collection(s,y).trigger("drag"),c[2]==c[0]&&c[3]==c[1]&&(r.data.canvasNeedsRedraw[t.NODE]=!0),r.data.canvasNeedsRedraw[t.DRAG]=!0}s.boxSelectionEnabled()&&(r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0),a=!0}return c[2]=l[0],c[3]=l[1],r.redraw(),a?(i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault(),!1):void 0},1e3/30),!1),r.registerBinding(window,"mouseup",function(i){var a=r.hoverData.capture;if(a){r.hoverData.capture=!1;var o=r.data.cy,s=r.projectIntoViewport(i.pageX,i.pageY),l=r.data.select,c=r.findNearestElement(s[0],s[1],!0),u=(r.getCachedNodes(),r.getCachedEdges(),r.dragData.possibleDragElements),p=r.hoverData.down,d=i.shiftKey;if(r.data.bgActivePosistion=void 0,clearTimeout(r.bgActiveTimeout),r.hoverData.cxtStarted=!1,r.hoverData.draggingEles=!1,p&&p.unactivate(),3===r.hoverData.which){var h=new e.Event(i,{type:"cxttapend",cyPosition:{x:s[0],y:s[1]}});if(p?p.trigger(h):o.trigger(h),!r.hoverData.cxtDragged){var v=new e.Event(i,{type:"cxttap",cyPosition:{x:s[0],y:s[1]}});p?p.trigger(v):o.trigger(v)}r.hoverData.cxtDragged=!1,r.hoverData.which=null}else{if(null!=p||r.dragData.didDrag||Math.pow(l[2]-l[0],2)+Math.pow(l[3]-l[1],2)>7&&l[4]||r.hoverData.dragging||(o.$(":selected").unselect(),u.length>0&&(r.data.canvasNeedsRedraw[t.NODE]=!0),r.dragData.possibleDragElements=u=[]),null!=c?c.trigger(new e.Event(i,{type:"mouseup",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(i,{type:"tapend",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(i,{type:"vmouseup",cyPosition:{x:s[0],y:s[1]}})):null==c&&o.trigger(new e.Event(i,{type:"mouseup",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(i,{type:"tapend",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(i,{type:"vmouseup",cyPosition:{x:s[0],y:s[1]}})),Math.pow(l[2]-l[0],2)+Math.pow(l[3]-l[1],2)==0&&(null!=c?c.trigger(new e.Event(i,{type:"click",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(i,{type:"tap",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(i,{type:"vclick",cyPosition:{x:s[0],y:s[1]}})):null==c&&o.trigger(new e.Event(i,{type:"click",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(i,{type:"tap",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(i,{type:"vclick",cyPosition:{x:s[0],y:s[1]}}))),c!=p||r.dragData.didDrag){if(c==p&&null!=c&&c._private.grabbed){for(var g=o.$(":grabbed"),f=0;f<g.length;f++){var y=g[f];y._private.grabbed=!1;for(var m=y._private.edges,b=0;b<m.length;b++)m[b]._private.rscratch.inDragLayer=!1;n(y,!1)}g.trigger("free")}}else null!=c&&c._private.selectable&&("additive"===o.selectionType()||d?c.selected()?c.unselect():c.select():d||(o.$(":selected").unselect(),c.select()),n(c,!1),r.data.canvasNeedsRedraw[t.NODE]=!0);if(o.boxSelectionEnabled()&&Math.pow(l[2]-l[0],2)+Math.pow(l[3]-l[1],2)>7&&l[4]){for(var x=[],w=r.getAllInBox(l[0],l[1],l[2],l[3]),f=(new e.Event(i,{type:"select"}),0);f<w.length;f++)w[f]._private.selectable&&(u.push(w[f]),x.push(w[f]));var _=new e.Collection(o,x);"additive"===o.selectionType()?_.select():(d||o.$(":selected").unselect(),_.select()),w.length>0&&(r.data.canvasNeedsRedraw[t.NODE]=!0)}if(r.hoverData.dragging=!1,!l[4]){for(var f=0;f<u.length;f++)if("nodes"==u[f]._private.group){u[f]._private.rscratch.inDragLayer=!1;for(var m=u[f]._private.edges,b=0;b<m.length;b++)m[b]._private.rscratch.inDragLayer=!1;n(u[f],!1)}else"edges"==u[f]._private.group&&(u[f]._private.rscratch.inDragLayer=!1);p&&p.trigger("free"),r.data.canvasNeedsRedraw[t.DRAG]=!0,r.data.canvasNeedsRedraw[t.NODE]=!0}}l[4]=0,r.hoverData.down=null,r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,r.dragData.didDrag=!1,r.redraw()}},!1);var s=function(e){var i=r.data.cy,a=r.projectIntoViewport(e.pageX,e.pageY),n=[a[0]*i.zoom()+i.pan().x,a[1]*i.zoom()+i.pan().y];if(r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||o())return void e.preventDefault();if(i.panningEnabled()&&i.userPanningEnabled()&&i.zoomingEnabled()&&i.userZoomingEnabled()){e.preventDefault(),r.data.wheelZooming=!0,clearTimeout(r.data.wheelTimeout),r.data.wheelTimeout=setTimeout(function(){r.data.wheelZooming=!1,r.data.canvasNeedsRedraw[t.NODE]=!0,r.redraw()},150);var s=e.wheelDeltaY/1e3||e.wheelDelta/1e3||e.detail/-32||-e.deltaY/500;i.zoom({level:i.zoom()*Math.pow(10,s),renderedPosition:{x:n[0],y:n[1]}})}};r.registerBinding(r.data.container,"wheel",s,!0),r.registerBinding(r.data.container,"mousewheel",s,!0),r.registerBinding(r.data.container,"DOMMouseScroll",s,!0),r.registerBinding(r.data.container,"MozMousePixelScroll",function(){},!1),r.registerBinding(r.data.container,"mouseout",function(t){var i=r.projectIntoViewport(t.pageX,t.pageY);r.data.cy.trigger(new e.Event(t,{type:"mouseout",cyPosition:{x:i[0],y:i[1]}}))},!1),r.registerBinding(r.data.container,"mouseover",function(t){var i=r.projectIntoViewport(t.pageX,t.pageY);r.data.cy.trigger(new e.Event(t,{type:"mouseover",cyPosition:{x:i[0],y:i[1]}}))},!1);var l,c,u,p,d,h,v,g,f,y,m=r.data.container.clientWidth,b=r.data.container.clientHeight,x=function(e,t,r,i){return Math.sqrt((r-e)*(r-e)+(i-t)*(i-t))};r.registerBinding(r.data.container,"touchstart",function(o){clearTimeout(this.threeFingerSelectTimeout),o.target!==r.data.link&&o.preventDefault(),r.touchData.capture=!0,r.data.bgActivePosistion=void 0;var s=r.data.cy,w=r.getCachedNodes(),_=r.getCachedEdges(),S=r.touchData.now,E=r.touchData.earlier;if(o.touches[0]){var M=r.projectIntoViewport(o.touches[0].pageX,o.touches[0].pageY);S[0]=M[0],S[1]=M[1]}if(o.touches[1]){var M=r.projectIntoViewport(o.touches[1].pageX,o.touches[1].pageY);S[2]=M[0],S[3]=M[1]}if(o.touches[2]){var M=r.projectIntoViewport(o.touches[2].pageX,o.touches[2].pageY);S[4]=M[0],S[5]=M[1]}if(o.touches[1]){var P=function(e){for(var t=0;t<e.length;t++)e[t]._private.grabbed=!1,e[t]._private.rscratch.inDragLayer=!1,e[t].active()&&e[t].unactivate()};P(w),P(_);var k=r.findContainerPageCoords();f=k[1],g=k[0],l=o.touches[0].pageX-g,c=o.touches[0].pageY-f,u=o.touches[1].pageX-g,p=o.touches[1].pageY-f,y=l>=0&&m>=l&&u>=0&&m>=u&&c>=0&&b>=c&&p>=0&&b>=p;var C=s.pan(),D=s.zoom();if(d=x(l,c,u,p),h=[(l+u)/2,(c+p)/2],v=[(h[0]-C.x)/D,(h[1]-C.y)/D],100>d){var N=r.findNearestElement(S[0],S[1],!0),T=r.findNearestElement(S[2],S[3],!0);return N&&N.isNode()?(N.activate().trigger(new e.Event(o,{type:"cxttapstart",cyPosition:{x:S[0],y:S[1]}})),r.touchData.start=N):T&&T.isNode()?(T.activate().trigger(new e.Event(o,{type:"cxttapstart",cyPosition:{x:S[0],y:S[1]}})),r.touchData.start=T):(s.trigger(new e.Event(o,{type:"cxttapstart",cyPosition:{x:S[0],y:S[1]}})),r.touchData.start=null),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!0,r.touchData.cxtDragged=!1,r.data.bgActivePosistion=void 0,void r.redraw()}}if(o.touches[2]);else if(o.touches[1]);else if(o.touches[0]){var I=r.findNearestElement(S[0],S[1],!0);if(null!=I){if(I.activate(),r.touchData.start=I,"nodes"==I._private.group&&r.nodeIsDraggable(I)){var z=r.dragData.touchDragEles=[];if(a(I,z),I.trigger("grab"),I.selected()){z=r.dragData.touchDragEles=[];for(var B=s.$("node:selected"),R=0;R<B.length;R++){var X=B[R];if(r.nodeIsDraggable(X)){z.push(X),X._private.rscratch.inDragLayer=!0;for(var Y=X._private.edges,V=0;V<Y.length;V++)Y[V]._private.rscratch.inDragLayer=!0;("auto"==X._private.style.width.value||"auto"==X._private.style.height.value)&&i(X,!1,z),n(X,!0)}}}else("auto"==I._private.style.width.value||"auto"==I._private.style.height.value)&&i(I,!0,z),n(I,!0)}I.trigger(new e.Event(o,{type:"touchstart",cyPosition:{x:S[0],y:S[1]}})).trigger(new e.Event(o,{type:"tapstart",cyPosition:{x:S[0],y:S[1]}})).trigger(new e.Event(o,{type:"vmousdown",cyPosition:{x:S[0],y:S[1]}}))}null==I&&(s.trigger(new e.Event(o,{type:"touchstart",cyPosition:{x:S[0],y:S[1]}})).trigger(new e.Event(o,{type:"tapstart",cyPosition:{x:S[0],y:S[1]}})).trigger(new e.Event(o,{type:"vmousedown",cyPosition:{x:S[0],y:S[1]}})),r.data.bgActivePosistion={x:M[0],y:M[1]},r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0);for(var L=0;L<S.length;L++)E[L]=S[L],r.touchData.startPosition[L]=S[L];r.touchData.singleTouchMoved=!1,r.touchData.singleTouchStartTime=+new Date;{setTimeout(function(){0==r.touchData.singleTouchMoved&&+new Date-r.touchData.singleTouchStartTime>250&&(r.touchData.start?r.touchData.start.trigger(new e.Event(o,{type:"taphold",cyPosition:{x:S[0],y:S[1]}})):(r.data.cy.trigger(new e.Event(o,{type:"taphold",cyPosition:{x:S[0],y:S[1]}})),s.$(":selected").unselect()))},1e3)}}r.redraw()},!1),r.registerBinding(window,"touchmove",e.util.throttle(function(i){var a=r.data.select,n=r.touchData.capture;n&&i.preventDefault();var o=r.data.cy,s=(r.getCachedNodes(),r.getCachedEdges(),r.touchData.now),h=r.touchData.earlier;if(i.touches[0]){var m=r.projectIntoViewport(i.touches[0].pageX,i.touches[0].pageY);s[0]=m[0],s[1]=m[1]}if(i.touches[1]){var m=r.projectIntoViewport(i.touches[1].pageX,i.touches[1].pageY);s[2]=m[0],s[3]=m[1]}if(i.touches[2]){var m=r.projectIntoViewport(i.touches[2].pageX,i.touches[2].pageY);s[4]=m[0],s[5]=m[1]}for(var b=[],w=0;w<s.length;w++)b[w]=s[w]-h[w];if(n&&r.touchData.cxt){var _=i.touches[0].pageX-g,S=i.touches[0].pageY-f,E=i.touches[1].pageX-g,M=i.touches[1].pageY-f,P=x(_,S,E,M),k=P/d;if(k>=1.5||P>=150){r.touchData.cxt=!1,r.touchData.start&&(r.touchData.start.unactivate(),r.touchData.start=null),r.data.bgActivePosistion=void 0,r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;var C=new e.Event(i,{type:"cxttapend",cyPosition:{x:s[0],y:s[1]}});r.touchData.start?r.touchData.start.trigger(C):o.trigger(C)}}if(n&&r.touchData.cxt){var C=new e.Event(i,{type:"cxtdrag",cyPosition:{x:s[0],y:s[1]}});r.data.bgActivePosistion=void 0,r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,r.touchData.start?r.touchData.start.trigger(C):o.trigger(C),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxtDragged=!0}else if(n&&i.touches[2]&&o.boxSelectionEnabled())r.data.bgActivePosistion=void 0,clearTimeout(this.threeFingerSelectTimeout),this.lastThreeTouch=+new Date,r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,a&&0!==a.length&&void 0!==a[0]?(a[2]=(s[0]+s[2]+s[4])/3,a[3]=(s[1]+s[3]+s[5])/3):(a[0]=(s[0]+s[2]+s[4])/3,a[1]=(s[1]+s[3]+s[5])/3,a[2]=(s[0]+s[2]+s[4])/3+1,a[3]=(s[1]+s[3]+s[5])/3+1),a[4]=1;else if(n&&i.touches[1]&&o.zoomingEnabled()&&o.panningEnabled()&&o.userZoomingEnabled()&&o.userPanningEnabled()){r.data.bgActivePosistion=void 0,r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;var _=i.touches[0].pageX-g,S=i.touches[0].pageY-f,E=i.touches[1].pageX-g,M=i.touches[1].pageY-f,P=x(_,S,E,M),k=P/d;if(1!=k&&y){var D=_-l,N=S-c,T=E-u,I=M-p,z=(D+T)/2,B=(N+I)/2,R=o.zoom(),X=R*k,Y=o.pan(),V=v[0]*R+Y.x,L=v[1]*R+Y.y,A={x:-X/R*(V-Y.x-z)+V,y:-X/R*(L-Y.y-B)+L};o._private.zoom=X,o._private.pan=A,o.trigger("pan zoom").notify("viewport"),d=P,l=_,c=S,u=E,p=M,r.pinching=!0}if(i.touches[0]){var m=r.projectIntoViewport(i.touches[0].pageX,i.touches[0].pageY);s[0]=m[0],s[1]=m[1]}if(i.touches[1]){var m=r.projectIntoViewport(i.touches[1].pageX,i.touches[1].pageY);s[2]=m[0],s[3]=m[1]}if(i.touches[2]){var m=r.projectIntoViewport(i.touches[2].pageX,i.touches[2].pageY);s[4]=m[0],s[5]=m[1]}}else if(i.touches[0]){{var O=r.touchData.start;r.touchData.last}if(null!=O&&"nodes"==O._private.group&&r.nodeIsDraggable(O)){var q=r.dragData.touchDragEles,F=new e.Collection(o,q).positions(function(e,t){if(r.nodeIsDraggable(t)){r.dragData.didDrag=!0;var i=t.position();return{x:i.x+b[0],y:i.y+b[1]}}});F.trigger("drag"),r.hoverData.draggingEles=!0,r.data.canvasNeedsRedraw[t.DRAG]=!0,r.touchData.startPosition[0]==h[0]&&r.touchData.startPosition[1]==h[1]&&(r.data.canvasNeedsRedraw[t.NODE]=!0)}if(null!=O&&(O.trigger(new e.Event(i,{type:"touchmove",cyPosition:{x:s[0],y:s[1]}})),O.trigger(new e.Event(i,{type:"tapdrag",cyPosition:{x:s[0],y:s[1]}})),O.trigger(new e.Event(i,{type:"vmousemove",cyPosition:{x:s[0],y:s[1]}}))),null==O){var $=r.findNearestElement(s[0],s[1],!0);null!=$&&($.trigger(new e.Event(i,{type:"touchmove",cyPosition:{x:s[0],y:s[1]}})),$.trigger(new e.Event(i,{type:"tapdrag",cyPosition:{x:s[0],y:s[1]}})),$.trigger(new e.Event(i,{type:"vmousemove",cyPosition:{x:s[0],y:s[1]}}))),null==$&&(o.trigger(new e.Event(i,{type:"touchmove",cyPosition:{x:s[0],y:s[1]}})),o.trigger(new e.Event(i,{type:"tapdrag",cyPosition:{x:s[0],y:s[1]}})),o.trigger(new e.Event(i,{type:"vmousemove",cyPosition:{x:s[0],y:s[1]}})))}r.touchData.last=$;for(var j=0;j<s.length;j++)s[j]&&r.touchData.startPosition[j]&&Math.abs(s[j]-r.touchData.startPosition[j])>4&&(r.touchData.singleTouchMoved=!0);if(n&&(null==O||O.isEdge())&&o.panningEnabled()&&o.userPanningEnabled()){O&&(O.unactivate(),r.data.bgActivePosistion||(r.data.bgActivePosistion={x:s[0],y:s[1]}),r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0),o.panBy({x:b[0]*o.zoom(),y:b[1]*o.zoom()}),r.swipePanning=!0;var m=r.projectIntoViewport(i.touches[0].pageX,i.touches[0].pageY);s[0]=m[0],s[1]=m[1]}}for(var w=0;w<s.length;w++)h[w]=s[w];r.redraw()},1e3/30),!1),r.registerBinding(window,"touchend",function(i){var a=r.touchData.capture;if(a){r.touchData.capture=!1,i.preventDefault();var o=r.data.select;r.swipePanning=!1,r.hoverData.draggingEles=!1;var s=r.data.cy,l=(r.getCachedNodes(),r.getCachedEdges(),r.touchData.now),c=r.touchData.earlier,u=r.touchData.start;if(i.touches[0]){var p=r.projectIntoViewport(i.touches[0].pageX,i.touches[0].pageY);l[0]=p[0],l[1]=p[1]}if(i.touches[1]){var p=r.projectIntoViewport(i.touches[1].pageX,i.touches[1].pageY);l[2]=p[0],l[3]=p[1]}if(i.touches[2]){var p=r.projectIntoViewport(i.touches[2].pageX,i.touches[2].pageY);l[4]=p[0],l[5]=p[1]}if(r.touchData.cxt){if(ctxTapend=new e.Event(i,{type:"cxttapend",cyPosition:{x:l[0],y:l[1]}}),u?(u.unactivate(),u.trigger(ctxTapend)):s.trigger(ctxTapend),!r.touchData.cxtDragged){var d=new e.Event(i,{type:"cxttap",cyPosition:{x:l[0],y:l[1]}});u?u.trigger(d):s.trigger(d)}return r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!1,r.touchData.start=null,void r.redraw()}{+new Date}if(!i.touches[2]&&s.boxSelectionEnabled()){clearTimeout(this.threeFingerSelectTimeout);var h=[],v=r.getAllInBox(o[0],o[1],o[2],o[3]);o[0]=void 0,o[1]=void 0,o[2]=void 0,o[3]=void 0,o[4]=0,r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;for(var g=(new e.Event("select"),0);g<v.length;g++)v[g]._private.selectable&&h.push(v[g]);var f=new e.Collection(s,h);"single"===s.selectionType()&&s.$(":selected").unselect(),f.select(),v.length>0&&(r.data.canvasNeedsRedraw[t.NODE]=!0)}i.touches.length<2&&(r.pinching=!1,r.data.canvasNeedsRedraw[t.NODE]=!0,r.redraw());var y=!1;if(null!=u&&(u._private.active=!1,y=!0,u.trigger("unactivate")),i.touches[2])r.data.bgActivePosistion=void 0,r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;else if(i.touches[1]);else if(i.touches[0]);else if(!i.touches[0]){if(r.data.bgActivePosistion=void 0,r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,null!=u){1==u._private.grabbed&&(u._private.grabbed=!1,u.trigger("free"),u._private.rscratch.inDragLayer=!1);for(var m=u._private.edges,b=0;b<m.length;b++)m[b]._private.rscratch.inDragLayer=!1;if(n(u,!1),u.selected())for(var x=s.$("node:selected"),w=0;w<x.length;w++){var _=x[w];_._private.rscratch.inDragLayer=!1;for(var m=_._private.edges,b=0;b<m.length;b++)m[b]._private.rscratch.inDragLayer=!1;n(_,!1)}r.data.canvasNeedsRedraw[t.DRAG]=!0,r.data.canvasNeedsRedraw[t.NODE]=!0,u.trigger(new e.Event(i,{type:"touchend",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(i,{type:"tapend",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(i,{type:"vmouseup",cyPosition:{x:l[0],y:l[1]}})),r.touchData.start=null}else{var S=r.findNearestElement(l[0],l[1],!0);null!=S&&S.trigger(new e.Event(i,{type:"touchend",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(i,{type:"tapend",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(i,{type:"vmouseup",cyPosition:{x:l[0],y:l[1]}})),null==S&&s.trigger(new e.Event(i,{type:"touchend",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(i,{type:"tapend",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(i,{type:"vmouseup",cyPosition:{x:l[0],y:l[1]}}))}null!=u&&!r.dragData.didDrag&&u._private.selectable&&Math.sqrt(Math.pow(r.touchData.startPosition[0]-l[0],2)+Math.pow(r.touchData.startPosition[1]-l[1],2))<6&&("single"===s.selectionType()?(s.$(":selected").unselect(),u.select()):u.selected()?u.unselect():u.select(),y=!0,r.data.canvasNeedsRedraw[t.NODE]=!0),0==r.touchData.singleTouchMoved&&(u?u.trigger(new e.Event(i,{type:"tap",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(i,{type:"vclick",cyPosition:{x:l[0],y:l[1]}})):s.trigger(new e.Event(i,{type:"tap",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(i,{type:"vclick",cyPosition:{x:l[0],y:l[1]}}))),r.touchData.singleTouchMoved=!0}for(var b=0;b<l.length;b++)c[b]=l[b];r.dragData.didDrag=!1,y&&u&&u.updateStyle(!1),r.redraw()}},!1)}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas"),r=t.prototype,i=t.nodeShapes={};i.ellipse={draw:function(e,t,r,a,n){i.ellipse.drawPath(e,t,r,a,n),e.fill()},drawPath:function(e,t,r,i,a){e.beginPath(),e.translate(t,r),e.scale(i/2,a/2),e.arc(0,0,1,0,2*Math.PI*.999,!1),e.closePath(),e.scale(2/i,2/a),e.translate(-t,-r)},intersectLine:function(t,r,i,a,n,o,s){var l=e.math.intersectLineEllipse(n,o,t,r,i/2+s,a/2+s);return l},intersectBox:function(t,r,i,a,n,o,s,l,c){return e.math.boxIntersectEllipse(t,r,i,a,c,n,o,s,l)},checkPointRough:function(){return!0},checkPoint:function(e,t,r,i,a,n,o){return e-=n,t-=o,e/=i/2+r,t/=a/2+r,Math.pow(e,2)+Math.pow(t,2)<=1}},i.triangle={points:e.math.generateUnitNgonPointsFitToSquare(3,0),draw:function(e,t,a,n,o){r.drawPolygon(e,t,a,n,o,i.triangle.points)},drawPath:function(e,t,a,n,o){r.drawPolygonPath(e,t,a,n,o,i.triangle.points)},intersectLine:function(t,r,a,n,o,s,l){return e.math.polygonIntersectLine(o,s,i.triangle.points,t,r,a/2,n/2,l)},intersectBox:function(t,r,a,n,o,s,l,c,u){var p=i.triangle.points;return e.math.boxIntersectPolygon(t,r,a,n,p,o,s,l,c,[0,-1],u)},checkPointRough:function(t,r,a,n,o,s,l){return e.math.checkInBoundingBox(t,r,i.triangle.points,a,n,o,s,l)},checkPoint:function(t,r,a,n,o,s,l){return e.math.pointInsidePolygon(t,r,i.triangle.points,s,l,n,o,[0,-1],a)}},i.square={points:e.math.generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,a,n,o){r.drawPolygon(e,t,a,n,o,i.square.points)},drawPath:function(e,t,a,n,o){r.drawPolygonPath(e,t,a,n,o,i.square.points)},intersectLine:function(t,r,a,n,o,s,l){return e.math.polygonIntersectLine(o,s,i.square.points,t,r,a/2,n/2,l)},intersectBox:function(t,r,a,n,o,s,l,c,u){var p=i.square.points;return e.math.boxIntersectPolygon(t,r,a,n,p,o,s,l,c,[0,-1],u)},checkPointRough:function(t,r,a,n,o,s,l){return e.math.checkInBoundingBox(t,r,i.square.points,a,n,o,s,l)},checkPoint:function(t,r,a,n,o,s,l){return e.math.pointInsidePolygon(t,r,i.square.points,s,l,n,o,[0,-1],a)}},i.rectangle=i.square,i.octogon={},i.roundrectangle={points:e.math.generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,i,a,n){r.drawRoundRectangle(e,t,i,a,n,10)},drawPath:function(e,t,i,a,n){r.drawRoundRectanglePath(e,t,i,a,n,10)},intersectLine:function(t,r,i,a,n,o,s){return e.math.roundRectangleIntersectLine(n,o,t,r,i,a,s)},intersectBox:function(t,r,i,a,n,o,s,l,c){return e.math.roundRectangleIntersectBox(t,r,i,a,n,o,s,l,c)},checkPointRough:function(t,r,a,n,o,s,l){return e.math.checkInBoundingBox(t,r,i.roundrectangle.points,a,n,o,s,l)},checkPoint:function(t,r,a,n,o,s,l){var c=e.math.getRoundRectangleRadius(n,o);if(e.math.pointInsidePolygon(t,r,i.roundrectangle.points,s,l,n,o-2*c,[0,-1],a))return!0;if(e.math.pointInsidePolygon(t,r,i.roundrectangle.points,s,l,n-2*c,o,[0,-1],a))return!0;var u=function(e,t,r,i,a,n,o){return e-=r,t-=i,e/=a/2+o,t/=n/2+o,Math.pow(e,2)+Math.pow(t,2)<=1};return u(t,r,s-n/2+c,l-o/2+c,2*c,2*c,a)?!0:u(t,r,s+n/2-c,l-o/2+c,2*c,2*c,a)?!0:u(t,r,s+n/2-c,l+o/2-c,2*c,2*c,a)?!0:u(t,r,s-n/2+c,l+o/2-c,2*c,2*c,a)?!0:!1}},i.roundrectangle2={roundness:4.99,draw:function(e,t,i){2*roundness>=t||r.drawPolygon(e._private.position.x,e._private.position.y,t,i,nodeSapes.roundrectangle2.points)},intersectLine:function(t,r,a,n,o){return e.math.findPolygonIntersection(t,r,a,n,o,i.square.points)},intersectBox:function(){i.square.points}},i.pentagon={points:e.math.generateUnitNgonPointsFitToSquare(5,0),draw:function(e,t,a,n,o){r.drawPolygon(e,t,a,n,o,i.pentagon.points)},drawPath:function(e,t,a,n,o){r.drawPolygonPath(e,t,a,n,o,i.pentagon.points)},intersectLine:function(e,t,a,n,o,s,l){return r.polygonIntersectLine(o,s,i.pentagon.points,e,t,a/2,n/2,l)},intersectBox:function(t,r,a,n,o,s,l,c,u){var p=i.pentagon.points;return e.math.boxIntersectPolygon(t,r,a,n,p,o,s,l,c,[0,-1],u)},checkPointRough:function(t,r,a,n,o,s,l){return e.math.checkInBoundingBox(t,r,i.pentagon.points,a,n,o,s,l)},checkPoint:function(t,r,a,n,o,s,l){return e.math.pointInsidePolygon(t,r,i.pentagon.points,s,l,n,o,[0,-1],a)}},i.hexagon={points:e.math.generateUnitNgonPointsFitToSquare(6,0),draw:function(e,t,a,n,o){r.drawPolygon(e,t,a,n,o,i.hexagon.points)},drawPath:function(e,t,a,n,o){r.drawPolygonPath(e,t,a,n,o,i.hexagon.points)},intersectLine:function(t,r,a,n,o,s,l){return e.math.polygonIntersectLine(o,s,i.hexagon.points,t,r,a/2,n/2,l)},intersectBox:function(t,r,a,n,o,s,l,c,u){var p=i.hexagon.points;return e.math.boxIntersectPolygon(t,r,a,n,p,o,s,l,c,[0,-1],u)},checkPointRough:function(t,r,a,n,o,s,l){return e.math.checkInBoundingBox(t,r,i.hexagon.points,a,n,o,s,l)},checkPoint:function(t,r,a,n,o,s,l){return e.math.pointInsidePolygon(t,r,i.hexagon.points,s,l,n,o,[0,-1],a)}},i.heptagon={points:e.math.generateUnitNgonPointsFitToSquare(7,0),draw:function(e,t,a,n,o){r.drawPolygon(e,t,a,n,o,i.heptagon.points)},drawPath:function(e,t,a,n,o){r.drawPolygonPath(e,t,a,n,o,i.heptagon.points)},intersectLine:function(e,t,a,n,o,s,l){return r.polygonIntersectLine(o,s,i.heptagon.points,e,t,a/2,n/2,l)},intersectBox:function(e,t,a,n,o,s,l,c,u){var p=i.heptagon.points;return r.boxIntersectPolygon(e,t,a,n,p,o,s,l,c,[0,-1],u)},checkPointRough:function(t,r,a,n,o,s,l){return e.math.checkInBoundingBox(t,r,i.heptagon.points,a,n,o,s,l)},checkPoint:function(t,r,a,n,o,s,l){return e.math.pointInsidePolygon(t,r,i.heptagon.points,s,l,n,o,[0,-1],a)}},i.octagon={points:e.math.generateUnitNgonPointsFitToSquare(8,0),draw:function(e,t,a,n,o){r.drawPolygon(e,t,a,n,o,i.octagon.points)},drawPath:function(e,t,a,n,o){r.drawPolygonPath(e,t,a,n,o,i.octagon.points)},intersectLine:function(e,t,a,n,o,s,l){return r.polygonIntersectLine(o,s,i.octagon.points,e,t,a/2,n/2,l)},intersectBox:function(e,t,a,n,o,s,l,c,u){var p=i.octagon.points;return r.boxIntersectPolygon(e,t,a,n,p,o,s,l,c,[0,-1],u)},checkPointRough:function(t,r,a,n,o,s,l){return e.math.checkInBoundingBox(t,r,i.octagon.points,a,n,o,s,l)},checkPoint:function(t,r,a,n,o,s,l){return e.math.pointInsidePolygon(t,r,i.octagon.points,s,l,n,o,[0,-1],a)}};var a=new Array(20),n=e.math.generateUnitNgonPoints(5,0),o=e.math.generateUnitNgonPoints(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var l=0;l<o.length/2;l++)o[2*l]*=s,o[2*l+1]*=s;for(var l=0;5>l;l++)a[4*l]=n[2*l],a[4*l+1]=n[2*l+1],a[4*l+2]=o[2*l],a[4*l+3]=o[2*l+1];a=e.math.fitPolygonToSquare(a),i.star5=i.star={points:a,draw:function(e,t,a,n,o){r.drawPolygon(e,t,a,n,o,i.star5.points)},drawPath:function(e,t,a,n,o){r.drawPolygonPath(e,t,a,n,o,i.star5.points)},intersectLine:function(e,t,a,n,o,s,l){return r.polygonIntersectLine(o,s,i.star5.points,e,t,a/2,n/2,l)},intersectBox:function(e,t,a,n,o,s,l,c,u){var p=i.star5.points;return r.boxIntersectPolygon(e,t,a,n,p,o,s,l,c,[0,-1],u)},checkPointRough:function(t,r,a,n,o,s,l){return e.math.checkInBoundingBox(t,r,i.star5.points,a,n,o,s,l)},checkPoint:function(t,r,a,n,o,s,l){return e.math.pointInsidePolygon(t,r,i.star5.points,s,l,n,o,[0,-1],a)}}}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend({},r,t)}var r={liveUpdate:!0,ready:void 0,stop:void 0,maxSimulationTime:4e3,fit:!0,padding:[50,50,50,50],simulationBounds:void 0,ungrabifyWhileSimulating:!0,repulsion:void 0,stiffness:void 0,friction:void 0,gravity:!0,fps:void 0,precision:void 0,nodeMass:void 0,edgeLength:void 0,stepSize:1,stableEnergy:function(e){var t=e;return t.max<=.5||t.mean<=.3}};t.prototype.run=function(){function t(e,t){return null==t?void 0:"function"==typeof t?t.apply(e,[e._private.data,{nodes:o.length,edges:s.length,element:e}]):t}function r(e){var t=e.x,r=e.y,i=c,a=u,n=-2,o=2,s=4;return{x:t/i*s+n,y:r/a*s+o}}function i(e){a.fit&&n.fit(),e()}var a=this.options,n=a.cy,o=n.nodes(),s=n.edges(),l=n.container(),c=l.clientWidth,u=l.clientHeight,p=a.simulationBounds;a.simulationBounds?(c=p[2]-p[0],u=p[3]-p[1]):a.simulationBounds=[0,0,c,u];var d=a.simulationBounds;if(d.x1=d[0],d.y1=d[1],d.x2=d[2],d.y2=d[3],n.nodes().size()<=1)return a.fit&&n.reset(),n.nodes().position({x:Math.round((d.x1+d.x2)/2),y:Math.round((d.y1+d.y2)/2)}),n.one("layoutready",a.ready),n.trigger("layoutready"),n.one("layoutstop",a.stop),void n.trigger("layoutstop");var h=this.system=arbor.ParticleSystem(a.repulsion,a.stiffness,a.friction,a.gravity,a.fps,a.dt,a.precision);this.system=h,a.liveUpdate&&a.fit&&n.reset();var v,g=250,f=!1,y=+new Date,m={init:function(){},redraw:function(){var t=h.energy();if(null!=a.stableEnergy&&null!=t&&t.n>0&&a.stableEnergy(t))return void h.stop();clearTimeout(v),v=setTimeout(w,g);var r=[];h.eachNode(function(e,t){var i=(e.name,e.data),a=i.element;null!=a&&(a.locked()||a.grabbed()||(a.silentPosition({x:d.x1+t.x,y:d.y1+t.y}),r.push(a)))});var i=+new Date-y>=16;a.liveUpdate&&r.length>0&&i&&(new e.Collection(n,r).rtrigger("position"),y=+new Date),f||(f=!0,n.one("layoutready",a.ready),n.trigger("layoutready"))}};h.renderer=m,h.screenSize(c,u),h.screenPadding(a.padding[0],a.padding[1],a.padding[2],a.padding[3]),h.screenStep(a.stepSize);var b=function(e){grabbed=this;var t=h.fromScreen(this.position()),r=arbor.Point(t.x,t.y);switch(this.scratch().arbor.p=r,e.type){case"grab":this.scratch().arbor.fixed=!0;break;case"dragstop":this.scratch().arbor.fixed=!1,this.scratch().arbor.tempMass=1e3}};o.bind("grab drag dragstop",b),o.each(function(e,i){if(!this.isFullAutoParent()){var n=this._private.data.id,o=t(this,a.nodeMass),s=this._private.locked;if(!i.isFullAutoParent()){var l=r({x:i.position().x,y:i.position().y});i.locked()||(this.scratch().arbor=h.addNode(n,{element:this,mass:o,fixed:s,x:s?l.x:void 0,y:s?l.y:void 0}))}}}),s.each(function(){var e=(this.id(),this.source().id()),r=this.target().id(),i=t(this,a.edgeLength);this.scratch().arbor=h.addEdge(e,r,{length:i})});var x=o.filter(":grabbable");a.ungrabifyWhileSimulating&&x.ungrabify();var w=function(){function e(){a.liveUpdate||(a.fit&&n.reset(),n.nodes().rtrigger("position")),o.unbind("grab drag dragstop",b),a.ungrabifyWhileSimulating&&x.grabify(),n.one("layoutstop",a.stop),n.trigger("layoutstop")}window.isIE?i(function(){e()}):e()};h.start(),setTimeout(function(){h.stop()},a.maxSimulationTime)},t.prototype.stop=function(){null!=this.system&&system.stop()},e("layout","arbor",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend({},r,t)}var r={fit:!0,ready:void 0,stop:void 0,directed:!1,padding:30,circle:!1,roots:void 0,maximalAdjustments:0};t.prototype.run=function(){var t,r=this.options,i=r,a=r.cy,n=a.nodes(),o=a.edges(),s=n.add(o),l=a.container(),c=l.clientWidth,u=l.clientHeight;if(e.is.elementOrCollection(i.roots))t=i.roots;else if(e.is.array(i.roots)){for(var p=[],d=0;d<i.roots.length;d++){var h=i.roots[d],v=a.getElementById(h);t.push(v)}t=new e.Collection(a,p)}else if(i.directed)t=n.roots();else{var g=n.maxDegree(!1);t=n.filter("[[degree = "+g+"]]")}var f=[],y={},m={};s.bfs(t,function(e,t){var r=this[0];f[t]||(f[t]=[]),f[t].push(r),y[r.id()]=!0,m[r.id()]=t},i.directed);for(var b=[],d=0;d<n.length;d++){var v=n[d];y[v.id()]||b.push(v)}for(var x=3*b.length,w=0;0!==b.length&&x>w;){for(var _=b.shift(),S=_.neighborhood().nodes(),E=!1,d=0;d<S.length;d++){var M=m[S[d].id()];if(void 0!==M){f[M].push(_),E=!0;break}}E||b.push(_),w++}for(;0!==b.length;){var _=b.shift(),E=!1;E||(0===f.length&&f.push([]),f[0].push(_))}var P=function(){for(var e=0;e<f.length;e++)for(var t=f[e],r=0;r<t.length;r++){var i=t[r];i._private.scratch.BreadthFirstLayout={depth:e,index:r}}};P();for(var k=0;k<i.maximalAdjustments;k++){for(var C=function(e){for(var t,r=e.connectedEdges('[target = "'+e.id()+'"]'),i=e._private.scratch.BreadthFirstLayout,a=0,n=0;n<r.length;n++){var o=r[n],s=o.source()[0],l=s._private.scratch.BreadthFirstLayout;i.depth<l.depth&&a<l.depth&&(a=l.depth,t=s)}return t},D=f.length,N=[],d=0;D>d;d++)for(var M=f[d],T=M.length,I=0;T>I;I++){var v=M[I],z=v._private.scratch.BreadthFirstLayout,B=C(v);B&&(z.intEle=B,N.push(v))}for(var d=0;d<N.length;d++){var v=N[d],z=v._private.scratch.BreadthFirstLayout,B=z.intEle,R=B._private.scratch.BreadthFirstLayout;
f[z.depth].splice(z.index,1);for(var X=R.depth+1;X>f.length-1;)f.push([]);f[X].push(v),z.depth=X,z.index=f[X].length-1}P()}for(var Y=0,d=0;d<n.length;d++){var V=n[d].outerWidth(),L=n[d].outerHeight();Y=Math.max(Y,V,L)}Y*=1.75;for(var A={},O=function(e){if(A[e.id()])return A[e.id()];for(var t=e._private.scratch.BreadthFirstLayout.depth,r=e.neighborhood().nodes(),i=0,a=0,n=0;n<r.length;n++){var o=r[n],s=(o.edgesWith(e),o._private.scratch.BreadthFirstLayout.index),l=o._private.scratch.BreadthFirstLayout.depth,c=f[l].length;(t>l||0===t)&&(i+=s/c,a++)}return a=Math.max(1,a),i/=a,0===a&&(i=void 0),A[e.id()]=i,i},q=0;3>q;q++){for(var d=0;d<f.length;d++){var M=d;f[d]=f[d].sort(function(e,t){var r=O(e),i=O(t);return r-i})}P()}var F={x:c/2,y:u/2};n.positions(function(){var e=this[0],t=e._private.scratch.BreadthFirstLayout,r=t.depth,a=t.index,n=Math.max(c/(f[r].length+1),Y),o=Math.max(u/(f.length+1),Y),s=Math.min(c/2/f.length,u/2/f.length);if(s=Math.max(s,Y),i.circle){var l=s*r+s-(f.length>0&&f[0].length<=3?s/2:0),p=2*Math.PI/f[r].length*a;return 0===r&&1===f[0].length&&(l=1),{x:F.x+l*Math.cos(p),y:F.y+l*Math.sin(p)}}return{x:(a+1)*n,y:(r+1)*o}}),r.fit&&a.fit(i.padding),a.one("layoutready",r.ready),a.trigger("layoutready"),a.one("layoutstop",r.stop),a.trigger("layoutstop")},t.prototype.stop=function(){},e("layout","breadthfirst",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend({},r,t)}var r={fit:!0,ready:void 0,stop:void 0,rStepSize:10,padding:30,startAngle:1.5*Math.PI,counterclockwise:!1};t.prototype.run=function(){function e(){var e=0,t=u,r={x:l.x+v*Math.cos(e),y:l.y+v*Math.sin(e)},i={x:l.x+v*Math.cos(t),y:l.y+v*Math.sin(t)},a=Math.sqrt((i.x-r.x)*(i.x-r.x)+(i.y-r.y)*(i.y-r.y));return a}for(var t=this.options,r=t,i=t.cy,a=i.nodes().filter(function(){return!this.isFullAutoParent()}),n=(i.edges(),i.container()),o=n.clientWidth,s=n.clientHeight,l={x:o/2,y:s/2},c=r.startAngle,u=2*Math.PI/a.length,p=0,d=0;d<a.length;d++){var h=a[d];p=Math.max(h.outerWidth(),h.outerHeight())}for(var v=o/2-p;e()<p&&!(a.length<2);)v+=r.rStepSize;var d=0;a.positions(function(){var e=v*Math.cos(c),t=v*Math.sin(c),i={x:l.x+e,y:l.y+t};return d++,c=r.counterclockwise?c-u:c+u,i}),t.fit&&i.fit(r.padding),i.one("layoutready",t.ready),i.trigger("layoutready"),i.one("layoutstop",t.stop),i.trigger("layoutstop")},t.prototype.stop=function(){},e("layout","circle",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend({},r,t)}var r={fit:!0,ready:void 0,stop:void 0,padding:30,startAngle:1.5*Math.PI,counterclockwise:!1,minNodeSpacing:10,height:void 0,width:void 0,concentric:function(){return this.degree()},levelWidth:function(e){return e.maxDegree()/4}};t.prototype.run=function(){for(var e=this.options,t=e,r=e.cy,i=r.nodes().filter(function(){return!this.isFullAutoParent()}),a=(r.edges(),r.container()),n=void 0!==t.width?t.width:a.clientWidth,o=void 0!==t.height?t.height:a.clientHeight,s={x:n/2,y:o/2},l=[],c=t.startAngle,u=0,p=0;p<i.length;p++){var d,h=i[p];d=t.concentric.call(h),l.push({value:d,node:h}),h._private.layoutData.concentric=d}i.updateMappers();for(var p=0;p<i.length;p++){var h=i[p];u=Math.max(u,h.outerWidth(),h.outerHeight())}l.sort(function(e,t){return t.value-e.value});for(var v=t.levelWidth(i),g=[[]],f=g[0],p=0;p<l.length;p++){var y=l[p];if(f.length>0){var m=Math.abs(f[0].value-y.value);m>=v&&(f=[],g.push(f))}f.push(y)}for(var b={},x=0,w=u+t.minNodeSpacing,p=0;p<g.length;p++){var _=g[p],S=2*Math.PI/_.length;if(_.length>1){var E=Math.cos(S)-Math.cos(0),M=Math.sin(S)-Math.sin(0),P=Math.sqrt(w*w/(E*E+M*M));x=Math.max(P,x)}for(var k=0;k<_.length;k++){var y=_[k],c=t.startAngle+(t.counterclockwise?1:-1)*S*k,C={x:s.x+x*Math.cos(c),y:s.y+x*Math.sin(c)};b[y.node.id()]=C}x+=w}i.positions(function(){var e=this.id();return b[e]}),e.fit&&r.fit(t.padding),r.one("layoutready",e.ready),r.trigger("layoutready"),r.one("layoutstop",e.stop),r.trigger("layoutstop")},t.prototype.stop=function(){},e("layout","concentric",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend({},i,t)}var r,i={ready:function(){},stop:function(){},refresh:0,fit:!0,padding:30,randomize:!0,debug:!1,nodeRepulsion:1e4,nodeOverlap:10,idealEdgeLength:10,edgeElasticity:100,nestingFactor:5,gravity:250,numIter:100,initialTemp:200,coolingFactor:.95,minTemp:1};t.prototype.run=function(){var e=this.options,t=e.cy;r=1==e.debug?!0:!1;var i=new Date,n=a(t,e);r&&s(n),1==e.randomize&&(l(n,t),0<e.refresh&&c(n,t,e)),m(n,t,e);for(var o=0;o<e.numIter;o++)if(u(n,t,e,o),0<e.refresh&&0==o%e.refresh&&c(n,t,e),n.temperature=n.temperature*e.coolingFactor,w("New temperature: "+n.temperature),n.temperature<e.minTemp){w("Temperature drop below minimum threshold. Stopping computation in step "+o);break}c(n,t,e),1==e.fit&&t.fit(e.padding);var p=new Date;console.info("Layout took "+(p-i)+" ms"),t.one("layoutstop",e.stop),t.trigger("layoutstop")},t.prototype.stop=function(){var e=this.options;cy.one("layoutstop",e.stop),cy.trigger("layoutstop")};var a=function(e,t){for(var r={layoutNodes:[],idToIndex:{},nodeSize:e.nodes().size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:e.edges().size(),temperature:t.initialTemp},i=e.nodes(),a=0;a<r.nodeSize;a++){var o={};o.id=i[a].data("id"),o.parentId=i[a].data("parent"),o.children=[],o.positionX=i[a].position("x"),o.positionY=i[a].position("y"),o.offsetX=0,o.offsetY=0,o.height=i[a].height(),o.width=i[a].width(),o.maxX=o.positionX+o.width/2,o.minX=o.positionX-o.width/2,o.maxY=o.positionY+o.height/2,o.minY=o.positionY-o.height/2,o.padLeft=i[a]._private.style["padding-left"].pxValue,o.padRight=i[a]._private.style["padding-right"].pxValue,o.padTop=i[a]._private.style["padding-top"].pxValue,o.padBottom=i[a]._private.style["padding-bottom"].pxValue,r.layoutNodes.push(o),r.idToIndex[o.id]=a}for(var s=[],l=0,c=-1,u=[],a=0;a<r.nodeSize;a++){var p=r.layoutNodes[a],d=p.parentId;void 0!=d?r.layoutNodes[r.idToIndex[d]].children.push(p.id):(s[++c]=p.id,u.push(p.id))}for(r.graphSet.push(u);c>=l;){var h=s[l++],v=r.idToIndex[h],g=r.layoutNodes[v],f=g.children;if(f.length>0){r.graphSet.push(f);for(var a=0;a<f.length;a++)s[++c]=f[a]}}for(var a=0;a<r.graphSet.length;a++)for(var y=r.graphSet[a],m=0;m<y.length;m++){var b=r.idToIndex[y[m]];r.indexToGraph[b]=a}for(var x=e.edges(),a=0;a<r.edgeSize;a++){var _=x[a],S={};S.id=_.data("id"),S.sourceId=_.data("source"),S.targetId=_.data("target");var E=t.idealEdgeLength,M=r.idToIndex[S.sourceId],P=r.idToIndex[S.targetId],k=r.indexToGraph[M],C=r.indexToGraph[P];if(k!=C){for(var D=n(S.sourceId,S.targetId,r),N=r.graphSet[D],T=0,o=r.layoutNodes[M];-1==$.inArray(o.id,N);)o=r.layoutNodes[r.idToIndex[o.parentId]],T++;for(o=r.layoutNodes[P];-1==$.inArray(o.id,N);)o=r.layoutNodes[r.idToIndex[o.parentId]],T++;w("LCA of nodes "+S.sourceId+" and "+S.targetId+". Index: "+D+" Contents: "+N.toString()+". Depth: "+T),E*=T*t.nestingFactor}S.idealLength=E,r.layoutEdges.push(S)}return r},n=function(e,t,r){var i=o(e,t,0,r);return 2>i.count?0:i.graph},o=function(e,t,r,i){var a=i.graphSet[r];if(-1<$.inArray(e,a)&&-1<$.inArray(t,a))return{count:2,graph:r};for(var n=0,s=0;s<a.length;s++){var l=a[s],c=i.idToIndex[l],u=i.layoutNodes[c].children;if(0!=u.length){var p=i.indexToGraph[i.idToIndex[u[0]]],d=o(e,t,p,i);if(0!=d.count){if(1!=d.count)return d;if(n++,2==n)break}}}return{count:n,graph:r}},s=function(e){if(r){console.debug("layoutNodes:");for(var t=0;t<e.nodeSize;t++){var i=e.layoutNodes[t],a="\nindex: "+t+"\nId: "+i.id+"\nChildren: "+i.children.toString()+"\nparentId: "+i.parentId+"\npositionX: "+i.positionX+"\npositionY: "+i.positionY+"\nOffsetX: "+i.offsetX+"\nOffsetY: "+i.offsetY+"\npadLeft: "+i.padLeft+"\npadRight: "+i.padRight+"\npadTop: "+i.padTop+"\npadBottom: "+i.padBottom;console.debug(a)}console.debug("idToIndex");for(var t in e.idToIndex)console.debug("Id: "+t+"\nIndex: "+e.idToIndex[t]);console.debug("Graph Set");for(var n=e.graphSet,t=0;t<n.length;t++)console.debug("Set : "+t+": "+n[t].toString());for(var a="IndexToGraph",t=0;t<e.indexToGraph.length;t++)a+="\nIndex : "+t+" Graph: "+e.indexToGraph[t];console.debug(a),a="Layout Edges";for(var t=0;t<e.layoutEdges.length;t++){var o=e.layoutEdges[t];a+="\nEdge Index: "+t+" ID: "+o.id+" SouceID: "+o.sourceId+" TargetId: "+o.targetId+" Ideal Length: "+o.idealLength}console.debug(a),a="nodeSize: "+e.nodeSize,a+="\nedgeSize: "+e.edgeSize,a+="\ntemperature: "+e.temperature,console.debug(a)}},l=function(e,t){for(var r=t.container(),i=r.clientWidth,a=r.clientHeight,n=0;n<e.nodeSize;n++){var o=e.layoutNodes[n];o.positionX=Math.random()*i,o.positionY=Math.random()*a}},c=function(e,t,r){var i=t.container(),a=(i.clientWidth,i.clientHeight,"Refreshing positions");w(a),t.nodes().positions(function(t,r){var i=e.layoutNodes[e.idToIndex[r.data("id")]];return a="Node: "+i.id+". Refreshed position: ("+i.positionX+", "+i.positionY+").",w(a),{x:i.positionX,y:i.positionY}}),1!=e.ready&&(a="Triggering layoutready",w(a),e.ready=!0,t.one("layoutready",r.ready),t.trigger("layoutready"))},u=function(e,t,r,i){var a="\n\n###############################";a+="\nSTEP: "+i,a+="\n###############################\n",w(a),p(e,t,r),g(e,t,r),f(e,t,r),y(e,t,r),m(e,t,r)},p=function(e,t,r){var i="calculateNodeForces";w(i);for(var a=0;a<e.graphSet.length;a++){var n=e.graphSet[a],o=n.length;i="Set: "+n.toString(),w(i);for(var s=0;o>s;s++)for(var l=e.layoutNodes[e.idToIndex[n[s]]],c=s+1;o>c;c++){var u=e.layoutNodes[e.idToIndex[n[c]]];d(l,u,e,t,r)}}},d=function(e,t,r,i,a){var n="Node repulsion. Node1: "+e.id+" Node2: "+t.id,o=t.positionX-e.positionX,s=t.positionY-e.positionY;if(n+="\ndirectionX: "+o+", directionY: "+s,0==o&&0==s)return void(n+="\nNodes have the same position.");var l=v(e,t,o,s);if(l>0){n+="\nNodes DO overlap.",n+="\nOverlap: "+l;var c=a.nodeOverlap*l,u=Math.sqrt(o*o+s*s);n+="\nDistance: "+u;var p=c*o/u,d=c*s/u}else{n+="\nNodes do NOT overlap.";var g=h(e,o,s),f=h(t,-1*o,-1*s),y=f.x-g.x,m=f.y-g.y,b=y*y+m*m,u=Math.sqrt(b);n+="\nDistance: "+u;var c=a.nodeRepulsion/b,p=c*y/u,d=c*m/u}e.offsetX-=p,e.offsetY-=d,t.offsetX+=p,t.offsetY+=d,n+="\nForceX: "+p+" ForceY: "+d,w(n)},h=function(e,t,r){var i=e.positionX,a=e.positionY,n=e.height,o=e.width,s=r/t,l=n/o,c="Computing clipping point of node "+e.id+" . Height:  "+n+", Width: "+o+"\nDirection "+t+", "+r,u={};do{if(0==t&&r>0){u.x=i,c+="\nUp direction",u.y=a+n/2;break}if(0==t&&0>r){u.x=i,u.y=a+n/2,c+="\nDown direction";break}if(t>0&&s>=-1*l&&l>=s){u.x=i+o/2,u.y=a+o*r/2/t,c+="\nRightborder";break}if(0>t&&s>=-1*l&&l>=s){u.x=i-o/2,u.y=a-o*r/2/t,c+="\nLeftborder";break}if(r>0&&(-1*l>=s||s>=l)){u.x=i+n*t/2/r,u.y=a+n/2,c+="\nTop border";break}if(0>r&&(-1*l>=s||s>=l)){u.x=i-n*t/2/r,u.y=a-n/2,c+="\nBottom border";break}}while(!1);return c+="\nClipping point found at "+u.x+", "+u.y,w(c),u},v=function(e,t,r,i){if(r>0)var a=e.maxX-t.minX;else var a=t.maxX-e.minX;if(i>0)var n=e.maxY-t.minY;else var n=t.maxY-e.minY;return a>=0&&n>=0?Math.sqrt(a*a+n*n):0},g=function(e,t,r){for(var i=0;i<e.edgeSize;i++){var a=e.layoutEdges[i],n=e.idToIndex[a.sourceId],o=e.layoutNodes[n],s=e.idToIndex[a.targetId],l=e.layoutNodes[s],c=l.positionX-o.positionX,u=l.positionY-o.positionY;if(0==c&&0==u)return;var p=h(o,c,u),d=h(l,-1*c,-1*u),v=d.x-p.x,g=d.y-p.y,f=Math.sqrt(v*v+g*g),y=Math.pow(a.idealLength-f,2)/r.edgeElasticity;if(0!=f)var m=y*v/f,b=y*g/f;else var m=0,b=0;o.offsetX+=m,o.offsetY+=b,l.offsetX-=m,l.offsetY-=b;var x="Edge force between nodes "+o.id+" and "+l.id;x+="\nDistance: "+f+" Force: ("+m+", "+b+")",w(x)}},f=function(e,t,r){var i="calculateGravityForces";w(i);for(var a=0;a<e.graphSet.length;a++){var n=e.graphSet[a],o=n.length;if(i="Set: "+n.toString(),w(i),0==a)var s=t.container(),l=s.clientHeight/2,c=s.clientWidth/2;else var u=e.layoutNodes[e.idToIndex[n[0]]],p=e.layoutNodes[e.idToIndex[u.parentId]],l=p.positionX,c=p.positionY;i="Center found at: "+l+", "+c,w(i);for(var d=0;o>d;d++){var h=e.layoutNodes[e.idToIndex[n[d]]];i="Node: "+h.id;var v=l-h.positionX,g=c-h.positionY,f=Math.sqrt(v*v+g*g);if(f>1){var y=r.gravity*v/f,m=r.gravity*g/f;h.offsetX+=y,h.offsetY+=m,i+=": Applied force: "+y+", "+m}else i+=": skypped since it's too close to center";w(i)}}},y=function(e){var t=[],r=0,i=-1;for(w("propagateForces"),t.push.apply(t,e.graphSet[0]),i+=e.graphSet[0].length;i>=r;){var a=t[r++],n=e.idToIndex[a],o=e.layoutNodes[n],s=o.children;if(0<s.length){var l=o.offsetX,c=o.offsetY,u="Propagating offset from parent node : "+o.id+". OffsetX: "+l+". OffsetY: "+c;u+="\n Children: "+s.toString(),w(u);for(var p=0;p<s.length;p++){var d=e.layoutNodes[e.idToIndex[s[p]]];d.offsetX+=l,d.offsetY+=c,t[++i]=s[p]}o.offsetX=0,o.offsetY=0}}},m=function(e){var t="Updating positions";w(t);for(var r=0;r<e.nodeSize;r++){var i=e.layoutNodes[r];0<i.children.length&&(w("Resetting boundaries of compound node: "+i.id),i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(var r=0;r<e.nodeSize;r++){var i=e.layoutNodes[r];if(0<i.children.length)w("Skipping position update of node: "+i.id);else{t="Node: "+i.id+" Previous position: ("+i.positionX+", "+i.positionY+").";var a=b(i.offsetX,i.offsetY,e.temperature);i.positionX+=a.x,i.positionY+=a.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,t+=" New Position: ("+i.positionX+", "+i.positionY+").",w(t),x(i,e)}}for(var r=0;r<e.nodeSize;r++){var i=e.layoutNodes[r];0<i.children.length&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY,t="Updating position, size of compound node "+i.id,t+="\nPositionX: "+i.positionX+", PositionY: "+i.positionY,t+="\nWidth: "+i.width+", Height: "+i.height,w(t))}},b=function(e,t,r){var i="Limiting force: ("+e+", "+t+"). Max: "+r,a=Math.sqrt(e*e+t*t);if(a>r)var n={x:r*e/a,y:r*t/a};else var n={x:e,y:t};return i+=".\nResult: ("+n.x+", "+n.y+")",w(i),n},x=function(e,t){var r="Propagating new position/size of node "+e.id,i=e.parentId;if(void 0==i)return r+=". No parent node.",void w(r);var a=t.layoutNodes[t.idToIndex[i]],n=!1;return(void 0==a.maxX||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,n=!0,r+="\nNew maxX for parent node "+a.id+": "+a.maxX),(void 0==a.minX||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,n=!0,r+="\nNew minX for parent node "+a.id+": "+a.minX),(void 0==a.maxY||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,n=!0,r+="\nNew maxY for parent node "+a.id+": "+a.maxY),(void 0==a.minY||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,n=!0,r+="\nNew minY for parent node "+a.id+": "+a.minY),n?(w(r),x(a,t)):(r+=". No changes in boundaries/position of parent node "+a.id,void w(r))},w=function(e){r&&console.debug(e)};e("layout","cose",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend({},r,t)}var r={fit:!0,padding:30,rows:void 0,columns:void 0,position:function(){},ready:void 0,stop:void 0};t.prototype.run=function(){var e=this.options,t=e,r=e.cy,i=r.nodes(),a=(r.edges(),r.container()),n=a.clientWidth,o=a.clientHeight;if(0==o||0==n)i.positions(function(){return{x:0,y:0}});else{var s=i.size(),l=Math.sqrt(s*o/n),c=Math.round(l),u=Math.round(n/o*l),p=function(e){if(void 0==e)return Math.min(c,u);var t=Math.min(c,u);t==c?c=e:u=e},d=function(e){if(void 0==e)return Math.max(c,u);var t=Math.max(c,u);t==c?c=e:u=e};if(null!=t.rows&&null!=t.columns)c=t.rows,u=t.columns;else if(null!=t.rows&&null==t.columns)c=t.rows,u=Math.ceil(s/c);else if(null==t.rows&&null!=t.columns)u=t.columns,c=Math.ceil(s/u);else if(u*c>s){var h=p(),v=d();(h-1)*v>=s?p(h-1):(v-1)*h>=s&&d(v-1)}else for(;s>u*c;){var h=p(),v=d();(v+1)*h>=s?d(v+1):p(h+1)}for(var g=n/u,f=o/c,y=0;y<i.length;y++){var m=i[y],b=m.outerWidth(),x=m.outerHeight();g=Math.max(g,b),f=Math.max(f,x)}for(var w={},_=function(e,t){return w["c-"+e+"-"+t]?!0:!1},S=function(e,t){w["c-"+e+"-"+t]=!0},E=0,M=0,P=function(){M++,M>=u&&(M=0,E++)},k={},y=0;y<i.length;y++){var m=i[y],C=t.position(m);if(C&&(void 0!==C.row||void 0!==C.col)){var D={row:C.row,col:C.col};if(void 0===D.col)for(D.col=0;_(D.row,D.col);)D.col++;else if(void 0===D.row)for(D.row=0;_(D.row,D.col);)D.row++;k[m.id()]=D,S(D.row,D.col)}}i.positions(function(e,t){var r,i;if(t.locked()||t.isFullAutoParent())return!1;var a=k[t.id()];if(a)r=a.col*g+g/2,i=a.row*f+f/2;else{for(;_(E,M);)P();r=M*g+g/2,i=E*f+f/2,S(E,M),P()}return{x:r,y:i}})}e.fit&&r.fit(t.padding),r.one("layoutready",e.ready),r.trigger("layoutready"),r.one("layoutstop",e.stop),r.trigger("layoutstop")},t.prototype.stop=function(){},e("layout","grid",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},r,t)}var r={ready:function(){},stop:function(){}};t.prototype.run=function(){var e=this.options,t=e.cy;t.nodes().positions(function(){return{x:0,y:0}}),t.one("layoutready",e.ready),t.trigger("layoutready"),t.one("layoutstop",e.stop),t.trigger("layoutstop")},t.prototype.stop=function(){var e=this.options;cy.one("layoutstop",e.stop),cy.trigger("layoutstop")},e("layout","null",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},r,t)}var r={fit:!0,ready:void 0,stop:void 0,positions:void 0,zoom:void 0,pan:void 0,padding:30};t.prototype.run=function(){function e(e){return null==t.positions?null:null==t.positions[e._private.data.id]?null:t.positions[e._private.data.id]}{var t=this.options,r=t.cy,i=r.nodes();r.edges(),r.container()}i.positions(function(t,r){var i=e(r);return r.locked()||null==i?!1:i}),null!=t.pan&&r.pan(t.pan),null!=t.zoom&&r.zoom(t.zoom),r.one("layoutready",t.ready),r.trigger("layoutready"),t.fit&&r.fit(t.padding),r.one("layoutstop",t.stop),r.trigger("layoutstop")},e("layout","preset",t),e("core","presetLayout",function(){var e=this,t={},r={};return e.nodes().each(function(e,t){r[t.data("id")]=t.position()}),t.positions=r,t.name="preset",t.zoom=e.zoom(),t.pan=e.pan(),t})}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},r,t)}var r={ready:void 0,stop:void 0,fit:!0,padding:30};t.prototype.run=function(){var e=this.options,t=e.cy,r=t.nodes(),i=(t.edges(),t.container()),a=i.clientWidth,n=i.clientHeight;r.positions(function(e,t){return t.locked()?!1:{x:Math.round(Math.random()*a),y:Math.round(Math.random()*n)}}),t.one("layoutready",e.ready),t.trigger("layoutready"),e.fit&&t.fit(e.padding),t.one("layoutstop",e.stop),t.trigger("layoutstop")},t.prototype.stop=function(){},e("layout","random",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},r,t)}var r={maxSimulationTime:1e3,ungrabifyWhileSimulating:!0,fit:!0,random:!1};t.prototype.run=function(){function e(e){var t=e.scratch("springy").model.id,r=b.layout.nodePoints[t].p,i=e.position(),a=null!=i.x&&null!=i.y?g(e.position()):{x:4*Math.random()-2,y:4*Math.random()-2};r.x=a.x,r.y=a.y}function t(){a.ungrabifyWhileSimulating&&x.ungrabify(),b.start()}function r(e){p.filterNodes(function(){return!1}),setTimeout(function(){a.ungrabifyWhileSimulating&&x.grabify(),e()},100)}var i=this,a=this.options,n=a.cy,o=n.nodes(),s=n.edges(),l=n.container(),c=l.clientWidth,u=l.clientHeight,p=new Springy.Graph;o.each(function(e,t){t.scratch("springy",{model:p.newNode({element:t})})}),s.each(function(e,t){fdSrc=t.source().scratch("springy").model,fdTgt=t.target().scratch("springy").model,t.scratch("springy",{model:p.newEdge(fdSrc,fdTgt,{element:t})})});var d=new Springy.Layout.ForceDirected(p,400,400,.5),h=d.getBoundingBox(),v=({bottomleft:new Springy.Vector(-2,-2),topright:new Springy.Vector(2,2)},function(e){var t=h.topright.subtract(h.bottomleft),r=e.subtract(h.bottomleft).divide(t.x).x*c,i=e.subtract(h.bottomleft).divide(t.y).y*u;return new Springy.Vector(r,i)}),g=function(e){var t=h.topright.subtract(h.bottomleft),r=e.x/c*t.x+h.bottomleft.x,i=e.y/u*t.y+h.bottomleft.y;return new Springy.Vector(r,i)},f=n.collection(),y=n.nodes().size(),m=1,b=new Springy.Renderer(d,function(){},function(){},function(t,r){var i=v(r),o=t.data.element;window.p=r,window.n=t,o.locked()?e(o):(o._private.position={x:i.x,y:i.y},f=f.add(o)),m==y&&(n.one("layoutready",a.ready),n.trigger("layoutready")),m++});o.each(function(t,r){a.random||e(r)}),setInterval(function(){f.size()>0&&(f.rtrigger("position"),f=n.collection())},50),o.bind("drag",function(){e(this)});var x=o.filter(":grabbable"),w=i.stopSystem=function(){r(function(){a.fit&&n.fit(),n.one("layoutstop",a.stop),n.trigger("layoutstop"),i.stopSystem=null})};t(),setTimeout(function(){w()},a.maxSimulationTime)},t.prototype.stop=function(){null!=this.stopSystem&&this.stopSystem()},e("layout","springy",t)}(cytoscape),function(e){"use strict";function t(){}t.prototype.notify=function(){},e("renderer","null",t)}(cytoscape);